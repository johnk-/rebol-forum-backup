<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:discourse="http://www.discourse.org/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Databases - AltRebol</title>
    <link>https://forum.rebol.info/c/domains/other-database/27</link>
    <description>Topics in the &#39;Databases&#39; category This is for discussion of other database connectors (not ODBC) such as nosql (couchdb, mongodb), specific drivers such as mysql, sqllite, and MVC models such as Active Records</description>
    
      <lastBuildDate>Wed, 17 Mar 2021 09:25:07 +0000</lastBuildDate>
      <atom:link href="https://forum.rebol.info/c/domains/other-database/27.rss" rel="self" type="application/rss+xml" />
        <item>
          <title>ODBC (and HTTPD) now Testing via ren-c-action</title>
          <dc:creator><![CDATA[hostilefork]]></dc:creator>
          <category>Databases</category>
          <description><![CDATA[
            <p>I've revived the ODBC continuous integration test, at least for MySQL and Sqlite (the Firebird OBDC driver was in a bit of a problem state when I last checked, so I stopped trying to suffer through that specific one).</p>
<p>These scripts use the <a href="https://forum.rebol.info/t/the-new-ren-c-github-action-run-natively-run-on-web/1562">new <code>ren-c-action</code> on GitHub</a>, and are fetching the built tool to test it.  It's this easy:</p>
<p><a href="https://github.com/metaeducation/rebol-odbc/blob/15c43e0a916b403af016eabffb73360054620be3/.github/workflows/mysql-test.yml#L142"><strong>mysql-test.yml</strong> Line 142</a></p>
<p>And you can see nice green lights on the <a href="https://github.com/metaeducation/rebol-odbc/runs/2124086690?check_suite_focus=true">MySQL Test Log</a> and <a href="https://github.com/metaeducation/rebol-odbc/runs/2124086739?check_suite_focus=true">Sqlite Test Log</a></p>
<p>As another case of seeing it in action, here is the HTTPD server being tested in debug and release configurations on Linux, Windows, and MacOS:</p>
<p><strong><a href="https://github.com/metaeducation/rebol-httpd/actions/runs/660379622">6 green lights</a></strong></p>
<p>When you look at how simple the GitHub Actions script is that does this, it's again super easy...barely an inconvenience:</p>
<p><strong><a href="https://github.com/metaeducation/rebol-httpd/blob/master/.github/workflows/test-httpd.yml">test-httpd.yml</a></strong></p>
<p>So it's definitely long overdue... <strong>Any Project You Care About Should be in a Repo With Tests Like This!</strong>  That means it's time for <a class="mention" href="/u/blackattr">@BlackATTR</a> to have the QUERY dialect covered by this, for instance!</p>
            <p><small>5 posts - 2 participants</small></p>
            <p><a href="https://forum.rebol.info/t/odbc-and-httpd-now-testing-via-ren-c-action/1563">Read full topic</a></p>
          ]]></description>
          <link>https://forum.rebol.info/t/odbc-and-httpd-now-testing-via-ren-c-action/1563</link>
          <pubDate>Wed, 17 Mar 2021 09:25:07 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.rebol.info-topic-1563</guid>
          <source url="https://forum.rebol.info/t/odbc-and-httpd-now-testing-via-ren-c-action/1563.rss">ODBC (and HTTPD) now Testing via ren-c-action</source>
        </item>
        <item>
          <title>MySQL extension</title>
          <dc:creator><![CDATA[iArnold]]></dc:creator>
          <category>Databases</category>
          <description><![CDATA[
            <p>For the MySQL extension, I now have a basic set of functions implemented. Here is a list of all functions and the status. I would like to know if the functions I still plan to implement are worth the trouble or can be skipped, and if any of the ones I think should be ignored are on the must-haves list of someone.</p>
<pre><code>mysql_affected_rows()            mysql-affected-rows            Basic functions
mysql_autocommit()               mysql-autocommit               ?
mysql_change_user()              mysql-change-user              ?
mysql_character_set_name()       mysql-character-set-name       Done
mysql_close()                    mysql-close                    Basic functions
mysql_commit()                   NO                             Perform query "commit;"
mysql_connect()                  NO                             Deprecated function
mysql_create_db()                NO                             Deprecated function
mysql_data_seek()                mysql-data-seek                Done
mysql_debug()                    NO                             Needs super rights.
mysql_drop_db()                  NO                             Deprecated function
mysql_dump_debug_info()          NO                             Needs super rights
mysql_eof()                      NO                             Deprecated function
mysql_errno()                    mysql-errno                    Basic functions
mysql_error()                    mysql-error                    Basic functions
mysql_escape_string()            NO                             Depricated (Use a wrapper function)
mysql_fetch_field()              mysql-fetch-field              Done
mysql_fetch_field_direct()       mysql-fetch-field-direct       Done
mysql_fetch_fields()             mysql-fetch-fields             Done
mysql_fetch_lengths()            mysql-fetch-lengths            Done
mysql_fetch_row()                mysql-fetch-row                Basic functions
mysql_field_count()              mysql-field-count              Basic functions
mysql_field_seek()               mysql-field-seek               Done
mysql_field_tell()               mysql-field-tell               Done
mysql_free_result()              mysql-free-result              Basic functions
mysql_get_character_set_info()   mysql-get-character-set-info   Done
mysql_get_client_info()          mysql-get-client-info          Basic functions
mysql_get_client_version()       mysql-get-client-version       Done
mysql_get_host_info()            mysql-get-host-info            Basic functions
mysql_get_option()               NO                             Not available in older versions pre 2012
mysql_get_proto_info()           mysql-get-proto-info           Done
mysql_get_server_info()          mysql-get-server-info          Basic functions
mysql_get_server_version()       mysql-get-server-version       Done
mysql_get_ssl_cipher()           mysql-get-ssl-cipher           ?
mysql_hex_string()               mysql-hex-string               ?
mysql_info()                     mysql-info                     Done
mysql_init()                     NO                             Not in MySQL 8.0
mysql_insert_id()                mysql-insert-id                Done
mysql_kill()                     mysql-kill                     For Threads?
mysql_library_end()              mysql-library-end              For Threads?
mysql_library_init()             mysql-library-init             For Threads?
mysql_list_dbs()                 NO    
mysql_list_fields()              NO    
mysql_list_processes()           mysql-list-processes           For Threads?
mysql_list_tables()              NO    
mysql_more_results()             mysql-more-results             Done
mysql_next_result()              mysql-next-result              Done
mysql_num_fields()               mysql-num-fields               Done
mysql_num_rows()                 mysql-num-rows                 Basic functions
mysql_options()                  mysql-options                  ?
mysql_options4()                 mysql-options4                 ?
mysql_ping()                     mysql-ping                     Done
mysql_query()                    mysql-query                    Basic functions
mysql_real_connect()             mysql-connect                  Basic functions
mysql_real_connect_dns_srv()     NO    
mysql_real_escape_string()       NO                             Use a wrapper function
mysql_real_escape_string_quote() NO                             Use a wrapper function
mysql_real_query()               NO    
mysql_refresh()                  NO                             Needs RELOAD privilege
mysql_reload()                   NO                             Needs RELOAD privilege
mysql_reset_connection()         NO                             Not available in older versions pre 2012
mysql_reset_server_public_key()  NO    
mysql_result_metadata()          NO    
mysql_rollback()                 NO                             Perform query "rollback;"
mysql_row_seek()                 mysql-row-seek                 Done
mysql_row_tell()                 mysql-row-tell                 Done
mysql_select_db()                NO    
mysql_server_end()               NO    
mysql_server_init()              NO    
mysql_session_track_get_first()  NO    
mysql_session_track_get_next()   NO    
mysql_set_character_set()        mysql-set-character-set        Done
mysql_set_local_infile_default() NO    
mysql_set_local_infile_handler() NO    
mysql_set_server_option()        NO    
mysql_shutdown()                 NO    
mysql_sqlstate()                 mysql-sqlstate                 Done
mysql_ssl_set()                  mysql-ssl-set                  ?
mysql_stat()                     mysql-stat                     Done
mysql_store_result()             mysql-store-result             Basic functions
mysql_thread_end()               mysql-thread-end               For Threads?
mysql_thread_id()                mysql-thread-id                For Threads?
mysql_thread_init()              mysql-thread-init              For Threads?
mysql_thread_safe()              mysql-thread-safe              For Threads?
mysql_use_result()               mysql-use-result               Done
mysql_warning_count()            mysql-warning-count            Done
</code></pre>
<p>TBD: To Be Done, planning to add this in the next version<br>
Done: Added<br>
?: Not sure if needed and if so why is it needed as a separate native?<br>
NO: I do not see the need for this, especially the list functions that show items based on Regular Expressions.</p>
            <p><small>24 posts - 2 participants</small></p>
            <p><a href="https://forum.rebol.info/t/mysql-extension/1319">Read full topic</a></p>
          ]]></description>
          <link>https://forum.rebol.info/t/mysql-extension/1319</link>
          <pubDate>Fri, 21 Aug 2020 15:39:57 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.rebol.info-topic-1319</guid>
          <source url="https://forum.rebol.info/t/mysql-extension/1319.rss">MySQL extension</source>
        </item>
        <item>
          <title>Rethinking the ODBC Dialect: Inline Parameters</title>
          <dc:creator><![CDATA[hostilefork]]></dc:creator>
          <category>Databases</category>
          <description><![CDATA[
            <p>The code the ODBC extension is based on was cloning Rebol2's model of thinking of the database services as being a PORT!.  You would run queries by INSERT-ing SQL into the port, and then COPY the port to get a BLOCK! of results back.  For anyone unfamiliar:</p>
<p><a href="http://www.rebol.com/docs/database.html" class="onebox" target="_blank" rel="nofollow noopener">http://www.rebol.com/docs/database.html</a></p>
<p>When you passed a BLOCK! as the thing to INSERT to the port, that block would have a string in the first position...this was the SQL.  But if that SQL had <code>?</code> characters in it (that weren't part of a string literal), then those represented substitution slots.  The block then was supposed to have as many additional values in it as <code>?</code>... and these Rebol values would be filled in as parameters.</p>
<p>This approach is fundamental to how ODBC works (the <code>?</code> syntax is an ODBC standard).  It means that you don't have to turn every value you have into a string to insert it.  It saves you from worrying about how to escape those string values, <em>may</em> be more efficient (for some types), and protects against <a href="https://imgs.xkcd.com/comics/exploits_of_a_mom.png" rel="nofollow noopener">SQL Injection Attacks</a>.</p>
<h2>We Can Do Better, and I've Made a Start At It</h2>
<p>The idea I had was:</p>
<ol>
<li>Perform implicit evaluation by default</li>
<li>Assume string components should be implicitly SPACED</li>
<li>Use the new <span class="mention">@xxx</span> types to let you put the substitution variables in the spots you want</li>
</ol>
<p>The first two points will be familiar to anyone who has used PRINT.  But the third point means substitutions would be easier to see at the point they are intended to be:</p>
<pre><code>odbc-execute statement [{foo} @value1 {bar} @(expression two) {baz}]
; ...acts like...
insert statement compose [{foo ? bar ? baz} (value1) (expression two)]
</code></pre>
<p>The nice things the @ values bring into the mix is that since they do not reduce, you can distinguish them from basic code you're using to try and form the SQL expression from sanitized variables...while still using both.</p>
<h2>Behold, More State-of-the-Art</h2>
<p>Here's a little wrapper called ODBC-EXECUTE:</p>
<pre><code>odbc-execute: function [
    statement [port!]
    query [text! block!]
    /parameters [block!] "Usually implicitly derived from @params in query"
][
    parameters: default [copy []]
    if block? query [
        query: spaced map-each item reduce query [  ; see note (1)
            switch type of item [
                sym-word! sym-path! [get item]
                sym-group! [reduce as group! item]
            ] then value =&gt; [  ; see note (2)
                append parameters value
                "?"
            ] else [
                quote :item  ; see note (3)
            ]
        ]
    ]
    insert statement compose [(query) ((parameters))]  ; see note (4)
]
</code></pre>
<p>Pretty brilliant, IMNSHO.  <img src="https://forum.rebol.info/images/emoji/twitter/stuck_out_tongue_winking_eye.png?v=9" title=":stuck_out_tongue_winking_eye:" class="emoji" alt=":stuck_out_tongue_winking_eye:"></p>
<ol>
<li>
<p>We want to REDUCE first, before we go hunting for <span class="mention">@params</span> and assuming they are parameters, since they might be arguments to functions.  Think of it a bit like how <strong>print ["a" first "bc" "d"]</strong> can't a-priori know that "bc" is a string to be printed.  It has to evaluate, and "bc" disappears as a function argument...in the same way, an <span class="mention">@xxx</span> might be consumed and not be intended as a parameter.  <em>(This may or may not be desirable...but again it's up to the dialect designer, who has freedom to decide how liberal they want to be.)</em></p>
</li>
<li>
<p>This is a great example of how to use the value vs. null distinction to avoid repeating code.  The branches don't have to repeat the <code>append parameters</code> or the fact that they want <code>?</code> to wind up in the query string, thanks to the protocol.</p>
</li>
<li>
<p>This shows generalized quoting being used to get out of a potential jam.  The problem is, we REDUCE'd our dialect items before we went looking through them for our <span class="mention">@params</span> (I explained why in note 1).  But then we want to use SPACED to get spacing, and it reduces by default.  There should probably be a way to use DELIMIT and its variants without reducing, but no such entry point exists at the moment...so to avoid double-reduction we just quote everything so the evaluation is a no-op.</p>
</li>
<li>
<p>Just wanted to say I've been really a big fan of the "don't splice by default" for blocks in COMPOSE.  Once you get used to the idea that values will be put in as-is unless you use <strong>(( ))</strong> it really is superior.</p>
</li>
</ol>
<p>Not only do you see several Ren-C-specific tech points making this work, you can also specialize it to make it nicer.  I picked a clunky name precisely because I don't know how the PORT! interface should work, but just do this:</p>
<pre><code>sql: specialize 'odbc-execute [statement: statement]
</code></pre>
<p>Someday soon that should be able to be <strong>sql: (=&gt; odbc-execute statement)</strong> as point-free specialization.  But maybe it should be sql/execute and that's clearer.  Who knows.</p>
<h2>Questions, Comments, Concerns?</h2>
<p>As a best practices question, one might wonder if it shouldn't be easier to splice unsanitized variables into the SQL than to splice sanitized ones.  You might flip it so that WORD! means parameter, and SYM-WORD! means unsafe use...or get even more strict and suggest anyone wanting to put in string components has to do it with an explicit COMPOSE before ODBC-EXECUTE is called.</p>
<p>I feel that's a bit overkill and would frustrate those doing casual hacking on their databases.  But the great thing is that if we just build this as a tool on top of a fundamental ODBC operation then people with different opinions can be more aggressive in their versions of the dialect.  It's not a big deal <strong>if the dialect is easy to make</strong>. ミ★</p>
            <p><small>7 posts - 3 participants</small></p>
            <p><a href="https://forum.rebol.info/t/rethinking-the-odbc-dialect-inline-parameters/1234">Read full topic</a></p>
          ]]></description>
          <link>https://forum.rebol.info/t/rethinking-the-odbc-dialect-inline-parameters/1234</link>
          <pubDate>Sun, 20 Oct 2019 08:07:07 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.rebol.info-topic-1234</guid>
          <source url="https://forum.rebol.info/t/rethinking-the-odbc-dialect-inline-parameters/1234.rss">Rethinking the ODBC Dialect: Inline Parameters</source>
        </item>
        <item>
          <title>ODBC: Maybe a Relevant Target for Tooling?</title>
          <dc:creator><![CDATA[hostilefork]]></dc:creator>
          <category>Databases</category>
          <description><![CDATA[
            <p>It turned out that <a class="mention" href="/u/orr721">@orr721</a> had been using Ren-C with ODBC for a couple of years (to process data from Microsoft Excel).  I'd been on the fence about its relevance, because it seems a very "legacy" type of technology... I'm more interested in graph databases and non-SQL-oriented storage engines.  Also, the bit of PORT!-related cruft as an interface seemed very poorly thought out (as I feel <a href="https://forum.rebol.info/t/on-the-critique-of-port/1213/2">pretty much all of ports have been shown to be</a>).</p>
<p>But since he'd been using it and <a href="https://github.com/metaeducation/ren-c/issues/1017" rel="nofollow noopener">filed a bug report</a>--and I've been asking people to give me reproducible tests for things they care about to put on Travis--I figured I could patch it up.  I did so in a way that pushed it along even further as a libRebol client; various commits I made showed <a href="https://github.com/metaeducation/ren-c/commit/c63a00159c7bd7012a4791a61a31da8be3e202d6#diff-2eef67ba3a28651b52e60f00b96f2607R338" rel="nofollow noopener">flexing the muscles of the API and its approach</a>.</p>
<p>But not wanting the work to atrophy again, I created a new <a href="https://github.com/metaeducation/rebol-odbc" rel="nofollow noopener">rebol-odbc GitHub with its own .travis.yml file and issue database</a>.  I made it run a primordial but somewhat broad <a href="https://github.com/metaeducation/rebol-odbc/blob/master/tests/odbc-test.reb" rel="nofollow noopener">insert and select <code>%odbc-test.reb</code></a>, which puts various datatypes into a table from Rebol values, and then checks to see that the same values can be gotten back out.</p>
<p>The test is now automated and <a href="https://travis-ci.org/metaeducation/rebol-odbc/jobs/599462561#L601" rel="nofollow noopener">running and succeeding on MySQL</a> as well as <a href="https://travis-ci.org/metaeducation/rebol-odbc/jobs/599462561#L724" rel="nofollow noopener">succeeding under SQLite</a> on unixodbc.  Linux is the more complicated environment to get thing working on, as ODBC originates from Microsoft--so it's more turnkey there.</p>
<h2>I Might Be Underestimating How Useful This Is</h2>
<p><strong>Rebol2's ODBC abilities were considered valuable enough that they were a paid feature.  One implication of that is that few people ever had a chance to experience a single-download tool that can manipulate ODBC databases and translate fields to native types, while offering the language abilities of Rebol2.</strong>  (So they sure haven't seen what such a tool with Ren-C can do!)</p>
<p>I went hunting for a vetted open-source alternative client that could do arbitrary SQL commands on DBC databases on your machine.  There was pretty much no kind of "simple" option.</p>
<p>But I already had Python available on the machine:</p>
<pre><code>shell&gt; python --version
Python 2.7.15+
</code></pre>
<p>So since there was a "pyodbc" I thought I'd install it.  However to get it, I had to install the Python Package Manager.  This is what <code>sudo apt install python-pip</code> gave back:</p>
<pre><code>The following additional packages will be installed:
  libexpat1-dev libjs-sphinxdoc libpython-all-dev libpython-dev libpython2-dev libpython2.7 libpython2.7-dev
  libpython2.7-minimal libpython2.7-stdlib python-all python-all-dev python-asn1crypto python-cffi-backend
  python-configparser python-crypto python-cryptography python-dev python-entrypoints python-enum34 python-idna
  python-ipaddress python-keyring python-keyrings.alt python-pip-whl python-pkg-resources python-secretstorage
  python-setuptools python-six python-wheel python-xdg python2-dev python2.7 python2.7-dev python2.7-minimal
Suggested packages:
  python-crypto-doc python-cryptography-doc python-cryptography-vectors python-enum34-doc gnome-keyring
  gir1.2-gnomekeyring-1.0 python-fs python-gdata python-keyczar python-secretstorage-doc python-setuptools-doc
  python2.7-doc binfmt-support
The following NEW packages will be installed:
  libexpat1-dev libjs-sphinxdoc libpython-all-dev libpython-dev libpython2-dev libpython2.7-dev python-all
  python-all-dev python-asn1crypto python-cffi-backend python-configparser python-crypto python-cryptography
  python-dev python-entrypoints python-enum34 python-idna python-ipaddress python-keyring python-keyrings.alt
  python-pip python-pip-whl python-pkg-resources python-secretstorage python-setuptools python-six python-wheel
  python-xdg python2-dev python2.7-dev
The following packages will be upgraded:
  libpython2.7 libpython2.7-minimal libpython2.7-stdlib python2.7 python2.7-minimal
5 upgraded, 30 newly installed, 0 to remove and 191 not upgraded.
Need to get 40.1 MB of archives.
After this operation, 66.7 MB of additional disk space will be used.
</code></pre>
<p>So I need to download and decompress 40.1 MB of data, to take up 66.7 MB of disk (spread across who knows how many files), when I already had a python interpreter on the machine?  <strong>And this won't even get me pyodbc!</strong>  <img src="https://forum.rebol.info/images/emoji/twitter/frowning.png?v=9" title=":frowning:" class="emoji" alt=":frowning:"></p>
<p>All right, fine.  After installing, I'd gone from 2.7.15+ to 2.7.16:</p>
<pre><code>shell&gt; python --version
Python 2.7.16
</code></pre>
<p>Running <strong>pip install pyodbc</strong> wasn't egregiously big, but still seemed dauntingly complex:</p>
<pre><code>Collecting pyodbc
  Downloading https://files.pythonhosted.org/packages/75/29/aa190749bac37ede0f11a68a75e7055254699c11572bd94213f1163dfd8f/pyodbc-4.0.27.tar.gz (242kB)
100% |████████████████████████████████| 245kB 1.9MB/s 
Building wheels for collected packages: pyodbc
  Running setup.py bdist_wheel for pyodbc ... done
  Stored in directory: /home/hostilefork/.cache/pip/wheels/87/b7/78/0740a2ed98bfe463525ad42d535370e34141c5d36b2d00dcaf
Successfully built pyodbc
Installing collected packages: pyodbc
Successfully installed pyodbc-4.0.27
</code></pre>
<p>Putting aside the "what the heck is" <code>...wheels/87/b7/78/0740a2...</code>, the package manager actually built the shared library.  So the specification of the package is parallel to our "extensions"--presumably if you're on windows then <code>pip install pyodbc</code> would be able to adapt its compiler settings and make a .DLL against Windows APIs as opposed to a <code>.so</code> against POSIX.  Unlike <strong>apt</strong>, it seems that <strong>pip</strong> does installation on a per-user basis by default.</p>
<pre><code>-rwxrwxr-x 1 hostilefork hostilefork 832848 Oct 18 17:33 /home/hostilefork/.local/lib/python2.7/site-packages/pyodbc.so*
</code></pre>
<p>So over 800k of binaries <em>just for the ODBC part</em>.  That doesn't make much sense, as most all the ODBC functionality is a shared library.  What could all of that be?</p>
<h2>Maybe There Is Opportunity Here</h2>
<p>I don't know how big the cross-platform ODBC market is, and I've already mentioned my personal reluctance in getting involved in packaging binaries.  But I did have a thought...</p>
<p>I've already suggested that the Trojan Horse of distributing the system might be to give people utilities built on Rebol that don't try and sell them the language, but try to sell them particular functionality (a dialect, etc.) built with the language.</p>
<p><strong>What if every encapped application could sense its filename and then if it was <code>r3</code> (or <code>rebol</code>, or some other list of special terms) it would automatically act as plain Rebol?</strong></p>
<p>This means userbases could be identified to market a tool to.  You build for the platforms of interest to them and encap the tool inside it.</p>
<p>I don't know what kind of ODBC-powered tool people might imagine, but it seems the world doesn't really even have a basic cross-platform string-based SQL query sorted out.  If you imagine just a few nice features built on the usermode console and a dialect, I wonder... <em>might there even be money in that</em>?</p>
<p>My own attention should be on the web build--but if there were others who came with an interest in this, it wouldn't hurt.  I don't know.  As I say, I just sensed a vacuum and was struck at how there might be an opportunity here.  <img src="https://forum.rebol.info/images/emoji/twitter/man_shrugging.png?v=9" title=":man_shrugging:" class="emoji" alt=":man_shrugging:"></p>
            <p><small>13 posts - 5 participants</small></p>
            <p><a href="https://forum.rebol.info/t/odbc-maybe-a-relevant-target-for-tooling/1233">Read full topic</a></p>
          ]]></description>
          <link>https://forum.rebol.info/t/odbc-maybe-a-relevant-target-for-tooling/1233</link>
          <pubDate>Sun, 20 Oct 2019 03:52:13 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.rebol.info-topic-1233</guid>
          <source url="https://forum.rebol.info/t/odbc-maybe-a-relevant-target-for-tooling/1233.rss">ODBC: Maybe a Relevant Target for Tooling?</source>
        </item>
        <item>
          <title>Implementing scheme/port(?) for Oracle DB in REN-C</title>
          <dc:creator><![CDATA[iArnold]]></dc:creator>
          <category>Databases</category>
          <description><![CDATA[
            <p>Say I want to connect to an Oracle database.<br>
On rebol sdk (see <a href="http://rebol.com/docs/database.html" rel="nofollow noopener">http://rebol.com/docs/database.html</a> ) it says there is an Oracle scheme for R2 (but this is not yet available and it is not in R3/REN-C</p>
<p>Say I want to connect to the database that is named DBTEST and is on address i1.i2.i3.i4 using port 9999<br>
The user (or schema for oracle) is RESU and password is SECRET.</p>
<p>Now how to create the scheme for Oracle in REN-C and how can can we create and use the connection to this DB?</p>
            <p><small>5 posts - 2 participants</small></p>
            <p><a href="https://forum.rebol.info/t/implementing-scheme-port-for-oracle-db-in-ren-c/605">Read full topic</a></p>
          ]]></description>
          <link>https://forum.rebol.info/t/implementing-scheme-port-for-oracle-db-in-ren-c/605</link>
          <pubDate>Sun, 06 May 2018 08:33:16 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.rebol.info-topic-605</guid>
          <source url="https://forum.rebol.info/t/implementing-scheme-port-for-oracle-db-in-ren-c/605.rss">Implementing scheme/port(?) for Oracle DB in REN-C</source>
        </item>
        <item>
          <title>OBDC, Excel and memory allocation problems</title>
          <dc:creator><![CDATA[orr721]]></dc:creator>
          <category>Databases</category>
          <description><![CDATA[
            <p><strong>Error: Couldn't allocate column buffer</strong></p>
<p>Hi there! First time posting on a Rebol/Ren-C/Red forum, I hope this is the right place for my question. I have been testing the ODBC functionality in <em>Ren-C build 2.102.0.3.1</em> from <strong>10-Aug-2017/5:25:53</strong> on Windows 10 Pro.</p>
<p>Is there any way how to increase the available memory for the ODBC query? Because I have some kind of memory allocation problem while running my queries..</p>
<pre><code>&gt;&gt; insert conn-port "select * from [Sheet0$] where Meno = 'ALENA'"
** Error: Couldn't allocate column buffer!
** Where: insert-odbc --anonymous-- insert
** Near: reduce compose [(sql)] ??
</code></pre>
<p>The query should return 1 record from an XLSX file with 13 columns, where 2 of the columns contain strings longer than 1500 characters. When I run the select query without these two columns the query runs fine and I receive my data.</p>
<p>I am a bit confused with this problem because in Rebol2/View I can run the same query with all 100 records (without the <code>where</code> clause) in a single statement without any memory problems. Am I missing something or is it a bug in the ODBC Ren-C implementation? Thank you very much for an answer and for your excellent work.</p>
<p>P.S. running TRACE ON crashes the executable immediately..</p>
            <p><small>20 posts - 3 participants</small></p>
            <p><a href="https://forum.rebol.info/t/obdc-excel-and-memory-allocation-problems/280">Read full topic</a></p>
          ]]></description>
          <link>https://forum.rebol.info/t/obdc-excel-and-memory-allocation-problems/280</link>
          <pubDate>Thu, 31 Aug 2017 09:29:41 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.rebol.info-topic-280</guid>
          <source url="https://forum.rebol.info/t/obdc-excel-and-memory-allocation-problems/280.rss">OBDC, Excel and memory allocation problems</source>
        </item>
        <item>
          <title>Implementing a MongoDB protocol</title>
          <dc:creator><![CDATA[gchiu]]></dc:creator>
          <category>Databases</category>
          <description><![CDATA[
            <p>Inspired by this question ( soon to be closed or shunted off to obscurity )</p>
<aside class="onebox stackexchange">
  <header class="source">
      <a href="https://stackoverflow.com/questions/44295464/how-would-you-create-a-protocol-to-access-mongodb-with-rebol" target="_blank" rel="noopener">stackoverflow.com</a>
  </header>
  <article class="onebox-body">
      <a href="https://stackoverflow.com/users/310291/user310291" target="_blank" rel="noopener">
    <img alt="user310291" src="https://www.gravatar.com/avatar/22184b90539c866099c39872b3c12a0e?s=128&amp;d=identicon&amp;r=PG" class="thumbnail onebox-avatar" width="128" height="128">
  </a>
<h4>
  <a href="https://stackoverflow.com/questions/44295464/how-would-you-create-a-protocol-to-access-mongodb-with-rebol" target="_blank" rel="noopener">How would you create a protocol to access MongoDB with Rebol?</a>
</h4>

<div class="tags">
  <strong>mongodb, rebol</strong>
</div>

<div class="date">
  asked by
  
  <a href="https://stackoverflow.com/users/310291/user310291" target="_blank" rel="noopener">
    user310291
  </a>
  on <a href="https://stackoverflow.com/questions/44295464/how-would-you-create-a-protocol-to-access-mongodb-with-rebol" target="_blank" rel="noopener">10:11PM - 31 May 17 UTC</a>
</div>

  </article>
  <div class="onebox-metadata">
    
    
  </div>
  <div style="clear: both"></div>
</aside>

<p>I wondered how hard really would it to do this?</p>
<p>Of course, there are counter arguments why it's a <a href="http://cryto.net/~joepie91/blog/2015/07/19/why-you-should-never-ever-ever-use-mongodb/">complete waste of time</a></p>
<p>Anyway, as I mentioned in the above SO answer, it's a simple wire protocol that uses a request/response so it <em>should</em> be straight forward enough to implement.  Data is encapsulated using a <a href="http://bsonspec.org/spec.html">BSON</a> format which is a binary JSON format.  We don't yet have a BSON parser but <a class="mention" href="/u/rebolek">@rebolek</a> had one in <a href="https://twitter.com/rebtut/status/368094926094888960">2013</a> and is <a href="http://chat.stackoverflow.com/transcript/message/37403899#37403899">working now to finish and release</a> it.</p>
<p>So, this stub is here for someone who wants to work on it.</p>
<ul>
<li>
<p>MongoDB <a href="https://docs.mongodb.com/manual/reference/mongodb-wire-protocol/">wire protocol documentation</a></p>
</li>
<li>
<p>Free online <a href="https://cloud.mongodb.com/">MongoDB server</a> - not sure how useful this is going to be since it uses https, and we do have some current problems with supported cipher_suites, and also they use http redirects which we can manage but it's a pain.</p>
</li>
<li>
<p>a <a href="http://uu.diva-portal.org/smash/get/diva2:435120/FULLTEXT01.pdf">CRUD implementation</a> in Prolog</p>
</li>
</ul>
            <p><small>2 posts - 1 participant</small></p>
            <p><a href="https://forum.rebol.info/t/implementing-a-mongodb-protocol/128">Read full topic</a></p>
          ]]></description>
          <link>https://forum.rebol.info/t/implementing-a-mongodb-protocol/128</link>
          <pubDate>Sun, 04 Jun 2017 22:23:11 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.rebol.info-topic-128</guid>
          <source url="https://forum.rebol.info/t/implementing-a-mongodb-protocol/128.rss">Implementing a MongoDB protocol</source>
        </item>
        <item>
          <title>About the Databases category</title>
          <dc:creator><![CDATA[gchiu]]></dc:creator>
          <category>Databases</category>
          <description><![CDATA[
            <p>This is for discussion of other database connectors (not ODBC) such as nosql (couchdb, mongodb), specific drivers such as mysql, sqllite, and MVC models such as Active Records</p>
            <p><small>1 post - 1 participant</small></p>
            <p><a href="https://forum.rebol.info/t/about-the-databases-category/127">Read full topic</a></p>
          ]]></description>
          <link>https://forum.rebol.info/t/about-the-databases-category/127</link>
          <pubDate>Sun, 04 Jun 2017 22:00:14 +0000</pubDate>
          <discourse:topicPinned>Yes</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.rebol.info-topic-127</guid>
          <source url="https://forum.rebol.info/t/about-the-databases-category/127.rss">About the Databases category</source>
        </item>
        <item>
          <title>Testing ODBC branch</title>
          <dc:creator><![CDATA[gchiu]]></dc:creator>
          <category>Databases</category>
          <description><![CDATA[
            <p>Ok, set up a user DSN which works when tested from the 64bit ODBC panel</p>
<pre><code>&gt;&gt; do %odbc-test.reb
Script: ODBC Test Script Version: Date:
** Error: [ODBC Firebird Driver][Firebird]Dynamic SQL Error
SQL error code = -104
Token unknown - line 1, column 14
`
** Where: insert-odbc --anonymous-- insert for-each do catch either either --anonymous-- do
** Near: reduce compose [(sql)] ??
** File: C:\Projects\ren-c\src\extensions\odbc\mod-odbc.c
** Line: 945
</code></pre>
<p>ⓘ  Note: use WHY for more error information</p>
<p>So, looks like I need to make some changes to the test script.  It doesn't like back ticks.</p>
<h1>Console Testing</h1>
<pre><code>connection: open odbc://REBOL
insert statement {select rdb$relation_id from rdb$database;}
== [RDB$RELATION_ID]
&gt;&gt; rows: copy statement
== [[128]]</code></pre>
            <p><small>23 posts - 3 participants</small></p>
            <p><a href="https://forum.rebol.info/t/testing-odbc-branch/114">Read full topic</a></p>
          ]]></description>
          <link>https://forum.rebol.info/t/testing-odbc-branch/114</link>
          <pubDate>Thu, 01 Jun 2017 01:03:35 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.rebol.info-topic-114</guid>
          <source url="https://forum.rebol.info/t/testing-odbc-branch/114.rss">Testing ODBC branch</source>
        </item>
        <item>
          <title>Setting up Firebird RDBMS under Windows 64</title>
          <dc:creator><![CDATA[gchiu]]></dc:creator>
          <category>Databases</category>
          <description><![CDATA[
            <p>Download the latest installer ( <a href="https://www.firebirdsql.org/en/firebird-3-0/#Win64" rel="nofollow noopener">https://www.firebirdsql.org/en/firebird-3-0/#Win64</a> )</p>
<p>And then the ODBC driver ( <a href="https://firebirdsql.org/en/odbc-driver/" rel="nofollow noopener">https://firebirdsql.org/en/odbc-driver/</a> )</p>
<p>Create a database using the ISQL command line tool ( <a href="https://www.firebirdsql.org/pdfmanual/html/isql-create-database.html" rel="nofollow noopener">https://www.firebirdsql.org/pdfmanual/html/isql-create-database.html</a> )</p>
<pre><code>C:\Program Files\Firebird\Firebird_3_0\isql
</code></pre>
<p>Use CONNECT or CREATE DATABASE to specify a database<br>
To create a database named monkey.fdb and store it in a directory named test on your C drive:</p>
<pre><code>SQL&gt;CREATE DATABASE 'C:\Users\Graham\Documents\rebol.fdb' page_size 8192
CON&gt;user 'SYSDBA' password 'masterkey';
</code></pre>
<p>Note</p>
<p>In the CREATE DATABASE statement it is mandatory to place quote characters (single or double) around path, user name and password.</p>
<p>When running Classic Server on Linux, if the database is not started with a host name, the database file will be created with the Linux login name as the owner. This may cause access rights to others who may want to connect at a later stage. By prepending the localhost: to the path, the server process, with Firebird 2.0 running as user firebird, will create and own the file.</p>
<p>To test the newly created database type:</p>
<pre><code>SQL&gt;SELECT RDB$RELATION_ID FROM RDB$DATABASE;

RDB$RELATION_ID
===============
128

SQL&gt; commit;
</code></pre>
<p>To get back to the command prompt type <code>quit;</code> or <code>exit;</code> .</p>
<h1>ODBC</h1>
<p>Substitute your own account name for <code>Graham</code> <img src="https://forum.rebol.info/images/emoji/twitter/slight_smile.png?v=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Create a user DSN in the <code>ODBC Data Source Administrator (64bit)</code><br>
Select the Firebird/Interbase Driver<br>
Use <code>rebol</code> in the DSN<br>
And <code>c:\Users\Graham\Documents\REBOL.FDB</code> for the Database<br>
Database account is <code>SYSDBA</code> and password is <code>masterkey</code></p>
<p>Click on <code>Test Connection</code> to make sure it's all working.  Then click on <code>OK</code> to save it.</p>
            <p><small>1 post - 1 participant</small></p>
            <p><a href="https://forum.rebol.info/t/setting-up-firebird-rdbms-under-windows-64/112">Read full topic</a></p>
          ]]></description>
          <link>https://forum.rebol.info/t/setting-up-firebird-rdbms-under-windows-64/112</link>
          <pubDate>Wed, 31 May 2017 20:02:36 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.rebol.info-topic-112</guid>
          <source url="https://forum.rebol.info/t/setting-up-firebird-rdbms-under-windows-64/112.rss">Setting up Firebird RDBMS under Windows 64</source>
        </item>
  </channel>
</rss>
