<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ideas from the Lab: ‚öóÔ∏è Unbound SET-BLOCK! object keys? - Binding - AltRebol</title>
    <meta name="description" content="The new-age TUPLE! and PATH! won&amp;#39;t let you include types that would cause ambiguity.  For instance: 
&amp;gt;&amp;gt; to path! [foo example.com]
== foo/example.com

&amp;gt;&amp;gt; to path! [foo _ example.com]
== foo//example.com

&amp;gt;&amp;gt; to path! [foo&amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1333.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Ideas from the Lab: ‚öóÔ∏è Unbound SET-BLOCK! object keys?&#39;" href="1333.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/ideas-from-the-lab-unbound-set-block-object-keys/1333" />
<meta name="twitter:url" content="https://forum.rebol.info/t/ideas-from-the-lab-unbound-set-block-object-keys/1333" />
<meta property="og:title" content="Ideas from the Lab: ‚öóÔ∏è Unbound SET-BLOCK! object keys?" />
<meta name="twitter:title" content="Ideas from the Lab: ‚öóÔ∏è Unbound SET-BLOCK! object keys?" />
<meta property="og:description" content="The new-age TUPLE! and PATH! won&#39;t let you include types that would cause ambiguity.  For instance:  &gt;&gt; to path! [foo example.com] == foo/example.com  &gt;&gt; to path! [foo _ example.com] == foo//example.com  &gt;&gt; to path! [foo: _ example.com] ** Error: can&#39;t put a SET-WORD! inside of a PATH!  I&#39;m not sure exactly how many types to allow or disallow.  But suffice to say not everything will be supported.  But among important things that will be supported are plain GROUP! and plain BLOCK!, at any positio..." />
<meta name="twitter:description" content="The new-age TUPLE! and PATH! won&#39;t let you include types that would cause ambiguity.  For instance:  &gt;&gt; to path! [foo example.com] == foo/example.com  &gt;&gt; to path! [foo _ example.com] == foo//example.com  &gt;&gt; to path! [foo: _ example.com] ** Error: can&#39;t put a SET-WORD! inside of a PATH!  I&#39;m not sure exactly how many types to allow or disallow.  But suffice to say not everything will be supported.  But among important things that will be supported are plain GROUP! and plain BLOCK!, at any positio..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ‚ù§" />
<meta property="article:published_time" content="2020-09-21T05:07:55+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1333.html">Ideas from the Lab: ‚öóÔ∏è Unbound SET-BLOCK! object keys?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/8" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/binding/49" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Binding</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1333.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-09-21T05:07:55Z'>
              <time itemprop='dateModified' datetime='2020-09-21T05:08:48Z' class='post-time'>
                September 21, 2020,  5:08am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The new-age TUPLE! and PATH! won't let you include types that would cause ambiguity.  For instance:</p>
<pre><code>&gt;&gt; to path! [foo example.com]
== foo/example.com

&gt;&gt; to path! [foo _ example.com]
== foo//example.com

&gt;&gt; to path! [foo: _ example.com]
** Error: can't put a SET-WORD! inside of a PATH!
</code></pre>
<p>I'm not sure exactly how many types to allow or disallow.  But suffice to say not everything will be supported.</p>
<p>But among important things that will be supported are plain GROUP! and plain BLOCK!, at any position, including the head <em>(...which R3-Alpha and Red don't support in scanning or the evaluator, though you can build any path you like with any values...despite the enormous downsides).</em></p>
<p>We know pretty well what a GROUP! in a PATH! does.  But what should a BLOCK! in a path do?</p>
<p>Today it acts the same as if it had been in a group:</p>
<pre><code>m: make map! [[a b c] (1 2 3)]

&gt;&gt; key: [a b c]
== [a b c]

&gt;&gt; m/(key)
== (1 2 3)

&gt;&gt; m/[a b c]
== (1 2 3)

&gt;&gt; m/([a b c])
== (1 2 3)
</code></pre>
<p>That looks reasonable, although it seems not to buy all that much on the surface.</p>
<p>But looking closer at it, I noticed this makes maps a very tempting way to get names of things with spaces in them:</p>
<pre><code>&gt;&gt; m: make map! compose [
    [a cool name] "some value"
    [&lt;crazy&gt; #name] (func [x] [print [x + 1]])
]

&gt;&gt; m/[a cool name]
== "some value"

&gt;&gt; m/[&lt;crazy&gt; #name] 10
11
</code></pre>
<p>And we're now talking about a smoother syntax with the tuples:</p>
<pre><code>&gt;&gt; m.[a cool name]
== "some value"
</code></pre>
<p>That's just kind of <em>nice</em>.  So you start to wonder...with the dawn of SET-BLOCK!, outside of efficiency, is there any real technical reason why objects couldn't allow BLOCK!s as keys...and be more competitive with JavaScript and the like?</p>
<h2>The technical issues</h2>
<p>So one reason for saying that this should only be done with BLOCK! (as opposed to TAG! keys and such) is that BLOCK! has a SET-BLOCK! form.  This means an object might say:</p>
<pre><code>obj: make object! [
    [a cool name]: "some value"
]
</code></pre>
<p>Right now SET-BLOCK! is being used for multiple return values, but it could be done with SET-GROUP!...which actually might make more sense in light of recent semantic thinking about groups...</p>
<pre><code>(x y): some-multireturn-func a b c
</code></pre>
<p>Obviously you don't want a block on its own to invoke a function or evaluate to something else.  And there would be big performance and logistics problems if these tried to participate in the binding process.</p>
<p>But what if they didn't participate in the binding process, and they were just names?  Putting things in a block could be a way of declaring data members that deliberately skip out on binding.</p>
<p>The exception would be that when MAKE OBJECT! walked over the body and saw the SET-BLOCK!, it would have to inject a binding onto it...destroying any other binding bits it had.  So you'd be talking about <code>a</code>, <code>cool</code>, and <code>name</code> all being unbound in that set block...in order to make room for the binding of the block to the object, making the set-block work.  I suppose GET-BLOCK! could work in a similar way when used in such a context, but you'd not be able to dispatch functions from it.</p>
<h2>This Once Again Calls into Question MAP! vs OBJECT!</h2>
<p>People have always been somewhat skeptical of why maps and objects are different, and what exactly the hard system requirements are that mandate OBJECT!s strictness.  I know how things work today but I think it's worth having a go-over to see if there might be a better angle.</p>
        </div>

        <meta itemprop='headline' content='Ideas from the Lab: ‚öóÔ∏è Unbound SET-BLOCK! object keys?'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1333.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-09-21T05:38:46Z'>
              <time itemprop='dateModified' datetime='2020-09-26T19:38:32Z' class='post-time'>
                September 26, 2020,  7:38pm
              </time>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="1" data-topic="1333">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>We know pretty well what a GROUP! in a PATH! does. But what should a BLOCK! in a path do?</p>
</blockquote>
</aside>
<p>I'll mention that for function calls, I was thinking it would be nice if it could name a refinement and a value.</p>
<pre><code>&gt;&gt; data: '(a b c)
&gt;&gt; append/[dup: 1 + 2] data &lt;foo&gt;
== (a b c &lt;foo&gt; &lt;foo&gt; &lt;foo&gt;)
</code></pre>
<p>Given how common this would be, it's probably better to just use a WORD! instead of a SET-WORD! and people will get the idea, not expecting DUP to be a function call or something of that sort:</p>
<pre><code>&gt;&gt; data: '(a b c)
&gt;&gt; append/[dup 1 + 2] data &lt;foo&gt;
== (a b c &lt;foo&gt; &lt;foo&gt; &lt;foo&gt;)
</code></pre>
<p>Or maybe this is a job for TUPLE?</p>
<pre><code>&gt;&gt; data: '(a b c)
&gt;&gt; append/dup.(1 + 2) data &lt;foo&gt;
== (a b c &lt;foo&gt; &lt;foo&gt; &lt;foo&gt;)
</code></pre>
<p>Just more stuff too think about (!)</p>
        </div>

        <meta itemprop='headline' content='Ideas from the Lab: ‚öóÔ∏è Unbound SET-BLOCK! object keys?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
