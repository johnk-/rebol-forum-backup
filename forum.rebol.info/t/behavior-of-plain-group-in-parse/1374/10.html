<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Behavior of Plain GROUP! in PARSE - #10 by hostilefork - Parsing - AltRebol</title>
    <meta name="description" content="Historically, a plain GROUP! in PARSE runs the conventional evaluator.  But it discards its result and doesn&amp;#39;t put it into the stream of parse instructions. 
That means you can&amp;#39;t do things like this: 
parse &amp;quot;aaa&amp;quot; [some (&amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../1374.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Behavior of Plain GROUP! in PARSE&#39;" href="../1374.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/behavior-of-plain-group-in-parse/1374/10" />
<meta name="twitter:url" content="https://forum.rebol.info/t/behavior-of-plain-group-in-parse/1374/10" />
<meta property="og:title" content="Behavior of Plain GROUP! in PARSE" />
<meta name="twitter:title" content="Behavior of Plain GROUP! in PARSE" />
<meta property="og:description" content="A post was split to a new topic: Role of @(xxx) in PARSE" />
<meta name="twitter:description" content="A post was split to a new topic: Role of @(xxx) in PARSE" />
<meta property="article:published_time" content="2021-04-13T03:11:03+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../1374.html">Behavior of Plain GROUP! in PARSE</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/15" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Domains</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/parsing/16" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Parsing</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1374.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-10-28T06:50:59Z'>
              <time itemprop='dateModified' datetime='2020-10-29T11:41:13Z' class='post-time'>
                October 29, 2020, 11:41am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Historically, a plain GROUP! in PARSE runs the conventional evaluator.  But it discards its result and doesn't put it into the stream of parse instructions.</p>
<p>That means you can't do things like this:</p>
<pre><code>parse "aaa" [some (either condition ["a"] ["b"])]
</code></pre>
<p>Because the "discarding" behavior of GROUP!s in PARSE is so pervasive, it seemed hard to challenge.  So Ren-C had adopted the GET-GROUP! as <strong>:(...)</strong> to be non-discarding form, which you could use to splice arbitrary arguments or instructions into the PARSE stream.</p>
<p>But to <a class="mention" href="https://forum.rebol.info/u/rgchris">@rgchris</a>'s taste, having the colons may be worse than rethinking the rule...to instead one in which you have to explicitly throw away the result.  So we'd presume PARSE would have an ELIDE keyword.</p>
<pre><code>parse "aaa" [some ["a" elide (print "found an A")]]
</code></pre>
<p>In a new way of working...a failure to put the ELIDE there would mean you'd be trying to splice a #[void] into the instruction stream, which we'd imagine is an error.  (You'd need a quoted void to match an actual void value).</p>
<p>The choice to elide can come from inside the group as well:</p>
<pre><code>parse "aaa" [some ["a" (elide print "found an A")]]
</code></pre>
<p>Or use something that returned NULL...since a NULL splice is ignored by the parse stream.  This is the mechanism by which branching constructs can be used to good effect:</p>
<pre><code>parse "aaa" [some ["a" (if false ["b"])]]
</code></pre>
<blockquote>
<p><em>Note: In the early days of expression barriers, I mused this kind of approach could be done with an idiom that would look like what some languages call "banana clips":</em></p>
<pre><code>parse "aaa" [some ["a" (| print "found an A" |)]]
</code></pre>
<p><em>Under that proposal you wouldn't need the barrier on both ends, but it might help.  Today's expression barriers only block evaluations and don't overwrite evaluations, though.  But it's a bit interesting, and shows the proposal is not fully "new"</em></p>
</blockquote>
<h2>A Significant Change, But... Is It More Intuitive, and Better?</h2>
<p>Using GROUP!s to splice material into parse rules...or to act as arguments to rules...is a desirable feature.</p>
<p>If you imagine people being introduced to GROUP! as not discarding, if it would just seem to make more <em>sense</em> to work with them generically.  PARSE rules would be more creative with less repetition from the get-go.</p>
<p>And with ELIDE functioning in the evaluator, they could build on that knowledge in PARSE to know they have a way to wedge value-generating code into a place where they need that value to disappear.</p>
<p>The other worldview...that GET-GROUP! is a non-discarding form of GROUP!...and plain GROUP! discards the value...doesn't have a basis in anything.</p>
<blockquote>
<p>Note: I'm thinking that @ groups will continue to have their "as-is" meaning, which is to say that if you <strong>keep @[some integer!]</strong> then you are asking to keep the actual two words <strong><code>some integer!</code></strong>, while <strong>keep [some integer!]</strong> would act as a rule that would match the input for some number of integers.  Similarly, <strong>keep @(reverse [integer! some])</strong> would keep the two words <strong>some integer!</strong> as well, while <strong>keep (reverse [integer! some])</strong> would be a request to match input.</p>
</blockquote>
<h2>Concerns To Address</h2>
<p>I'm not so much concerned about backwards compatibility, as I am about two issues:</p>
<ol>
<li>
<p><em>Is it actually, measurably, knowably better.</em></p>
</li>
<li>
<p><em>Will the machinery bend to allow emulation of the Rebol2 semantics.</em></p>
</li>
</ol>
<p>I think at first I was reluctant to think it could be better, based on thinking <em>"there's a lot of points in parse rules that trigger code, and having to put ELIDE on all of them sounds burdensome"</em>.</p>
<p>But the game has changed in some ways.  For instance, as invisibility is on the rise for you don't have to worry about injecting <strong>(-- pos)</strong> to dump a parse position variable, because the same invisibility that works inside something like CASE or ALL works here.</p>
<p>I'm interested in (2) because I kind of insist on being able to implement Redbol.  So I'd like there to be some kind of hook for this.  Ideally it would be the kind of hook that would have allowed a motivated individual to add something like the behavior of COLLECT and KEEP as it acts now to PARSE.  I'm still trying to work that out.</p>
<p><strong>I do feel like the idea deserves a shot, because when I look at it now it seems like how PARSE probably should have been done to start with.</strong>  And we want to show best practices to people trying to implement dialects--and build infrastructure to help with those best practices--which are now informed by things like NULL-ness and invisibility...</p>
        </div>

        <meta itemprop='headline' content='Behavior of Plain GROUP! in PARSE'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../../role-of-xxx-in-parse/1584.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://forum.rebol.info/t/role-of-xxx-in-parse/1584'>
                      <span itemprop='name'>Role of @(xxx) in PARSE</span>
                    </a>
                    <meta itemprop='position' content='1'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/BlackATTR.html'><span itemprop='name'>BlackATTR</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1374.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-28T22:23:46Z' class='post-time'>
                October 28, 2020, 10:23pm
              </time>
              <meta itemprop='dateModified' content='2020-10-28T22:23:46Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I hope we get some good community feedback here. I like the new functionality and I'm fine with the proposed consistent GROUP! behavior. OTOH I'm not tied to a legacy codebase to convert.</p>
        </div>

        <meta itemprop='headline' content='Behavior of Plain GROUP! in PARSE'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/iArnold.html'><span itemprop='name'>iArnold</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1374.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-29T11:38:43Z' class='post-time'>
                October 29, 2020, 11:38am
              </time>
              <meta itemprop='dateModified' content='2020-10-29T11:38:43Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Try to stick to any other programming language over a longer period of time, chances are you have to make changes in your codebase to deal with the progression. Many projects in my working history have this as a common denominator.</p>
        </div>

        <meta itemprop='headline' content='Behavior of Plain GROUP! in PARSE'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1374.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-10-29T14:33:48Z'>
              <time itemprop='dateModified' datetime='2020-10-29T15:05:08Z' class='post-time'>
                October 29, 2020,  3:05pm
              </time>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="BlackATTR" data-post="2" data-topic="1374">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/blackattr/40/204_2.png" class="avatar"> BlackATTR:</div>
<blockquote>
<p>I like the new functionality and I'm fine with the proposed consistent GROUP! behavior.</p>
</blockquote>
</aside>
<p>Trying it out in practice, <em>I do think it is conceptually more "healthy" to see the discarding case as the behavior requiring a notation</em>.  You don't generally conceive of things in parentheses being associated with discarding the result...it "groups" things.</p>
<p>Yet it does get wordy.  Let's say you start with something like:</p>
<pre><code>        parse skip executable string-header-offset [
            (mode: 'read) pos: section-header-rule
            (
                assert [sh_offset = string-section-offset]
                sh_size: sh_size + (1 + length of encap-section-name)
            )
            (mode: 'write) :pos section-header-rule
            to end
        ]
</code></pre>
<p>Becoming:</p>
<pre><code>        parse skip executable string-header-offset [
            elide (mode: 'read) pos: section-header-rule
            elide (
                assert [sh_offset = string-section-offset]
                sh_size: sh_size + (1 + length of encap-section-name)
            )
            elide (mode: 'write) :pos section-header-rule
            to end
        ]
</code></pre>
<blockquote>
<p>Sidenote for those who don't know: ASSERT is now an invisible.</p>
</blockquote>
<p>Seeing the wordiness makes me wonder if an alternative notation should be available to mean the same thing.  I don't think <strong><code>:(...)</code></strong> makes sense, because colons don't have any assocation with discarding.</p>
<p><strong><code>/(...)</code></strong> is another option:</p>
<pre><code>        parse skip executable string-header-offset [
            /(mode: 'read) pos: section-header-rule
            /(
                assert [sh_offset = string-section-offset]
                sh_size: sh_size + (1 + length of encap-section-name)
            )
            /(mode: 'write) :pos section-header-rule
            to end
        ]
</code></pre>
<p><a class="mention" href="https://forum.rebol.info/u/rgchris">@rgchris</a> would hate it.  Period is more subtle:</p>
<pre><code>        parse skip executable string-header-offset [
            .(mode: 'read) pos: section-header-rule
            .(
                assert [sh_offset = string-section-offset]
                sh_size: sh_size + (1 + length of encap-section-name)
            )
            .(mode: 'write) :pos section-header-rule
            to end
        ]
</code></pre>
<p>But I'm looking at reserving <strong>.even?</strong> and such for predicates in parse, which is important:</p>
<pre><code> parse [1 2] [some .even?]
</code></pre>
<p>We could go for the doubling-up of GROUP! to force a discard:</p>
<pre><code>        parse skip executable string-header-offset [
            ((mode: 'read)) pos: section-header-rule
            ((
                assert [sh_offset = string-section-offset]
                sh_size: sh_size + (1 + length of encap-section-name)
            ))
            ((mode: 'write)) :pos section-header-rule
            to end
        ]
</code></pre>
<p>It has the quality that you can tell on both ends that the discard is happening.  It doesn't line up very well with the splice-meaning for the same notation in COMPOSE.</p>
<hr>
<p><strong>All that said, I don't think the <code>:(...)</code> for PARSE splicing is that terrible.</strong>  It does seem the rarer operation, it feels learnable, it doesn't require breaking compatibility with history.  I'd also considered that it might be done with <strong>((...))</strong> which could be seen as asking to "splice" the parse rule in...and maybe it stands out better and looks prettier and more symmetrical.</p>
        </div>

        <meta itemprop='headline' content='Behavior of Plain GROUP! in PARSE'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/BlackATTR.html'><span itemprop='name'>BlackATTR</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1374.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-29T16:05:20Z' class='post-time'>
                October 29, 2020,  4:05pm
              </time>
              <meta itemprop='dateModified' content='2020-10-29T16:05:20Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I'm all for consistency. But GET-WORD!s are commonly used to set/inject a new position into PARSE, so it doesn't seem much of a cognitive stretch to use GET-GROUP to splice results in. I don't know what the chances are for getting a notation or shorthand for ELIDE... I don't care much for the forward slash and I'd rather be able to use something like a tilde or something that provides a decent visual cue.</p>
        </div>

        <meta itemprop='headline' content='Behavior of Plain GROUP! in PARSE'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/IngoHohmann.html'><span itemprop='name'>IngoHohmann</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1374.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-29T18:59:47Z' class='post-time'>
                October 29, 2020,  6:59pm
              </time>
              <meta itemprop='dateModified' content='2020-10-29T18:59:47Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I had to think this over, because I wasn't sure wether my reluctance was just because of change.</p>
<p>In my experience adjusting rules is an important usage of groups in parse, but not the most frequent usage.</p>
<p>Furthermore the number of elides just doesn't look good.</p>
<p>So I would vote to keep plain groups as vanishing and get-groups as splicing. Double groups could be used as well, but I think that might be harder when you are constructing rules programmatically.</p>
        </div>

        <meta itemprop='headline' content='Behavior of Plain GROUP! in PARSE'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1374.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-10-29T19:07:31Z'>
              <time itemprop='dateModified' datetime='2020-10-29T19:11:20Z' class='post-time'>
                October 29, 2020,  7:11pm
              </time>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="IngoHohmann" data-post="6" data-topic="1374">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/ingohohmann/40/195_2.png" class="avatar"> IngoHohmann:</div>
<blockquote>
<p>So I would vote to keep plain groups as vanishing and get-groups as splicing.</p>
</blockquote>
</aside>
<p>One thing that I have believed all along is that groups needed to act consistently.  e.g. if a rule was going to see the result of an expression, it couldn't be in a plain group...because plain groups were discarded.</p>
<p><a class="mention" href="https://forum.rebol.info/u/rgchris">@rgchris</a> was less concerned about this, and didn't see a problem with the likes of:</p>
<pre><code>parse "aa" [some (first ["a" "b"]) (x: "c")]
</code></pre>
<p>...with the feeling that you should know how many arguments rules take, and so if a group is in a position that a rule expects an argument, then the value is seen.</p>
<p>That didn't feel right to me...PARSE rules are hard enough to read as it is.  So at the very least I preferred to see:</p>
<pre><code>parse "aa" [some :(first ["a" "b"]) (x: "c")]
</code></pre>
<p>This cues you to realize when an evaluation result is being actually used.</p>
<p>However...this pre-dated the idea of rule-splicing.  So when I suggested it, I was only meaning that <strong><code>:(...)</code></strong> would be "passing an argument to a rule", and it would be an error otherwise.</p>
<p>But if we're talking about it <em>always</em> splicing content, then things start to get murkier again...making me wonder if :(...) should be for slipping arguments to rules but an error in other places, ((...)) should be for splicing rules but an error in arguments, (...) should be discarding and an error in arguments too.</p>
<p>I do feel that the :(...) with the colon is a bit slight and easy to miss for something that is fundamentally putting code into the parse stream...so my mind does go back to ((...)) which was the first implementation.</p>
        </div>

        <meta itemprop='headline' content='Behavior of Plain GROUP! in PARSE'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/rgchris'><span itemprop='name'>rgchris</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1374.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-11-12T06:15:49Z' class='post-time'>
                November 12, 2020,  6:15am
              </time>
              <meta itemprop='dateModified' content='2020-11-12T06:15:49Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>This example doesn't quite sit right:</p>
<aside class="quote no-group" data-username="hostilefork" data-post="7" data-topic="1374">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<pre><code class="lang-auto">parse "aa" [some (first ["a" "b"]) (x: "c")]
</code></pre>
</blockquote>
</aside>
<p>If a group's product is to be used as a rule, it should be explicit, say:</p>
<pre><code class="lang-auto">parse "aa" [some use (first ["a" "b"]) (x: "c")]
</code></pre>
<p>This could be a GET-GROUP! where this type is available, I suppose (I'm not wholly convinced of GET-GROUP!'s necessity), though my leaning would be to solve through words.</p>
        </div>

        <meta itemprop='headline' content='Behavior of Plain GROUP! in PARSE'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1374.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-11-12T06:31:40Z' class='post-time'>
                November 12, 2020,  6:31am
              </time>
              <meta itemprop='dateModified' content='2020-11-12T06:31:40Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="rgchris" data-post="8" data-topic="1374">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/rgchris/40/14_2.png" class="avatar"> rgchris:</div>
<blockquote>
<p>If a group's product is to be used as a rule, it should be explicit</p>
</blockquote>
</aside>
<p>Okay, well that would make it <em>sound</em> like we are in agreement.</p>
<p>My historical stance was that all plain GROUP!s should discard.  Hence plain groups in positions as arguments to rules should raise errors.</p>
<p>If the result of a GROUP! is to be "used" then that would require some form of decoration.</p>
<p>Right now I kind of feel like the light-and-easy-to-miss GET-GROUP! is a fit for arguments to rules, while a doubled-up group might be better when splicing a new rule when it isn't an argument.  But I don't know.</p>
<hr>
<p>For a construct like KEEP we have the distinction of whether you want to keep via matching a rule, or whether you just want to add some raw material that isn't in the input series.</p>
<p>My current plan is that <strong><code>@value</code></strong> means to match a value literally (e.g. if VALUE is a block then it doesn't use it as a rule the way plain <strong>value</strong> does).  But then <code>@value</code> is a rule, so <code>keep @value</code> should honor the idea of saying you're keeping if it matches that exact value.  Hence that eliminates the idea of saying that <code>keep @([&lt;some&gt; &lt;stuff&gt;])</code> would literally keep that data without matching.</p>
<p>GET-BLOCK! would be a possibility for that, though it would perhaps be weird to be running DO code inside PARSE in a BLOCK, vs. a group.  <strong><code>keep :[reverse [&lt;stuff&gt; &lt;some&gt;]]</code></strong></p>
<hr>
<p>Anyway, no shortage of things to think about.  Hope you're finding some free time to come help think about it.  Lots of interesting stuff afoot, which I think is validating the design path taken.</p>
        </div>

        <meta itemprop='headline' content='Behavior of Plain GROUP! in PARSE'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../../role-of-xxx-in-parse/1584.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://forum.rebol.info/t/role-of-xxx-in-parse/1584'>
                      <span itemprop='name'>Role of @(xxx) in PARSE</span>
                    </a>
                    <meta itemprop='position' content='1'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
              split this topic 
          </span>

          <link itemprop="mainEntityOfPage" href="../1374.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-04-13T03:11:03Z'>
              <time itemprop='dateModified' datetime='2021-04-13T03:11:03Z' class='post-time'>
                April 13, 2021,  3:11am
              </time>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>A post was split to a new topic: <a href="../../role-of-xxx-in-parse/1584.html">Role of @(xxx) in PARSE</a></p>
        </div>

        <meta itemprop='headline' content='Behavior of Plain GROUP! in PARSE'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1374.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-04-13T02:42:26Z'>
              <time itemprop='dateModified' datetime='2021-04-13T20:54:32Z' class='post-time'>
                April 13, 2021,  8:54pm
              </time>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="rgchris" data-post="8" data-topic="1374">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/rgchris/40/14_2.png" class="avatar"> rgchris:</div>
<blockquote>
<p>If a group's product is to be used as a rule, it should be explicit,</p>
</blockquote>
</aside>
<p>What @(...) had begun to act like in in UPARSE was not "use this DO evaluation as a rule", but "evaluate to this value".  <strong>And rules--even BLOCK! rules--are allowed to both match and evaluate to an independent "last-evaluated" value, like BLOCK!s in DO--that is something I'm pretty sure is a good idea.</strong></p>
<p>But it's starting to seem to me like there's probably not a good reason to make this not the behavior of the default GROUP!.</p>
<p>Consider for instance the code I submitted for review from rebol-server: <strong><a href="https://github.com/metaeducation/rebol-server/pull/10/commits/d0f14f1876e2ee20b57a25bf7e300234d999b073">The @(...) are ugly.  It reads better as (...)</a></strong></p>
<p>This also makes it seem like <strong>keep <span class="mention">@x</span></strong> isn't a win over <strong>keep (x)</strong>.</p>
<p>I think this indicates a good compromise with what you have been asking for, <a class="mention" href="https://forum.rebol.info/u/rgchris">@rgchris</a> <em>(or re-read it as "you were right all along?" <img src="../../../images/emoji/twitter/slight_smile.png%3Fv=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"> )</em></p>
<p>So this brings <code>@word</code>, <code>@(gr o up)</code>, and <code>@pa/th</code> (and <code>@tu.ple</code>) handling back to what I had originally spec'd...the literal match:</p>
<pre><code>&gt;&gt; x: [some rule]

&gt;&gt; data: [[some rule] [some rule]]

&gt;&gt; did uparse data [some @x]
== #[true]
</code></pre>
<p>So this would work with code that generates the thing you're exactly matching, too:</p>
<pre><code>&gt;&gt; x: [some rule]

&gt;&gt; data: [[some rule] [some rule]]

&gt;&gt; did uparse data [some @(reverse copy [rule some])]
== #[true]
</code></pre>
<p>OTOH, plain GROUP!s are value-bearing rules, that never advance the input and always succeed.</p>
<p><strong>This does mean that ELIDE would need to be used with GROUP! in places where you don't want to mess up a BLOCK! rule's evaluative result.</strong>  But that's nothing people wouldn't be used to with dealing in BLOCK!s in DO.  It makes <em>sense</em> this way.</p>
<p>Raising the amount of parity between DO and PARSE semantics seems like a real win.</p>
<aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="1374">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>I'm interested in (2) because I kind of insist on being able to implement Redbol. So I'd like there to be some kind of hook for this. Ideally it would be the kind of hook that would have allowed a motivated individual to add something like the behavior of COLLECT and KEEP as it acts now to PARSE. I'm still trying to work that out.</p>
</blockquote>
</aside>
<p>Just a note for anyone who doesn't know...that UPARSE is coming along quite well with this.  The Redbol emulation has all the old keywords and patterns, invoke it with UPARSE2 and it changes the behavior for SET-WORD! to capture parse positions, GET-WORD! to seek, etc.</p>
<p><em>(Note: Being able to experiment so rapidly with ideas in UPARSE is fantastic, and it was truly an overdue thing to have written.)</em></p>
        </div>

        <meta itemprop='headline' content='Behavior of Plain GROUP! in PARSE'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
