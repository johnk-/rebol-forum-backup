<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>ACROSS vs. COPY and UPARSE Synthetic Ambiguity - Naming - AltRebol</title>
    <meta name="description" content="A successfully matching UPARSE combinator produces two return values.  One is the &amp;quot;synthesized product&amp;quot; of the rule.  The other is an indication of how far the rule advanced. 
I was a bit unsettled by things like this: 
&amp;gt;&amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1595.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;ACROSS vs. COPY and UPARSE Synthetic Ambiguity&#39;" href="1595.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/across-vs-copy-and-uparse-synthetic-ambiguity/1595" />
<meta name="twitter:url" content="https://forum.rebol.info/t/across-vs-copy-and-uparse-synthetic-ambiguity/1595" />
<meta property="og:title" content="ACROSS vs. COPY and UPARSE Synthetic Ambiguity" />
<meta name="twitter:title" content="ACROSS vs. COPY and UPARSE Synthetic Ambiguity" />
<meta property="og:description" content="A successfully matching UPARSE combinator produces two return values.  One is the &quot;synthesized product&quot; of the rule.  The other is an indication of how far the rule advanced.  I was a bit unsettled by things like this:  &gt;&gt; did uparse &quot;abcde&quot; [&quot;a&quot; test: copy (first [&quot;Fhqwhgads&quot;]) thru &quot;e&quot;] == #[true]  &gt;&gt; test == &quot;&quot;  Because COPY does not copy the synthesized result.  It takes the span of the matched rule and copies across that span.  GROUP!s don&#39;t move the parse position at all.  So if you COPY a..." />
<meta name="twitter:description" content="A successfully matching UPARSE combinator produces two return values.  One is the &quot;synthesized product&quot; of the rule.  The other is an indication of how far the rule advanced.  I was a bit unsettled by things like this:  &gt;&gt; did uparse &quot;abcde&quot; [&quot;a&quot; test: copy (first [&quot;Fhqwhgads&quot;]) thru &quot;e&quot;] == #[true]  &gt;&gt; test == &quot;&quot;  Because COPY does not copy the synthesized result.  It takes the span of the matched rule and copies across that span.  GROUP!s don&#39;t move the parse position at all.  So if you COPY a..." />
<meta property="article:published_time" content="2021-05-04T00:52:54+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1595.html">ACROSS vs. COPY and UPARSE Synthetic Ambiguity</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/8" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/naming/32" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Naming</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1595.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-05-04T00:52:54Z'>
              <time itemprop='dateModified' datetime='2021-05-04T01:13:08Z' class='post-time'>
                May 4, 2021,  1:13am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>A successfully matching UPARSE combinator produces two return values.  One is the "synthesized product" of the rule.  The other is an indication of how far the rule advanced.</p>
<p>I was a bit unsettled by things like this:</p>
<pre><code>&gt;&gt; did uparse "abcde" ["a" test: copy (first ["Fhqwhgads"]) thru "e"]
== #[true]

&gt;&gt; test
== ""
</code></pre>
<p>Because COPY does not copy the synthesized result.  It takes the span of the matched rule and copies across that span.  GROUP!s don't move the parse position at all.  So if you COPY a GROUP! you'll always get "".</p>
<p>Compare that with putting the copy inside the GROUP! so it runs as DO code:</p>
<pre><code>&gt;&gt; did uparse "abcde" ["a" test: (copy first ["Fhqwhgads"]) thru "e"]
== #[true]

&gt;&gt; test
== "Fhqwhgads"
</code></pre>
<p>This made me skeptical of the word COPY and wanting to find a word that jumped off the page a bit distinctly from PARSE.  I thought of ACROSS.</p>
<h2>But... Aren't All The PARSE Words Different?</h2>
<p>You might ask if there's any point to fretting over this, when you know that basically every combinator other than SET-WORD! and KEEP doesn't care about synthesized products.  They operate on the rules.</p>
<p>Consider what this does:</p>
<pre><code>&gt;&gt; uparse "aaa" [not (false), some "a"]
; null
</code></pre>
<p>You didn't get NOT and FALSE interacting there to make a truthy result that kept the parse going.  Instead, GROUP! rules always succeed...and NOT was testing to see if the rule didn't succeed.  Since it did, the parse failed.</p>
<p><strong>This makes it seem like some combinators should indicate they can't be used in rule-span-checked slots.</strong>  Maybe <strong>x: copy ("a")</strong> should be illegal due to some property GROUP! combinators have that make them not want to mix with COPY.</p>
<p>But what about this?</p>
<pre><code> &gt;&gt; uparse "ababccc" [x: copy y: collect [some [keep "a" keep "b"]] some "c"]
 == "c"

 &gt;&gt; x
 == "abab"

 &gt;&gt; y
 == ["a" "b" "a" b"]
</code></pre>
<p>Would it be better if COLLECT (or the Y SET-WORD! combinator) prevented you from capturing across the span of it, just because it synthesized a product?  Is it messing with generality to disable the GROUP!s being spanned going to come back and bite us later?</p>
<p>Maybe this shows why I was uneasy about COPY.  I dunno.  But I'm not feeling thrilled with ACROSS.</p>
<p>Food for thought.</p>
        </div>

        <meta itemprop='headline' content='ACROSS vs. COPY and UPARSE Synthetic Ambiguity'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
