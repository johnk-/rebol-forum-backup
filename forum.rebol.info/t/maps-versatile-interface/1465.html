<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Maps: Versatile Interface - Datatypes - AltRebol</title>
    <meta name="description" content="In another episode of &amp;#39;Where should you use maps vs. ...?&amp;#39;, was reflecting on this post: 

I don&amp;#39;t know if maps are the most suitable choice here, but they would certainly be the least awkward expression of such options &amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1465.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Maps: Versatile Interface&#39;" href="1465.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/maps-versatile-interface/1465" />
<meta name="twitter:url" content="https://forum.rebol.info/t/maps-versatile-interface/1465" />
<meta property="og:title" content="Maps: Versatile Interface" />
<meta name="twitter:title" content="Maps: Versatile Interface" />
<meta property="og:description" content="In another episode of &#39;Where should you use maps vs. ...?&#39;, was reflecting on this post:   I don&#39;t know if maps are the most suitable choice here, but they would certainly be the least awkward expression of such options were they a little more versatile:  load/options %some-resource.reb #(     tabs: no     CRLF: yes )  I&#39;m not a fan of Red&#39;s specific literal notation for this, but running with it for the purposes of this thought. If a function were to receive such a map, could you REDUCE or COMP..." />
<meta name="twitter:description" content="In another episode of &#39;Where should you use maps vs. ...?&#39;, was reflecting on this post:   I don&#39;t know if maps are the most suitable choice here, but they would certainly be the least awkward expression of such options were they a little more versatile:  load/options %some-resource.reb #(     tabs: no     CRLF: yes )  I&#39;m not a fan of Red&#39;s specific literal notation for this, but running with it for the purposes of this thought. If a function were to receive such a map, could you REDUCE or COMP..." />
<meta property="article:published_time" content="2021-01-11T18:02:59+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1465.html">Maps: Versatile Interface</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/8" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/development/datatypes.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Datatypes</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/rgchris'><span itemprop='name'>rgchris</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1465.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-01-11T18:02:59Z'>
              <time itemprop='dateModified' datetime='2021-01-11T18:33:12Z' class='post-time'>
                January 11, 2021,  6:33pm
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>In another episode of 'Where should you use maps vs. ...?', was reflecting on <a href="../mold-and-load-parity/1429/4.html">this post</a>:</p>
<aside class="quote no-group" data-username="hostilefork" data-post="4" data-topic="1429">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"><a href="../mold-and-load-parity/1429/4.html">MOLD and LOAD parity</a>
</div>
<blockquote>
<p>But even if /ALL goes away, there's always going to be parameterization settings to the underlying "codec" that powers generic loading. Does the code-loading "codec" have options? I think it should...policies like allowing or disallowing CR/LF or tabs, etc.</p>
</blockquote>
</aside>
<p>I don't know if maps are the most suitable choice here, but they would certainly be the least awkward expression of such options were they a little more versatile:</p>
<pre><code class="lang-nohighlight">load/options %some-resource.reb #(
    tabs: no
    CRLF: yes
)
</code></pre>
<p>I'm not a fan of Red's specific literal notation for this, but running with it for the purposes of this thought. If a function were to receive such a map, could you REDUCE or COMPOSE it so as not to have to qualify each word?</p>
<pre><code class="lang-nohighlight">reduce options 123
=&gt; #(
    tabs: #[false]
    CRLF: #[true]
)
</code></pre>
<p>Would a literal map be bound to its containing context?</p>
<pre><code class="lang-nohighlight">reduce use [bar][
    bar: "Bar"

    #(foo: bar)
]
=&gt; #(foo: "Bar")
</code></pre>
<p>Red does not support this, but seems a reasonable expectation to me.</p>
<p>Permitting REDUCE which would presumably only reduce values and not keys and most likely creating a copy would have a distinct advantage over the awkward composition of objects in the cases where they have been used in these cases:</p>
<pre><code class="lang-nohighlight">do-this-way: func [
    content
    /option1
    /option2
][
    do-this/options content reduce #(
        option1: option1
        option2: option2
    )
]
</code></pre>
        </div>

        <meta itemprop='headline' content='Maps: Versatile Interface'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../simple-objects-vs-what-the-people-want/1745/5.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://forum.rebol.info/t/simple-objects-vs-what-the-people-want/1745/5'>
                      <span itemprop='name'>Simple Objects vs. What The People Want</span>
                    </a>
                    <meta itemprop='position' content='2'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1465.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-01-11T18:33:56Z'>
              <time itemprop='dateModified' datetime='2021-01-11T18:34:46Z' class='post-time'>
                January 11, 2021,  6:34pm
              </time>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <pre><code>load/options %some-resource.reb #(
    tabs: no
    cr-lf: yes
)
</code></pre>
<blockquote>
<p>I'm not a fan of Red's specific literal notation for this</p>
</blockquote>
<p>I'm still skeptical on whether investing and spreading the MAP! concept in the core plays to the language strengths at all.  It's like we're just going for JSON, but worse.</p>
<p>Besides BLOCK!s looking better, they afford you more options in representation:</p>
<pre><code>[
   numbers: 1 2 3
   thing: (*) specially-marked
   [1]: "maybe SET-BLOCKS are the gateway to having generic keys?"
]
</code></pre>
<p>Cracking open the toolset of what it would take to give you "powers" for such blocks would help in dialecting.  So focusing here has benefit across the board.</p>
<p>If it's performance people are concerned about, we can make the system speed up lookups when it notices access patterns it thinks it can speed up (e.g. a behind-the-scenes-HASH!)...and you could give it hints.  But it would all still be the currency of BLOCK!.</p>
        </div>

        <meta itemprop='headline' content='Maps: Versatile Interface'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/rgchris'><span itemprop='name'>rgchris</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1465.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-01-11T18:41:49Z'>
              <time itemprop='dateModified' datetime='2021-01-11T18:42:07Z' class='post-time'>
                January 11, 2021,  6:42pm
              </time>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I appreciate the versatility and possibility in your suggestion and trying to gain leverage from the language. However there is the inherent complexity in this even if you bring it to a core level. If all you're looking for is a list of yes/no/this-here/that-there, then maps and the handling thereof seemingly offer an immediate path with some potential perks</p>
        </div>

        <meta itemprop='headline' content='Maps: Versatile Interface'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1465.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-02-10T09:01:15Z' class='post-time'>
                February 10, 2021,  9:01am
              </time>
              <meta itemprop='dateModified' content='2021-02-10T09:01:15Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="rgchris" data-post="1" data-topic="1465">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/rgchris/40/14_2.png" class="avatar"> rgchris:</div>
<blockquote>
<p>I'm not a fan of Red's specific literal notation for this</p>
</blockquote>
</aside>
<p>Over time I just keep getting more convinced that it is a mistake to try to introduce non-BLOCK! source notations for internally complex data structures.</p>
<p>A guy I know wrote a book called <a href="https://joelgrus.github.io/thinking-spreadsheet/"><strong>"Thinking Spreadsheet"</strong></a> <sub><a href="https://joelgrus.github.io/thinking-spreadsheet/ts.html#acknowledgements">(that I offered early feedback on)</a></sub>, where he tries to motivate techniques of working with spreadsheets that embrace the medium.  He talks about how people use spreadsheets as databases:</p>
<blockquote>
<p><em>"On a small scale, you can use spreadsheets as databases. Many people do, and several of our examples will. This is especially convenient when your data fits neatly into a small table and when you intend to interact with your data only through the spreadsheet itself. If your state has issued only 100 license plates, then a spreadsheet might be a good way to store that information."</em></p>
</blockquote>
<p>Rebol notation is like the spreadsheet; it is supposed to be light and easy.  Yet the idea of turning such a medium--a <em>textual</em> one--into something that is a generalized store for maps and objects and runtime representations of functions...and a whole menagerie of as-yet-untold user-defined-types...just doesn't hold water.</p>
<p>So the attempt in Rebol to turn all datatypes into renderable forms that might be LOAD-ed back...as part of a serialization...is I think a dead-end.  The BLOCK! format makes sense as something that's a little bit better than TEXT! for serializing... but it's only a <em>little</em> bit.</p>
<p>I pointed out <a href="../action-mold-shows-cached-name-if-available/1460.html">how I'd moved away from this with actions</a>, and cited this counter-example carried forward from Red:</p>
<pre><code>red&gt;&gt; append [1 2] :help-string
== [1 2 func [{Returns information about functions, values, objects, and datatypes.} 
    'word [any-type!] 
    /local ref-given? value
][
    clear output-buffer 
    case [
 ...
</code></pre>
<p>To me, MAP! is another one of these instances where the strengths of the substrate are being undermined by trying to make it part of the source notation.</p>
<p>I think putting things in a MAP! (or OBJECT! for that matter) should box it up to where you can query it and get BLOCK!s back for serializing them...but you don't expect to mold them and paste them back.</p>
        </div>

        <meta itemprop='headline' content='Maps: Versatile Interface'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/rgchris'><span itemprop='name'>rgchris</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1465.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-02-10T16:44:43Z'>
              <time itemprop='dateModified' datetime='2021-02-10T17:05:16Z' class='post-time'>
                February 10, 2021,  5:05pm
              </time>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Practically speaking, having observed this particular discussion for as much or as long as there's been any volume of Rebol development, there has been near since the outset a desire for a separate block type that conforms to the key/value pattern in ways that blocks cannot without a significant amount of care, corraling and pretense. There's just no amount of functions, modified path behaviour that can scratch that itch, even if it's wrongheaded. That JSON stepped in and became wildly popular with a tiny subset of types—but crucially this one that Rebol does not, with stringed keys no less—just heightened the sense that this is a glaring omission.</p>
<p>It comes down to representation—yes, you can represent the key/value pattern in blocks, though just because you have values arranged in a key/value order, it can't be assumed. Yes, the key/value pattern can be abused and part of Rebol's strength in types is that you can leverage a certain amount of <a href="http://www.rebol.com/article/0108.html">implied semantics</a>, but that only gets you so far. I believe analyzing the way JSON is deployed—the good and the bad, it's still the broadest demonstration of the Rebol concept—can be illustrative on where maps work and don't with the exchange (data, data-is-code and code-is-data) medium.</p>
<aside class="quote no-group" data-username="hostilefork" data-post="4" data-topic="1465">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>store for maps and objects and runtime representations of functions</p>
</blockquote>
</aside>
<p>Could add ports and other items to that. I'd say MAP stands apart—it doesn't have any more or less context than a block and the implementation is a means to fit the format than some special internal type looking for representation. Actually, I'd say the same about functions to a degree—you could view a function as a block (behaves more group-like) with additional params metadata</p>
<p>Differences lie here, I guess:</p>
<pre><code class="lang-nohighlight">&gt;&gt; blk: reduce ['group quote (pi) 'func func [][pi]]      
== [group (pi) func make action! [[return:] [...]]]

&gt;&gt; blk/group
== (pi)

&gt;&gt; blk/func  
== 3.141592653589793
</code></pre>
        </div>

        <meta itemprop='headline' content='Maps: Versatile Interface'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
