<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Death to BAR! (Long Live Expression Barriers!) - Datatypes - AltRebol</title>
    <meta name="description" content="Rebol expressions have a habit of getting hard to read when you put them all on a line: 
if all [integer? x even? x x &amp;gt; 10] [print &amp;quot;confusing!&amp;quot;]

You could put the expressions in GROUP!s: 
if all [(integer? x) (even? x) &amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1037.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Death to BAR! (Long Live Expression Barriers!)&#39;" href="1037.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/death-to-bar-long-live-expression-barriers/1037" />
<meta name="twitter:url" content="https://forum.rebol.info/t/death-to-bar-long-live-expression-barriers/1037" />
<meta property="og:title" content="Death to BAR! (Long Live Expression Barriers!)" />
<meta name="twitter:title" content="Death to BAR! (Long Live Expression Barriers!)" />
<meta property="og:description" content="Rebol expressions have a habit of getting hard to read when you put them all on a line:  if all [integer? x even? x x &gt; 10] [print &quot;confusing!&quot;]  You could put the expressions in GROUP!s:  if all [(integer? x) (even? x) (x &gt; 10)] [print &quot;confusing!&quot;]  But that looks a bit cluttered.  And if you&#39;re going to be byte-conscious (and CPU-cycle-conscious), each GROUP! is a distinct array series, and represents a separate recursion in the evaluator.  You&#39;ve quadrupled space and CPU usage.  You&#39;ve also ..." />
<meta name="twitter:description" content="Rebol expressions have a habit of getting hard to read when you put them all on a line:  if all [integer? x even? x x &gt; 10] [print &quot;confusing!&quot;]  You could put the expressions in GROUP!s:  if all [(integer? x) (even? x) (x &gt; 10)] [print &quot;confusing!&quot;]  But that looks a bit cluttered.  And if you&#39;re going to be byte-conscious (and CPU-cycle-conscious), each GROUP! is a distinct array series, and represents a separate recursion in the evaluator.  You&#39;ve quadrupled space and CPU usage.  You&#39;ve also ..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 â¤" />
<meta property="article:published_time" content="2019-01-27T01:52:25+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1037.html">Death to BAR! (Long Live Expression Barriers!)</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/8" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/development/datatypes.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Datatypes</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1037.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2019-01-27T01:52:25Z'>
              <time itemprop='dateModified' datetime='2020-07-03T17:32:29Z' class='post-time'>
                July 3, 2020,  5:32pm
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Rebol expressions have a habit of getting hard to read when you put them all on a line:</p>
<pre><code>if all [integer? x even? x x &gt; 10] [print "confusing!"]
</code></pre>
<p>You could put the expressions in GROUP!s:</p>
<pre><code>if all [(integer? x) (even? x) (x &gt; 10)] [print "confusing!"]
</code></pre>
<p>But that looks a bit cluttered.  And if you're going to be byte-conscious (and CPU-cycle-conscious), each GROUP! is a distinct array series, and represents a separate recursion in the evaluator.  You've quadrupled space and CPU usage.  You've also squandered GROUP! for any COMPOSE operations that you might have wanted to use it for.</p>
<p>Some people (<a class="mention" href="https://forum.rebol.info/u/gchiu">@gchiu</a>, and I've seen Gregg do it) double space to get around it:</p>
<pre><code>if all [integer? x  even? x  x &gt; 10] [print "better?"]
</code></pre>
<p>That's not a terrible answer, though I think it looks like a mistake.  And there's no enforcement of if you're right about where the expression breaks are or not, you can get it completely wrong:</p>
<pre><code>if all [integer?  x even? x x  &gt; 10] [print "nonsense..."]
</code></pre>
<h2>Meet Expression Barrier</h2>
<p>Expression barrier is a <em>postponing-enfix invisible</em> action.</p>
<p>All that means is that it won't run in an argument slot, it demands your evaluation be at a "neutral" point before it runs and takes the left-hand product.  This finicky-ness is perfect for the task:</p>
<pre><code>&gt;&gt; (1 + 2 | 10 + 20)
== 30

&gt;&gt; (1 + 2 |)
== 3

&gt;&gt; (1 + | 2)
** Script Error: + is missing its value2 argument
</code></pre>
<p>For practical purposes, it looks like an END to a variadic (much like a THEN or ELSE does now, to enforce consistency between variadic and non-variadic forms).  Which gives a pleasing result:</p>
<pre><code>foo: func [x [integer! &lt;...&gt;]] [
    sum: 0
    while [not tail? x] [
        sum: sum + take x
    ]
]

&gt;&gt; (z: foo 1 2 3 | 4 5)
== 5

&gt;&gt; z
== 6
</code></pre>
<h2>BAR! is not a Special Datatype Anymore!</h2>
<p>In the early days of Ren-C, there was little hope for implementing what expression barriers wanted without a specific feature.  It was tried, e.g. an early attempt in R3-Alpha at getting an expression barrier was <strong>|: does []</strong>.   It was non-ideal, but since unsets were ignored by ANY and ALL you got at least a smidgeon of "invisibility":</p>
<pre><code>r3-alpha&gt;&gt; |: does [] 
r3-alpha&gt;&gt; all [true | true | 1020]
== 1020
r3-alpha&gt;&gt; any [false | false | 1020]
== 1020
</code></pre>
<p>Red considers #[unset] to be truthy, so this doesn't work:</p>
<pre><code>red&gt;&gt; |: does [] 
red&gt;&gt; all [true | true | 1020]
== 1020
red&gt;&gt; any [false | false | 1020]
; no result
</code></pre>
<p>The overall shape and design of Ren-C tried to embrace the concept of "null as invisible" until that really didn't work, leading to today's designs (falsey null, logically ambiguous void).  None of it has much to do with expression barriers...which have turned out to have more in common with COMMENT and THEN/ELSE than anything.</p>
<p>In any case, <strong><code>|</code></strong> comes back now as a WORD! for the best of reasons: all the magic is now in userspace features.  So mark down one fewer incompatibility point with Rebol2 and friends...and one more victory point for the Ren-C design.</p>
<p><em>(I will <em>postpone</em> my examples of cool uses for postponing enfix operators for another thread...!)</em></p>
        </div>

        <meta itemprop='headline' content='Death to BAR! (Long Live Expression Barriers!)'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
