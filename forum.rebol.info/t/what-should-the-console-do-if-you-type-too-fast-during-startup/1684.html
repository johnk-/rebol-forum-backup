<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>What Should the Console Do If You Type Too Fast During Startup? - Console - AltRebol</title>
    <meta name="description" content="So these days, stdio is an extension, it is loaded late in the boot. You can build the interpreter without stdio to use in a non-interactive library.  Or you can replace it entirely, as the Web Repl does. 
But for the mo&amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1684.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;What Should the Console Do If You Type Too Fast During Startup?&#39;" href="1684.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/what-should-the-console-do-if-you-type-too-fast-during-startup/1684" />
<meta name="twitter:url" content="https://forum.rebol.info/t/what-should-the-console-do-if-you-type-too-fast-during-startup/1684" />
<meta property="og:title" content="What Should the Console Do If You Type Too Fast During Startup?" />
<meta name="twitter:title" content="What Should the Console Do If You Type Too Fast During Startup?" />
<meta property="og:description" content="So these days, stdio is an extension, it is loaded late in the boot. You can build the interpreter without stdio to use in a non-interactive library.  Or you can replace it entirely, as the Web Repl does.  But for the moment let&#39;s talk about the standard-stdio...  One of the things it does is that if you&#39;re not redirecting input, it switches over from the so-called &quot;cooked mode&quot; of reading a line at a time to &quot;raw mode&quot;, where you can manage each keystroke. So that&#39;s why you can process cursor k..." />
<meta name="twitter:description" content="So these days, stdio is an extension, it is loaded late in the boot. You can build the interpreter without stdio to use in a non-interactive library.  Or you can replace it entirely, as the Web Repl does.  But for the moment let&#39;s talk about the standard-stdio...  One of the things it does is that if you&#39;re not redirecting input, it switches over from the so-called &quot;cooked mode&quot; of reading a line at a time to &quot;raw mode&quot;, where you can manage each keystroke. So that&#39;s why you can process cursor k..." />
<meta property="article:published_time" content="2021-08-26T02:07:22+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1684.html">What Should the Console Do If You Type Too Fast During Startup?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/15" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Domains</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/domains/console-development.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Console</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1684.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-08-26T02:07:22Z'>
              <time itemprop='dateModified' datetime='2021-08-26T02:07:55Z' class='post-time'>
                August 26, 2021,  2:07am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>So these days, stdio is an extension, it is loaded late in the boot. You can build the interpreter without stdio to use in a non-interactive library.  Or you can replace it entirely, as the Web Repl does.</p>
<p>But for the moment let's talk about the standard-stdio...</p>
<p>One of the things it does is that if you're not redirecting input, it switches over from the so-called "cooked mode" of reading a line at a time to "raw mode", where you can manage each keystroke. So that's why you can process cursor keys, or tab, or if you wanted to make it so when people typed A they saw B, etc.</p>
<p>But for the duration of the time between when the program starts and when the extension gets run, it's still in cooked mode.</p>
<p>So if you type some stuff and it hasn't quite finished loading, it will be echoed. I didn't realize this because I was running a program that didn't print a boot banner, and it just had an empty line and I started typing into it.</p>
<pre><code>$ r3 readline-test.r
aa   ; I only typed a
</code></pre>
<p>I'd type a and see it.  Then after a small delay, it would print another one so that the line said "aa".</p>
<p>Took some time for me to realize what was happening. Shouldn't have taken that long but it did, because I was focusing on the wrong thing.</p>
<h2>How To React to This?</h2>
<p>It's tempting to try and build some kind of compensation for that, where you query the input buffer at the <em>exact moment</em> the switch is flipped from cooked to raw mode.  You assume in that moment that if any input is in the buffer, it must have come during the cooked mode...and has already been printed...</p>
<p>But that's not a general solution. If your console has made it so when you type A you should get B then leaving the A there from the input buffer and saying "it was echoed already" isn't correct.</p>
<p>Not only that, you run into trouble if there's any printing before you read.  The text would be <em>above</em> the output, so it wouldn't even be seen.</p>
<p>So I think you just throw out a message so people know what's going on, and kick over to a newline:</p>
<pre><code>$ r3 readline-test.r
abc[you typed too fast!]
abc
</code></pre>
<h2>Suggestions Welcome On What to Print</h2>
<p>We can actually print the message in a different style in the smart terminal, with a weird background color or something.</p>
<ul>
<li>
<p><strong><code>[rebuffering]</code></strong>  &lt;- it was the first thing I thought of, which doesn't make it good</p>
</li>
<li>
<p><strong><code>[catching up with queued typing]</code></strong> &lt;- clear but lengthy</p>
</li>
<li>
<p><strong><code>[catching up...]</code></strong> &lt;- not as clear, shorter</p>
</li>
<li>
<p>???</p>
</li>
</ul>
        </div>

        <meta itemprop='headline' content='What Should the Console Do If You Type Too Fast During Startup?'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/IngoHohmann.html'><span itemprop='name'>IngoHohmann</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1684.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-08-26T16:56:10Z' class='post-time'>
                August 26, 2021,  4:56pm
              </time>
              <meta itemprop='dateModified' content='2021-08-26T16:56:10Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>[Keyboard now ready]</p>
<p>Just for brainstorming...</p>
        </div>

        <meta itemprop='headline' content='What Should the Console Do If You Type Too Fast During Startup?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/iArnold.html'><span itemprop='name'>iArnold</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1684.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-08-26T17:58:13Z' class='post-time'>
                August 26, 2021,  5:58pm
              </time>
              <meta itemprop='dateModified' content='2021-08-26T17:58:13Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>"Not so fast Grasshopper"</p>
<p>Ready</p>
        </div>

        <meta itemprop='headline' content='What Should the Console Do If You Type Too Fast During Startup?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
