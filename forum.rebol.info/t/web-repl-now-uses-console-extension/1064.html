<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Web REPL now uses CONSOLE extension! - Web - AltRebol</title>
    <meta name="description" content="The CONSOLE extension was first implemented by @draegtun, who managed to be one of the few pioneers in the Rebol Universe who actually documented what he did.  :slight_smile: 
I went on to take that code and get it mecha&amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1064.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Web REPL now uses CONSOLE extension!&#39;" href="1064.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/web-repl-now-uses-console-extension/1064" />
<meta name="twitter:url" content="https://forum.rebol.info/t/web-repl-now-uses-console-extension/1064" />
<meta property="og:title" content="Web REPL now uses CONSOLE extension!" />
<meta name="twitter:title" content="Web REPL now uses CONSOLE extension!" />
<meta property="og:description" content="The CONSOLE extension was first implemented by @draegtun, who managed to be one of the few pioneers in the Rebol Universe who actually documented what he did.  🙂  I went on to take that code and get it mechanically wired up in a way that split it into a &quot;console kernel&quot; which would make deliberate transitions to calling the usermode &quot;skin&quot; code--and hence be able to gracefully recover from errors, vs. infinite loop or crash out.  For example:  &gt;&gt; system/console/print-prompt: does [w..." />
<meta name="twitter:description" content="The CONSOLE extension was first implemented by @draegtun, who managed to be one of the few pioneers in the Rebol Universe who actually documented what he did.  🙂  I went on to take that code and get it mechanically wired up in a way that split it into a &quot;console kernel&quot; which would make deliberate transitions to calling the usermode &quot;skin&quot; code--and hence be able to gracefully recover from errors, vs. infinite loop or crash out.  For example:  &gt;&gt; system/console/print-prompt: does [w..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 ❤" />
<meta property="article:published_time" content="2019-02-10T13:32:09+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1064.html">Web REPL now uses CONSOLE extension!</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/15" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Domains</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/web/48" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Web</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1064.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2019-02-10T13:32:09Z'>
              <time itemprop='dateModified' datetime='2020-07-28T12:55:36Z' class='post-time'>
                July 28, 2020, 12:55pm
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The CONSOLE extension was first implemented by <a class="mention" href="https://forum.rebol.info/u/draegtun">@draegtun</a>, who managed to be one of the few pioneers in the Rebol Universe who <a href="https://github.com/r3n/reboldocs/wiki/User-and-Console" rel="nofollow noopener">actually documented what he did</a>.  <img src="../../images/emoji/twitter/slight_smile.png%3Fv=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>I went on to take that code and get it mechanically wired up in a way that split it into a "console kernel" which would make deliberate transitions to calling the usermode "skin" code--and hence be able to gracefully recover from errors, vs. infinite loop or crash out.  For example:</p>
<pre><code>&gt;&gt; system/console/print-prompt: does [write-stdout "--ok--&gt;&gt; "]
== make action! [[] [...]]

--ok--&gt;&gt; system/console/print-prompt: does [write-stdddout "--oops!--&gt; "]
** UNSAFE ERROR ENCOUNTERED IN CONSOLE SKIN
** Script Error: write-stdddout has no value
** Where: print-prompt console
** Near: [write-stdddout ~~ "--oops!--&gt; "]
** Line: 1
** REVERTING TO DEFAULT SKIN

&gt;&gt;
</code></pre>
<p><em>(Note: the current error is a bit more verbose than that because it's trying to be informative for debugging of console internals, but I'll cut it down.)</em></p>
<p>Despite running with a lot of userspace code, the console is designed so it can be phased in such a way that when you do things like a debug trace (also written in usermode) you won't wind up tracing through the console as well.  <em>(Unless you want to--but most people wouldn't, they want to trace their own code.)</em>  Because of how it's done, you also don't see a ton of implementation stacks for the console in your backtrace...the console exits its "usermode kernel" portion long enough to run skin or user requests through the libRebol API with no kernel on the stack, and then re-enters the kernel after it's done.</p>
<p>Laying the groundwork for doing this correctly is intended to make it possible to let the console be hookable for all kinds of tasks, whether that's debugging and needing to show you stack levels and bind stack frames...or anything else!  That includes a tutorial console, that checks what you typed and the result you got to see if you should go to the next step!</p>
<h2>And now... the web REPL uses it too!</h2>
<p>In quite a nifty achievement for the console, <a href="http://hostilefork.com/media/shared/replpad-js/" rel="nofollow noopener">it is now live in the web demo!</a></p>
<p>For the moment, that means you can even use the conventional multi-line-by-hitting-enter mode, instead of Shift-Enter.  Really it should kick you over into the web's multiline editor ability...but that should be easier to do as an aspect of the console extension, it's all usermode code!</p>
<p>Here's a little counting console:</p>
<pre><code>&gt;&gt; ‌count: 0
== 0

&gt;&gt; system/console/print-prompt: does [
[\ count: count + 1
[\ write-stdout unspaced [count "&gt;&gt; "]
[\ ]
== make action! [[] [...]]

1&gt;&gt; print "A counting prompt!"
A counting prompt!

2&gt;&gt; ‌
</code></pre>
<p>You can imagine being able to flip your console mode around to all kinds of things... changing the bindings, being dialected.  (The debugger will have a frame it is "focused" on and show you the focus, but then use that frame for binding of expressions--for instance.)  Timing prompts could show you how long each command took, or just hook each command prompt to make the timing so you could ask for it retroactively if you ever cared...</p>
<p>It doesn't have cancellation yet (and if it did, it probably would want to be Escape vs. Ctrl-C).  Such things are actually rather complex to do--but of course, solving it is planned for and in the works.</p>
<p>This is really neat to see, hopefully people want to pitch in and make this better.  This isn't C code, so no excuses!  <img src="../../images/emoji/twitter/slight_smile.png%3Fv=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='Web REPL now uses CONSOLE extension!'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../2018-retrospective-elevating-the-art/992.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://forum.rebol.info/t/2018-retrospective-elevating-the-art/992'>
                      <span itemprop='name'>2018 Retrospective: Elevating the Art</span>
                    </a>
                    <meta itemprop='position' content='3'>
                  </div>
            </div>
      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
