<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Whitespace Interpreter Revisited - #5 by hostilefork - Dialects/DSLs - AltRebol</title>
    <meta name="description" content="I came across what was near-to-one of my first Rebol programs (the first one using PARSE). 
It was an interpreter for a language called &amp;quot;Whitespace&amp;quot;, where all the instructions are made out of tab, space, and newline cha&amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../1482.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Whitespace Interpreter Revisited&#39;" href="../1482.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/whitespace-interpreter-revisited/1482/5" />
<meta name="twitter:url" content="https://forum.rebol.info/t/whitespace-interpreter-revisited/1482/5" />
<meta property="og:title" content="Whitespace Interpreter Revisited" />
<meta name="twitter:title" content="Whitespace Interpreter Revisited" />
<meta property="og:description" content="Well... I&#39;ve hacked it up to get it to look like the proposal.  It&#39;s raised some questions (including ones that are known and have discussions here, especially pertaining to binding).  But it&#39;s rather cool.  And now the ren-c variant runs in the ReplPad without redbol:  &gt;&gt; do https://github.com/hostilefork/whitespacers/blob/master/ren-c/whitespace.reb  I did the changes in individual commits in the git log, corresponding to the points I raised.  So you can sort of follow along, and I think it wo..." />
<meta name="twitter:description" content="Well... I&#39;ve hacked it up to get it to look like the proposal.  It&#39;s raised some questions (including ones that are known and have discussions here, especially pertaining to binding).  But it&#39;s rather cool.  And now the ren-c variant runs in the ReplPad without redbol:  &gt;&gt; do https://github.com/hostilefork/whitespacers/blob/master/ren-c/whitespace.reb  I did the changes in individual commits in the git log, corresponding to the points I raised.  So you can sort of follow along, and I think it wo..." />
<meta property="article:published_time" content="2021-01-31T21:03:23+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../1482.html">Whitespace Interpreter Revisited</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/15" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Domains</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/dialects-dsls/18" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Dialects/DSLs</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1482.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-01-30T17:09:24Z'>
              <time itemprop='dateModified' datetime='2021-01-30T22:27:09Z' class='post-time'>
                January 30, 2021, 10:27pm
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I came across what was near-to-one of my first Rebol programs (the first one using PARSE).</p>
<p>It was an interpreter for a language called "Whitespace", where all the instructions are made out of tab, space, and newline characters.  My idea was to use PARSE to actually evaluate the code:</p>
<p><a href="https://github.com/hostilefork/whitespacers/blob/master/rebol/whitespace.reb">https://github.com/hostilefork/whitespacers/blob/master/rebol/whitespace.reb</a></p>
<p>The idea of using parse as the interpreter is an interesting take...<strong>but the code is far too repetitive.</strong>  It was clearly written before I knew much about COMPOSE or really using the generative side of things.</p>
<h2>Ideas on Doing it "Right"?</h2>
<p>Currently there's a split between the specification and the implementation.  That might be desirable in some cases, but I don't think it's desirable here.</p>
<p>The instructions are grouped together, which lets them "inherit" their leading sequence.  For example, putting <strong>push [space Number]</strong> and <strong>duplicate-top [lf space]</strong> in "Stack-Manipulation" container lets them inherit the leading space common to each instruction.  Otherwise they'd have to be spelled out as <strong>[space space Number]</strong> and <strong>[space lf space]</strong>.</p>
<p>But beyond that, being inside a grouping pulls them out of "global scope", which means the instructions aren't overwriting the definitions of things like <strong>add</strong> and <strong>subtract</strong> with the whitespace versions.</p>
<h2>Reducing The Repetition</h2>
<p>The first thing I think of is merging the functions with the whitespace spec, and doing it more dialect-style:</p>
<pre><code>    ; The 2010 JavaScript-Like Way
    ...
push: [
	command: [space Number]
	description: {Push the number onto the stack}
]
duplicate-top: [
	command: [lf space]
	description: {Duplicate the top item on the stack}
]
    ...
push: func [value [integer!]] [
    insert stack value
    return none
]
duplicate-top: func [] [
    insert stack first stack
    return none
]
</code></pre>
<p>Being relatively liberal in syntax here, we can imagine doing this more like:</p>
<pre><code>; A Modern Dialected Way

push: ??? [
    {Push the number onto the stack}
    space (value &lt;number!&gt;)
][
    insert stack value
    return none
]

duplicate-top: ??? [
    {Duplicate the top item on the stack}
    lf space
][
    insert stack first stack
    return none
]
</code></pre>
<p>This is a little push in the right direction.  But we have some issues to think through.</p>
<ul>
<li>
<p>Whatever we're building here as units of the language need to be "registered" in the complete list of operations.  If they were global declarations run by the evaluator, then one of the things the <code>???</code> operator would have to do would be this registration.  If they are not global, then registration could be done by their container that is invoking them.</p>
</li>
<li>
<p>We still have to inherit the leading space that both of these instructions have.  An interesting point in the PARSE branching is that we benefit from having the knowledge that these all start with space, so that the space can lead into these tests as alternates...e.g. <strong><code>[space [lf space | space &lt;Number&gt;]]</code></strong> will be more efficient than <strong><code>[space lf space | space space &lt;Number&gt;]</code></strong>.</p>
</li>
<li>
<p>If we decide that the container is the boss, then giving a name to <code>???</code> is not really necessary.  But what happens if you leave it off?</p>
<pre><code>... Stack-Manipulation ... [
    push: [
        {Push the number onto the stack}
        space (value &lt;number!&gt;)
    ][
        insert stack value
        return none
     ]
     ...
 ]
</code></pre>
<p>This is a counterintuitive mixture of a SET-WORD! with two blocks after it. How do we reconcile the idea of "declaration-like-things" inside of a container like this?  The code needs to be in a block, the other things don't...so other notations are possible...</p>
<pre><code>... Stack-Manipulation ... [
    PUSH
    {Push the number onto the stack}
    space (value &lt;number!&gt;) [
        insert stack value
        return none
     ]
     ...
 ]
</code></pre>
</li>
</ul>
<p>I guess the easiest thing to do is to cave, and just come up with something for ???.  It has the benefit that you can actually run your implementation of Stack-Manipulation through the evaluator and do normal assignments.  So something like <strong>push: instruction [...] [...]</strong></p>
<p>Yet there's something a bit dissatisfying about having to type INSTRUCTION redundantly each time...where you're also kind of claiming that word so it can't be used other ways.</p>
<h2>Lots Of Other Questions...</h2>
<p>I think it would be worthwhile to rework this, but it's worth taking note of how adrift you can get right out of the gate looking at it.  There are lots of big questions that don't really have obvious answers.</p>
        </div>

        <meta itemprop='headline' content='Whitespace Interpreter Revisited'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../../belated-2021-post-mortem-new-years-2022-vision/1786.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://forum.rebol.info/t/belated-2021-post-mortem-new-years-2022-vision/1786'>
                      <span itemprop='name'>Belated 2021 Post-Mortem + New Years 2022 Vision 🤹</span>
                    </a>
                    <meta itemprop='position' content='2'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/razetime.html'><span itemprop='name'>razetime</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1482.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-01-31T03:18:45Z' class='post-time'>
                January 31, 2021,  3:18am
              </time>
              <meta itemprop='dateModified' content='2021-01-31T03:18:45Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Do you mind if I analyze this and golf it?</p>
        </div>

        <meta itemprop='headline' content='Whitespace Interpreter Revisited'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1482.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-01-31T08:22:58Z'>
              <time itemprop='dateModified' datetime='2021-01-31T13:12:56Z' class='post-time'>
                January 31, 2021,  1:12pm
              </time>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I certainly wouldn't mind help on revisiting this!!  And if you wanted to blog about it and build some credit for it yourself, you could basically "own" it even if was a collaborative effort.  I'd be happy to hand it off...though I do think I could provide good guidance on direction.</p>
<p>As I say, I wrote this a DECADE ago, before I really had any real experience with the language, I was definitely a newbie.  So it resulted in something quite bloated for what it is.</p>
<p>But the gimmick is that I'd learned that I could write things like:</p>
<pre><code>parse data [tab space tab | space space tab]
</code></pre>
<p>And it would look up the words to get the CHAR! values, and match that.  So then when I learned I could write:</p>
<pre><code>rule1: [tab space tab]
rule2: [space space tab]
parse data [rule1 | rule2]
</code></pre>
<p>I thought "hey, this could be a pretty literate way of breaking down the spec for whitespace, as code."  Had I been more experienced and ready to abstract it, I'd have taken the next step:</p>
<pre><code>all-rules: []
instruction: func [block] [
    append all-rules block
    append all-rules '|
]
rule1: instruction [tab space tab]
rule2: instruction [space space tab]
parse data all-rules
</code></pre>
<p>Which is more in the spirit of what you'd want, to avoid having to write out the big aggregate rule manually.</p>
<p>But what inspired the "parse as whitespace <em>interpreter</em>" was around when I'd just found out about the ability to mark and seek parse positions:</p>
<pre><code>&gt;&gt; string: "aaaabbbb"

&gt;&gt; parse string [some "a" pos: some "b"]  ; mark (seek would be :pos)
== #[true]  ; R3-Alpha returned true if the parse reached the end of input

&gt;&gt; pos
== "bbbb"
</code></pre>
<p>So I could actually use the parse position as the instruction pointer.  Whether this was a good idea or not, I thought it would be interesting to try.</p>
<p><a href="https://www.red-lang.org/2013/11/041-introducing-parse.html">Red has a pretty good overview of PARSE</a>, if you haven't seen my links to it already.  Would be good to have a handle on how that works before trying to hack on this.</p>
<h2>Making It Suck Less, Even in R3-Alpha, Seems a Good First Goal</h2>
<p>I outlined kind of a vision for what the "whitespace definition dialect" might look like.  Basically, coming up with a language variant on the fly for making whitespace.  The picture I paint is something a bit like this:</p>
<pre><code>duplicate-indexed: instruction [
    {Copy Nth item on the stack (given by the argument) to top of the stack}
    tab space [index: Number]
][
    insert stack pick stack index
    return none
]
</code></pre>
<p>So what we have here puts together:</p>
<ul>
<li>
<p>The name of the instruction.  Using a SET-WORD! for this seems sensible...but if we run it through normal assignment, we'd still like the instruction to know the name it was declared with (for display in debugging).  This name would have to be enfixedly quoted if the instruction was run through normal evaluation...or the container would need to make the connection.</p>
</li>
<li>
<p>A description of the instruction.  These were originally taken from the whitespace spec, though I think shortening them down to fit in 80 columns is a good idea.</p>
</li>
<li>
<p>The sequence of whitespace characters that represent the instruction.  I think that using the plain words <code>tab</code>, <code>space</code>, and <code>newline</code></p>
</li>
<li>
<p>Inline with the instruction sequence, a definition of whitespace-encoded parameter values and the name of that parameter.  There's Number and Label.  Here I put that in a block.  There's plenty of other ways you could think of writing it, some which might look more like how Rebol does function parameter definitions in its FUNC spec dialect:</p>
<pre><code>  [&lt;tab&gt; &lt;space&gt; index [number!]]
</code></pre>
<p>...but like I say, there's something appealing to me about the idea that the "common case" of the whitespace characters here just be words.  The free-wheeling use of words is kind of foundational in Rebol <em>(want to call something IF in a context?  Go ahead...)</em> so having the named-parameters be the odd case feels better.</p>
</li>
<li>
<p>Some code to invoke the behavior, where any parameters defined in the spec are bound (in this case <strong>index</strong>).  This code returned the new position or "none" (in R3-Alpha vernacular) to say it wasn't an instruction that changed the position.  That doesn't seem like a bad idea, but it would be nice if it composed in a "return none" by default at the end of the code you provide... so that if you didn't make the body end in a RETURN it would not change the position.</p>
</li>
</ul>
<h2>Game Plan</h2>
<p>I hope maybe you see "the vision" of how it would rapidly-bend to make a "whitespace implementation dialect".  This is what I try to get at with the "Minecraft-of-programming".  You're building a new language with the seeming ease that you would make a new function in most other systems...</p>
<p>The code needs a first pass just to make it more of a good example--instead of looking like someone's first way-too-long PARSE program.</p>
<p>While converting it to Ren-C might seem the most obvious first step... it might be better to get it working under "Redbol".  There need to be more stable test cases for that (ultimately I'd like to be able to get a high percentage of Red's tests to pass!)</p>
<p>So I thought that converting it to Red first might actually be cool.  Maybe even do some of the first pass of improvements in Red...which might be an easier entry for you, since they have a GUI console and distribute binaries (albeit 32-bit ones).</p>
<p>However... I was hit pretty immediately by the fact that <a href="https://github.com/red/red/issues/3528">Red can't use path lookup in parse rules</a>.  <img src="../../../images/emoji/twitter/roll_eyes.png%3Fv=9" title=":roll_eyes:" class="emoji" alt=":roll_eyes:"></p>
<p><em>(I could easily go off on a rant here about the fact that there's a miniscule audience for wanting to run their programs super-super-fast who do not care at all about any kind of formal rigor in the language.<br>
To the extent such people do exist, a Rebol-like language would <strong>still</strong> never be the right pick.  There's far faster and better-vetted languages...so the advantage which should be touted is <strong>expressivity</strong>.  Every time I see this kind of boneheaded response to an issue it reinforces that they just do not understand what the language is actually good for.)</em></p>
<p>So I guess biting the bullet and making you a Ren-C developer would make sense, if you're up for that.  Are you able to compile a version for your local OS of choice?</p>
<p>(My general suggestion for most development--even if one is on Windows--is to use a VirtualBox Linux to build and run.  The tooling is just better.  You can still keep the files and edit on the host, e.g. in VSCode, if you put the code in a shared folder...I guess I could make a screencast going through the steps of doing this.)</p>
<p>As for me right now, I'll see if I can avoid falling asleep, and get it running under Redbol emulation in Ren-C...</p>
<h2>UPDATE</h2>
<p>Okay, first step taken!  Patched up Redbol to be able to run it.  In the web console even. (It's slow, but what's really slow is actually the printing...)</p>
<p>You can see it work with these two commands <a href="http://hostilefork.com/media/shared/replpad-js/">on the replpad page</a>:</p>
<pre><code>&gt;&gt; redbol

&gt;&gt; do https://github.com/hostilefork/whitespacers/blob/master/rebol/whitespace.reb
</code></pre>
<p>That version can stay like that as a museum piece.  I've started a <a href="https://github.com/hostilefork/whitespacers/commit/7d6b4e8ca7770e6c64f6807f9bb6cd021cf3022f">new file to use for work in bleeding-edge Ren-C</a>. Not much needed to be changed.</p>
        </div>

        <meta itemprop='headline' content='Whitespace Interpreter Revisited'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1482.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-01-31T08:46:44Z'>
              <time itemprop='dateModified' datetime='2021-01-31T09:29:29Z' class='post-time'>
                January 31, 2021,  9:29am
              </time>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>In terms of "neat features that could maybe just fall out"... Rebol's PARSE can work on symbolic data as well as strings.  It might be cool to exploit that, in a way that could make debugging easier.</p>
<p>To elaborate: the WORD!s <strong>tab</strong>, <strong>space</strong> (sp), and <strong>lf</strong> (or, preferably when not code golfing, <strong>newline</strong>) look up to CHAR! by default.  So when you use them in PARSE they are looking for characters in a string:</p>
<pre><code> &gt;&gt; string: "^- ^/^/^-"  ; escape codes for `tab space newline newline tab`

 &gt;&gt; parse string [tab space newline newline tab]
 == #[true]  ; in R3-Alpha, true if parse succeeded. Ren-C returns input.
</code></pre>
<p>Now if you start talking about symbolic blocks, you could also have a BLOCK! of CHAR! values.  Not as compact as a string, since it costs a value-cell-per-character.</p>
<pre><code> &gt;&gt; block: [#"^-" #" " #"^/" #"^/" #"^-"]   ; 5-element block

 &gt;&gt; parse block [tab space newline newline tab]
 == #[true]
</code></pre>
<p>You could REDUCE to get that block of CHAR! values by looking up the WORD!s:</p>
<pre><code> &gt;&gt; block: reduce [tab space newline newline tab]
 == [#"^-" #" " #"^/" #"^/" #"^-"]
</code></pre>
<p>And you can merge the characters in that block into a string if you want.  This is what %whitespace.reb was doing.</p>
<p><strong>But you could also match WORD!s in blocks.</strong></p>
<pre><code> &gt;&gt; block: [tab space newline newline tab]

 &gt;&gt; parse block ['tab 'space 'newline 'newline 'tab]
 == #[true]

 &gt;&gt; parse block ['tab 'space 2 'newline 'tab]
 == #[true]
</code></pre>
<p>So what I'm thinking might be interesting would be if a debug mode of %whitespace.reb were to use blocks instead of strings.  To give an idea of what I'm talking about:</p>
<pre><code> either debug [
     tab: 'tab
     space: 'space
     newline: 'newline
 ][
     tab: #"^-"
     space: #" "
     newline: #"^/"
 ]
</code></pre>
<p>So now a rule like <strong>[tab space newline newline tab]</strong> could take on either meaning depending on the mode.</p>
<p>This isn't a terribly profound thought, but maybe inspires some creative thinking.  I've seen some parser combinators that don't have the duality of being able to work on symbols and strings, even in something like Clojure.  So just wanted to interject that Rebol parse rules have that duality, and maybe it'd be interesting in this problem.</p>
<p>(I also think it would be ideal to have it use what it knows to auto-generate help, cheaply!)</p>
<hr>
<p>Making the system have legible debug output nearly "for free" is a good goal.  It's already making a step in that direction... just for reference, here's what the R3-Alpha output of the program is.  Though I changed the completely invisible PRINT to PRINT MOLD...which still doesn't help you with seeing whitespace at end of line (which is why I'm suggesting doing the transformation to a block when debugging is requested):</p>
<pre><code>WHITESPACE INTERPRETER FOR PROGRAM:
---
{   ^-

   ^-    ^-^-
 
 ^-
 ^-   ^- ^- 
^-
     ^-
^-    
    ^- ^-^-
^-  ^-
^-  ^-   ^- ^-

 
 ^-    ^-^-

   ^-   ^- ^-
 




}
---
LABEL SCAN PHASE
( [mark-location 67] )
( [mark-location 69] )
make map! [
    67 17
    69 96
]
---
( [push 1] )
( [duplicate-top] )
( [output-number-on-stack] )
1
( [push 10] )
( [output-character-on-stack] )


( [push 1] )
( [do-arithmetic 'add] )
( [duplicate-top] )
( [push 11] )
( [do-arithmetic 'subtract] )
( [jump-if-zero] )
( [jump-to-label] )
( [duplicate-top] )
( [output-number-on-stack] )
2
( [push 10] )
( [output-character-on-stack] )


( [push 1] )
( [do-arithmetic 'add] )
( [duplicate-top] )
( [push 11] )
( [do-arithmetic 'subtract] )
( [jump-if-zero] )
( [jump-to-label] )
( [duplicate-top] )
( [output-number-on-stack] )
3
( [push 10] )
( [output-character-on-stack] )


( [push 1] )
( [do-arithmetic 'add] )
( [duplicate-top] )
( [push 11] )
( [do-arithmetic 'subtract] )
( [jump-if-zero] )
( [jump-to-label] )
( [duplicate-top] )
( [output-number-on-stack] )
4
( [push 10] )
( [output-character-on-stack] )


( [push 1] )
( [do-arithmetic 'add] )
( [duplicate-top] )
( [push 11] )
( [do-arithmetic 'subtract] )
( [jump-if-zero] )
( [jump-to-label] )
( [duplicate-top] )
( [output-number-on-stack] )
5
( [push 10] )
( [output-character-on-stack] )


( [push 1] )
( [do-arithmetic 'add] )
( [duplicate-top] )
( [push 11] )
( [do-arithmetic 'subtract] )
( [jump-if-zero] )
( [jump-to-label] )
( [duplicate-top] )
( [output-number-on-stack] )
6
( [push 10] )
( [output-character-on-stack] )


( [push 1] )
( [do-arithmetic 'add] )
( [duplicate-top] )
( [push 11] )
( [do-arithmetic 'subtract] )
( [jump-if-zero] )
( [jump-to-label] )
( [duplicate-top] )
( [output-number-on-stack] )
7
( [push 10] )
( [output-character-on-stack] )


( [push 1] )
( [do-arithmetic 'add] )
( [duplicate-top] )
( [push 11] )
( [do-arithmetic 'subtract] )
( [jump-if-zero] )
( [jump-to-label] )
( [duplicate-top] )
( [output-number-on-stack] )
8
( [push 10] )
( [output-character-on-stack] )


( [push 1] )
( [do-arithmetic 'add] )
( [duplicate-top] )
( [push 11] )
( [do-arithmetic 'subtract] )
( [jump-if-zero] )
( [jump-to-label] )
( [duplicate-top] )
( [output-number-on-stack] )
9
( [push 10] )
( [output-character-on-stack] )


( [push 1] )
( [do-arithmetic 'add] )
( [duplicate-top] )
( [push 11] )
( [do-arithmetic 'subtract] )
( [jump-if-zero] )
( [jump-to-label] )
( [duplicate-top] )
( [output-number-on-stack] )
10
( [push 10] )
( [output-character-on-stack] )


( [push 1] )
( [do-arithmetic 'add] )
( [duplicate-top] )
( [push 11] )
( [do-arithmetic 'subtract] )
( [jump-if-zero] )
( [discard-top] )
( [end-program] )
Program End Encountered
stack: []
callstack: []
heap: make map! [
]</code></pre>
        </div>

        <meta itemprop='headline' content='Whitespace Interpreter Revisited'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1482.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-01-31T21:03:23Z'>
              <time itemprop='dateModified' datetime='2021-02-01T06:05:19Z' class='post-time'>
                February 1, 2021,  6:05am
              </time>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Well... I've hacked it up <a href="https://github.com/hostilefork/whitespacers/blob/4f9e6ce0137658e3809dc24ac1bcc988f1119d83/ren-c/whitespace.reb#L183">to get it to look like the proposal</a>.  It's raised some questions (including ones that are known and have discussions here, especially pertaining to binding).</p>
<p>But it's rather cool.  And now the ren-c variant runs in the ReplPad without redbol:</p>
<pre><code>&gt;&gt; do https://github.com/hostilefork/whitespacers/blob/master/ren-c/whitespace.reb
</code></pre>
<p>I did the changes in individual commits in the git log, corresponding to the points I raised.  So you can sort of follow along, and I think it would be illuminating to take a look at each phase--even if some behind-the-scenes parts look like gibberish (for now):</p>
<ul>
<li>
<p>First I <a href="https://github.com/hostilefork/whitespacers/commit/889896b438ca2fd7c532d36f87e15a9aed1546ee">introduced CATEGORY and OPERATION</a> as simple aliases for MAKE OBJECT!, as a start to putting some running code that could give smarts to the definition (instead of just being inert literal blocks).</p>
</li>
<li>
<p>Then <a href="https://github.com/hostilefork/whitespacers/commit/dc43ad818a38c6ee5421224cd7360136042649fa">I got rid of the repetition of <code>command:</code> and <code>description:</code> in each definition</a>.  Instead it assumes the block will have a string in the first position (the description) and everything else makes up the command array.</p>
</li>
<li>
<p>Next was <a href="https://github.com/hostilefork/whitespacers/commit/47d9c91505cd8922c170ed1ffbdf6d09df08ac59">moving the code for the behavior for each operation to live with the operation</a>.  This was to start merging it together so that OPERATION would really just be a fancy way of defining a function plus more auxiliary information.  <em>(The function parameterization wasn't exactly consistent, <a href="https://github.com/hostilefork/whitespacers/commit/567f73f748de77dfcda09f447e47c9b319c70b45">so I had to fix that up</a>)</em></p>
</li>
<li>
<p>Another essential step was <a href="https://github.com/hostilefork/whitespacers/commit/2870aa87d67a4680f4d3d829d8017742dd6efe34">auto-generating the PARSE rules from the operation and category specs</a>.  This is simpler than it looks.</p>
</li>
<li>
<p>And to finish off how much I can do before sleeping, <a href="https://github.com/hostilefork/whitespacers/commit/4f9e6ce0137658e3809dc24ac1bcc988f1119d83">I fused the parameter definition for the behavior function in with the whitespace instruction definiton</a>.  So the sequence of opcode characters is right in line with the spec of the argument that is expected to be encoded in more characters after it to form the rest of an instruction.</p>
</li>
</ul>
<p>There's a lot of ugly hacking to get here, so it's going to need cleanup and more pushing on system features to make this work.  But if it were easy to make something that blended source fragments together in this style and have it still run, some other language would have done it.</p>
<p>Let me know if any of the above is confusing or makes sense, <a class="mention" href="../../../u/razetime.html">@razetime</a>.  Note that if you're reading a diff on GitHub, you can click on the diff line and comment directly on it... to ask questions or make remarks.  Please don't hesitate to do so if you have anything to ask or suggest...it's not spam, it's desperately needed peer review and commentary.</p>
<p>(I continue to hope that the "Minecraft of Programming" vision emerges from the process and line of thinking.  The code for defining OPERATION and CATEGORY themselves is a lot uglier than I'd like, and we have to keep fiddling with that until it can make clear sense.  But the fact that it's even <em>possible</em> to write--and make the <em>usages</em> of operation and category look that natural--shows the goalposts.)</p>
<hr>
<p>Note: I used the term "Instruction" for the aggregate of the whitespace opcode plus its arguments (which I form as a BLOCK! in the runtime).  Then "Operation" for the name like <code>push</code> or <code>jump-if-zero</code>, based on precedent from assembly language.  The sequence of ASCII chars is still the "Command" for now due to the term being in the whitespace spec, though I guess that could change, possibly to "opcode"?  I think terminology is important, so this should all be nailed down and used consistently...</p>
        </div>

        <meta itemprop='headline' content='Whitespace Interpreter Revisited'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../../updated-parse-machine/1475/10.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://forum.rebol.info/t/updated-parse-machine/1475/10'>
                      <span itemprop='name'>Updated Parse Machine</span>
                    </a>
                    <meta itemprop='position' content='8'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../../code-ordering-in-files/1485.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://forum.rebol.info/t/code-ordering-in-files/1485'>
                      <span itemprop='name'>Code Ordering in Files</span>
                    </a>
                    <meta itemprop='position' content='9'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../../pack-sequence-type/1503/17.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://forum.rebol.info/t/pack-sequence-type/1503/17'>
                      <span itemprop='name'>PACK! Sequence Type</span>
                    </a>
                    <meta itemprop='position' content='10'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1482.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-07-03T00:08:33Z' class='post-time'>
                July 3, 2021, 12:08am
              </time>
              <meta itemprop='dateModified' content='2021-07-03T00:08:33Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="hostilefork" data-post="5" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>But it's rather cool. And now the ren-c variant runs in the ReplPad without redbol:</p>
</blockquote>
</aside>
<p>I sync'd up the whitespace Ren-C variant to run with the current rules (e.g. a world without /ONLY) and switched it to use UPARSE.</p>
<p>The old circa 2010 variant I left as-is, but made sure the Redbol emulation could run it.</p>
<p>And now both are running on all platforms in debug and release builds via the Ren-C Action:</p>
<p><a href="https://github.com/hostilefork/whitespacers/runs/2976554030?check_suite_focus=true" class="inline-onebox">GitHub Actions workflow to test Rebol Whitespacers · hostilefork/whitespacers@b4e5b0b · GitHub</a></p>
<p>Really it's only running one test, and only testing that it finishes without raising an error.  This should be more rigorous...running more samples and checking the outputs.  But it's definitely a start.</p>
<p>There are still a lot of questions raised by this regarding the meaning of dialect design, but it's nice to see the 2010 code running under emulation...especially because that version is using UPARSE tweaked to Rebol2 conventions under the hood (!)</p>
        </div>

        <meta itemprop='headline' content='Whitespace Interpreter Revisited'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/aarchi.html'><span itemprop='name'>aarchi</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1482.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-07-05T13:43:07Z' class='post-time'>
                July 5, 2021,  1:43pm
              </time>
              <meta itemprop='dateModified' content='2021-07-05T13:43:07Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>For my <a href="https://github.com/wspace/corpus" rel="noopener nofollow ugc">Whitespace Corpus</a> project, I have documented about 175 implementations of the Whitespace programming language in 41 languages, including spec compliance and building instructions for each. Your %whitespace.reb interpreters are interesting in how they define a DSL describing Whitespace and I'd like to suggest some improvements.</p>
<p>Running those proved to be difficult as a Rebol newcomer. I obtained R3-Alpha binaries from rebolsource to run the 2009 version (I didn't yet know about Redbol). I was initially confused for building Ren-C and poked around the compiler to understand how it's built, but once I found make.sh building became easy.</p>
<p>I'd like to bootstrap Ren-3 back to the first open source release, without any arbitrary binaries, except for the R2 binary needed to build the first source. If a full bootstrap is something that you'd like to have, I can write up my notes so far and I'll have some questions. It seems like this would consist of building a couple of key versions such as 8994d23. Lots of build information is collected in the GitHub Actions (and previously Travis CI) configs that could be reused for the bootstrap. I can't guarantee that I'd have time to finish it though.</p>
<p>Your Whitespace interpreters unfortunately only run a single hardcoded program. This makes it near useless. Would it be simple to accept a command line argument of a program filename and fallback to the existing hardcoded program, when no filename is given? Additionally, a verbose mode would be nice so that the program trace and parse results can be otherwise hidden. If you have any questions about Whitespace language nuances, I'd be happy to answer them.</p>
<p>By the way, I submitted a <a href="https://github.com/hostilefork/whitespacers/pull/13" rel="noopener nofollow ugc">tiny PR</a> to your Whitespacers repo that fixes some typos and hasn't received any attention.</p>
        </div>

        <meta itemprop='headline' content='Whitespace Interpreter Revisited'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1482.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-07-05T19:05:30Z'>
              <time itemprop='dateModified' datetime='2021-07-05T20:40:43Z' class='post-time'>
                July 5, 2021,  8:40pm
              </time>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="aarchi" data-post="7" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/f07891/40.png" class="avatar"> aarchi:</div>
<blockquote>
<p>For my <a href="https://github.com/wspace/corpus">Whitespace Corpus</a> project, I have documented about 175 implementations of the Whitespace programming language in 41 languages, including spec compliance and building instructions for each.</p>
</blockquote>
</aside>
<p>Glad you are doing that!  Better you than me.  <img src="../../../images/emoji/twitter/slight_smile.png%3Fv=9" title=":slight_smile:" class="emoji" alt=":slight_smile:">  I was mulling over what to do about the fact that people had starred and were following the repository I made.  That meant it would be noisy to be conducting "day to day" (every couple of years?) Ren-C development on it.</p>
<p><a href="https://github.com/hostilefork/whitespacers">I've pointed to your project in the README.md and marked hostilefork/whitespacers as a read-only archive</a>.  The Ren-C whitespace interpreter is now a separate repository.</p>
<blockquote>
<p>Your %whitespace.reb interpreters are interesting in how they define a DSL describing Whitespace</p>
</blockquote>
<p>Glad you find them so.  When I wrote the first version I'd only known about Rebol for a couple of months.  I had just learned what PARSE was.  So it's not stellar code, but I was trying to one-up the "table-driven" implementations with a "spec-driven" implementation.</p>
<p>The Ren-C version is an attempt to do something more impressive, with bundling the code and instruction spec together more tightly.  I don't know if keeping it based it on translating it into PARSE rules is the best idea in the world.  But it's certainly the way someone might try to solve such a problem, and I have a new usermode parser combinator approach...so it's testing that.</p>
<p>There are a lot of pain points in trying to live up to the promise of <em>"mere mortals can bend the constructs--fast--to make their own language"</em>; Rebol2 was quite unproven, Red hasn't moved the needle much.  Ren-C has tons more tools, but there are still really basic questions surrounding "how does variable binding work" which are (nearly) as half-baked as ever.  Just trying to tackle them one issue at a time.</p>
<blockquote>
<p>I'd like to bootstrap Ren-(C) back to the first open source release, without any arbitrary binaries, except for the R2 binary needed to build the first source.</p>
</blockquote>
<p>As it happens, the R3-Alpha open source release did not bootstrap with Rebol2.  It had drifted to where you needed a certain "stable enough" early version of R3-Alpha.</p>
<p>Ren-C is even deeper into this situation.  Frustrating as that may sound, the experience of bootstrapping at this level is actually rather educational.  Making the language able to shift and bend between version changes of itself is a sort of trial-by-fire for the kind of acrobatics we want people to be able to exercise in their own code.</p>
<p><strong>What I've thought about is the idea that people could <a href="https://2019.reb4.me/talks">use the web build</a> to make a .zip of the prep files for their platform.</strong>  This would dodge the need to have a desktop executable installed at all.  So people would go to a URL, pick some settings from checkboxes, and get the contents of the prep/ directory.</p>
<p>Even more ambitious would be if we made the web build embed the TinyC compiler, and it could give you a full desktop executable...<em>built in your browser, using your CPU!</em>  (See my "Amish Programming" demo for that being done on the desktop, and there's not any fundamental reason why it couldn't be done in a browser too; one just has to be sensitive to virtual filesystem and memory quotas).</p>
<aside class="quote no-group" data-username="aarchi" data-post="7" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/f07891/40.png" class="avatar"> aarchi:</div>
<blockquote>
<p>Your Whitespace interpreters unfortunately only run a single hardcoded program. This makes it near useless. Would it be simple to accept a command line argument of a program filename and fallback to the existing hardcoded program, when no filename is given?</p>
</blockquote>
</aside>
<p>Certainly needs to take files as input.  I was hoping to make options for writing "whitespace assembly" (higher level instructions and labels), "whitespace words" (literally writing out <code>space</code> <code>tab</code> <code>lf</code>), or just the actual whitespace bytes...with the option to skip over non-whitespace characters or error ("strict mode").  <img src="../../../images/emoji/twitter/slight_smile.png%3Fv=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>I can raise the priority level of doing that in my queue, maybe something I can do this week...though I'm actually trying to get my old Rebmu sample programs running on GitHub.  If you like esolangs, it might amuse you:</p>
<div class="onebox lazyYT lazyYT-container" data-youtube-id="iDKaz1iB9wQ" data-youtube-title="Rebmu Language Overview (@ Recode 2013)" data-parameters="feature=oembed&amp;wmode=opaque">
  <a href="https://www.youtube.com/watch?v=iDKaz1iB9wQ" target="_blank" rel="noopener">
    <img class="ytp-thumbnail-image" src="https://i.ytimg.com/vi/iDKaz1iB9wQ/maxresdefault.jpg" title="Rebmu Language Overview (@ Recode 2013)" width="690" height="388">
  </a>
</div>

<aside class="quote no-group" data-username="aarchi" data-post="7" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/f07891/40.png" class="avatar"> aarchi:</div>
<blockquote>
<p>By the way, I submitted a <a href="https://github.com/hostilefork/whitespacers/pull/13">tiny PR </a> to your Whitespacers repo that fixes some typos and hasn't received any attention.</p>
</blockquote>
</aside>
<p>Sorry to have missed that.  Merged!</p>
        </div>

        <meta itemprop='headline' content='Whitespace Interpreter Revisited'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/aarchi.html'><span itemprop='name'>aarchi</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1482.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-07-07T14:24:01Z' class='post-time'>
                July 7, 2021,  2:24pm
              </time>
              <meta itemprop='dateModified' content='2021-07-07T14:24:01Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="hostilefork" data-post="8" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p><a href="https://github.com/hostilefork/whitespacers" rel="noopener nofollow ugc">I've pointed to your project in the README.md and marked hostilefork/whitespacers as a read-only archive </a>. The Ren-C whitespace interpreter is now a separate repository.</p>
</blockquote>
</aside>
<p>Thanks for the mention in your wspacers collection. Hopefully, that'll help bring exposure to it and help it grow.</p>
<aside class="quote no-group" data-username="hostilefork" data-post="8" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>Ren-C is even deeper into this situation. Frustrating as that may sound, the experience of bootstrapping at this level is actually rather educational. Making the language able to shift and bend between version changes of itself is a sort of trial-by-fire for the kind of acrobatics we want people to be able to exercise in their own code.</p>
</blockquote>
</aside>
<p>Yeah, I've been discovering that. I identified a couple of key revisions that had been used to build successive revisions and I intended to figure out how to build them all, but once I got to 8994d23 (2018-12-17), I ran into errors that look related to tooling/OS version mismatches. It wouldn't be pleasant to fix those old versions to work with modern tooling. Your approach with the .zip prep files downloaded from your site sounds much more usable anyways.</p>
<aside class="quote no-group quote-modified" data-username="hostilefork" data-post="8" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>Certainly needs to take files as input. ... I can raise the priority level of doing that in my queue, maybe something I can do this week.</p>
</blockquote>
</aside>
<p>Thanks. It's much easier to use now. Now that it can run arbitrary programs, I notice that it has some bugs when executing some of the example programs. If you're interested, I could investigate what's wrong: probably something with reading or more complex control flow.</p>
<aside class="quote no-group" data-username="hostilefork" data-post="8" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>I'm actually trying to get my old Rebmu sample programs running on GitHub. If you like esolangs, it might amuse you:</p>
</blockquote>
</aside>
<p>That's quite a quirky language. I haven't seen that particular method of compression before (i.e. alternating case to indicate word boundaries) and it could be useful for implementing terse code golf languages.</p>
        </div>

        <meta itemprop='headline' content='Whitespace Interpreter Revisited'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/aarchi.html'><span itemprop='name'>aarchi</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1482.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-07-07T14:59:41Z'>
              <time itemprop='dateModified' datetime='2021-07-07T15:03:28Z' class='post-time'>
                July 7, 2021,  3:03pm
              </time>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I noticed that your new <a href="https://github.com/hostilefork/rebol-whitespacers" rel="noopener nofollow ugc">hostilefork/rebol-whitespacers</a> repo doesn't preserve any git history, so I used a combination of git filter-repo and git rebase to concatenate the whitespacers and rebol-whitespacers histories.</p>
<p>I've published this version with preserved history at <a href="https://github.com/wspace/rebol-whitespacers" rel="noopener nofollow ugc">wspace/rebol-whitespacers</a> for now. Let me know if you'd rather have it on your user profile or in the wspace org. If hostilefork/ and you give me the go ahead, I'll do a <code>push --force</code> with the preserved history. If wspace/, it would be best to transfer the repo to the org so that it will redirect from your profile and the star will be preserved; I'd set you as the owner.</p>
<p>Here's how I did it:</p>
<p>git filter-repo makes it easy to remove all files that don't match the given patterns. This invocation filters whitespacers to only the files used in rebol-whitespacers (and it would be all you'd need if there was no hard fork):</p>
<pre><code class="lang-auto">git filter-repo --path rebol --path ren-c --path .github --path README
</code></pre>
<p>I then used rebase to replay the new rebol-whitespacers commits on top of whitespacers by</p>
<ul>
<li>removing the “Prepare for switching to archived repository” whitespacers commit because it deletes files that are used in rebol-whitespacers.</li>
<li>removing the “Initial commit” rebol-whitespacers commit because it adds a dummy README.md</li>
<li>and editing the “Get R3-Alpha/Ren-C interpreters from collection” rebol-whitespacers commit so that the files are moved to the reorganized paths</li>
</ul>
<p>Unfortunately, rebase overwrites the committer name, email, and time for every modified commit, so I wrote a script that stores the committer information before rebasing, then applies it afterwards. This was dreadfully annoying.</p>
<p>I've included the scripts I wrote to do this below. The entire process is deterministic (given a deterministic squash commit message), but I wasn't able to automate two interactive parts, so it's probably not worth trying. I've verified that the rewrite preserved all history and metadata, automatically and manually.</p>
<details>
<summary>concat_histories.bash</summary>
<pre><code class="lang-bash">#!/bin/bash -e

# Clone both repos.
# whitespacers is the base and rebol-whitespacers is left unchanged.
git clone https://github.com/hostilefork/rebol-whitespacers
git clone https://github.com/hostilefork/whitespacers rebol-whitespacers-concat
cd rebol-whitespacers-concat

# Only include Rebol- and Ren-C-related files.
# If you want to verify that these paths are correct for all commits,
# including deletions and renames, you can run `git filter-repo --analyze`
# to generate a report at .git/filter-repo/analysis/path-all-sizes.txt.
git filter-repo --path rebol --path ren-c --path .github --path README

# Rename master to main to match rebol-whitespacers.
git branch -m master main

# Merge rebol-whitespacers into whitespacers. This adds all files from
# rebol-whitespacers at their new paths, so there are duplicates for
# now. The merge commit is later discarded by the rebase, so don't worry
# about the commit message.
git remote add rebol ../rebol-whitespacers
git fetch rebol
git merge --allow-unrelated-histories --no-edit rebol/main
git remote remove rebol

# Record committer information so that it can be recovered after rebase.
../record_committers.bash ../committers.py

# Rebase to make the following changes:
# - Remove the penultimate whitespacers commit because it deletes files
#   that are used in rebol-whitespacers.
# - Squash the first two commits of rebol-whitespacers to move files to
#   their new paths and get rid of the dummy README.md.
#
# Start the rebase at "fdd7acb GitHub Actions workflow to test Rebol Whitespacers".
# If the commit hash is different, you have rewritten history
# differently and need to replace the hash in the rebase invocation.
#
# When the interactive editor opens, change pick to drop/edit/squash as
# follows:
#
#   drop 233e029 Prepare for switching to archived repository
#   pick 9b3c3fb Fix typo in Rebol/Ren-C titles; update filenames to current
#   edit 02daa2c Initial commit
#   squash aff5261 Get R3-Alpha/Ren-C interpreters from collection
#   pick 0447490 Take filename on the command line
#   pick 102a453 Break Dialect and Runtime into Separate Files
#   pick c429a5d Pretend UPARSE is the official PARSE behavior
#   pick d18e0ee Disable Syntax Highlighting for Rebol Files
#   pick 234d2b3 Update README.md
#
git rebase -i --committer-date-is-author-date fdd7acb

# Edit the rebol-whitespacers initial commit to move files to their new
# paths and get rid of the dummy README.md.
mkdir historical
git rm README README.md
git mv rebol/whitespace.reb historical/whitespace-old.reb
git mv ren-c/{whitespace.reb,README.md} .
git mv .github/workflows/test-{rebol,whitespacers}.yml
rmdir rebol ren-c
git commit --amend --no-edit

# Resolve conflicts in "Get R3-Alpha/Ren-C interpreters from collection",
# automatically choosing the changes from rebol-whitespacers.
git rebase --continue || :
git diff --name-only --diff-filter=U | xargs git checkout --theirs
git add --all

# Squash these two commits. Reword the new commit message to make sense
# in this new context (at least remove the "Initial commit" line).
git rebase --continue

# Restore accurate committer information.
../restore_committers.bash ../committers.py
rm ../committers.py

# Delete excessive replacement objects.
git replace --delete $(git replace --list)
</code></pre>
</details>
<details>
<summary>record_committers.bash</summary>
<pre><code class="lang-auto">#!/bin/bash -e

callback="$1"

# Set your name locally to "dummy" so that we can detect commits for
# which rebase changed the committer.
git config --local --add user.name dummy
git config --local --add user.email dummy@example.com

# Generate callback for filter-repo.
echo 'p = re.compile(br"\n\n\[ref:([0-9a-f]{40})\]\n")
match = p.search(commit.message)
if match:
  ref = match.group(1)
  commit.message = p.sub(b"", commit.message)

if not match or commit.committer_name != b"dummy":
  pass' &gt; "$callback"

git log --date=raw --format='elif ref == b"%H":
  commit.author_name = b"""%an"""
  commit.author_email = b"""%ae"""
  commit.author_date = b"%ad" # %ai
  commit.committer_name = b"""%cn"""
  commit.committer_email = b"""%ce"""
  commit.committer_date = b"%cd" # %ci' &gt;&gt; "$callback"

# Append commit hash to each commit message.
git filter-repo --commit-callback 'commit.message += b"\n\n[ref:%s]\n" % commit.original_id'
</code></pre>
</details>
<details>
<summary>restore_committers.bash</summary>
<pre><code class="lang-auto">#!/bin/bash -e

callback="$1"

git filter-repo --commit-callback "$(cat "$callback")"

git config --local --unset-all --fixed-value user.name dummy
git config --local --unset-all --fixed-value user.email dummy@example.com
</code></pre>
</details>
        </div>

        <meta itemprop='headline' content='Whitespace Interpreter Revisited'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1482.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-07-07T18:36:15Z' class='post-time'>
                July 7, 2021,  6:36pm
              </time>
              <meta itemprop='dateModified' content='2021-07-07T18:36:15Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="aarchi" data-post="10" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/f07891/40.png" class="avatar"> aarchi:</div>
<blockquote>
<p>If hostilefork/ and you give me the go ahead, I'll do a <code>push --force</code> with the preserved history.</p>
</blockquote>
</aside>
<p>Absolutely!  I believe I've set the flag so it will let you... let me know if it doesn't.</p>
<p>Thanks so much, and glad you're taking an interest in it.  I'm sure you've learned a bit about the Ren-C language experiment in the process.  (And an experiment it certainly is!)</p>
<aside class="quote no-group" data-username="aarchi" data-post="9" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/f07891/40.png" class="avatar"> aarchi:</div>
<blockquote>
<p>Now that it can run arbitrary programs, I notice that it has some bugs when executing some of the example programs. If you're interested, I could investigate what's wrong: probably something with reading or more complex control flow.</p>
</blockquote>
</aside>
<p>Fixing any bugs in terms of the spec would of course be great!</p>
<p>I'd like to have it run and validate the output of tests.  So there's a lot of improvements to make on giving it better modes and command-line switches.</p>
<p>But also there's plenty to do on the implementation.  You can see the thought flow in the thread above about how it got moved from where it was to where it is now.  But the "VM" currently hardcodes the categories by name, and it shouldn't know about them...instead it should get a list produced by the CATEGORY.  Etc.</p>
<p>I'll wait until you've pushed the history to work on any of that...</p>
        </div>

        <meta itemprop='headline' content='Whitespace Interpreter Revisited'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/aarchi.html'><span itemprop='name'>aarchi</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1482.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-07-07T22:37:32Z' class='post-time'>
                July 7, 2021, 10:37pm
              </time>
              <meta itemprop='dateModified' content='2021-07-07T22:37:32Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="hostilefork" data-post="11" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>I'll wait until you've pushed the history to work on any of that...</p>
</blockquote>
</aside>
<p>Alright I've now pushed to hostilefork/rebol-whitespacers and it's safe to work on that repo. I've deleted my wspace/rebol-whitespacers repo because it's no longer relevant.</p>
        </div>

        <meta itemprop='headline' content='Whitespace Interpreter Revisited'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1482.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-07-09T17:09:23Z'>
              <time itemprop='dateModified' datetime='2021-07-09T17:32:47Z' class='post-time'>
                July 9, 2021,  5:32pm
              </time>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="aarchi" data-post="12" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/f07891/40.png" class="avatar"> aarchi:</div>
<blockquote>
<p>I've now pushed to hostilefork/rebol-whitespacers and it's safe to work on that repo</p>
</blockquote>
</aside>
<p>I wanted to keep some momentum going here now that there is some <img src="../../../images/emoji/twitter/slight_smile.png%3Fv=9" title=":slight_smile:" class="emoji" alt=":slight_smile:">  so I went ahead and worked on this.</p>
<p>First thing I did was to add <a href="https://github.com/hostilefork/rebol-whitespacers/blob/3b0856c3e08f3a7602089abfbc6d97bddef15d89/whitespace.reb#L383">command line processing to control a verbosity setting</a>, and a --verbosity of 0 can just give the output of the program itself...suitable for checking.</p>
<p>That revealed that it was writing extra newlines each time it wrote out an integer/character.  I got rid of that.</p>
<p>Then I set it up to use Ren-C to <a href="https://github.com/hostilefork/rebol-whitespacers/blob/7c633e667ccb2c6e3b9cae9bc849cb24c0d2efe6/tests/check-io.reb#L44">launch a subprocess of itself to run the test, so that it can capture the result into a string</a>.  It compares that result to a known output.  By doing this in Ren-C itself it works on all platforms without worrying about varying diff tools or things like that.</p>
<aside class="quote no-group" data-username="aarchi" data-post="9" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/f07891/40.png" class="avatar"> aarchi:</div>
<blockquote>
<p>I notice that it has some bugs when executing some of the example programs. If you're interested, I could investigate what's wrong: probably something with reading or more complex control flow.</p>
</blockquote>
</aside>
<p>Rather than subject you to debugging old untested code I wrote about 10 years ago, I went ahead and attacked the issues myself.  There were lots of problems!</p>
<p>But I've now got it up and running on GitHub Actions with <a href="https://github.com/hostilefork/rebol-whitespacers/blob/7c633e667ccb2c6e3b9cae9bc849cb24c0d2efe6/.github/workflows/test-whitespacers.yml#L105">several tests</a> that can feed input and validate output.  They are working on Linux/Windows/Mac:</p>
<p><a href="https://github.com/hostilefork/rebol-whitespacers/runs/3031025372?check_suite_focus=true#step:9:5" class="inline-onebox">Abstract tests into a script · hostilefork/rebol-whitespacers@7c633e6 · GitHub</a></p>
<p>A bit painful is that the author of the sample programs made the unfortunate choice to use CR LF in their output.  Ren-C considers that a foreign file format you need a codec to decode, just as if you were using a different character set.  So the tests compare to a BINARY!, not a TEXT!.</p>
<aside class="quote no-group" data-username="aarchi" data-post="9" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/f07891/40.png" class="avatar"> aarchi:</div>
<blockquote>
<p>Thanks for the mention in your wspacers collection. Hopefully, that'll help bring exposure to it and help it grow.</p>
</blockquote>
</aside>
<p>As the author of the original Rebol one all that time ago, I'd ask the old version to be removed from the wspace/corpus.  It's very broken and I'm not going to fix it.  (!)  I will keep it around myself just to run as a Redbol test since it's running right now on the hardcoded only case it can support.</p>
<p>But I'd definitely appreciate your help in pushing on the Ren-C one, as an example of the kinds of language acrobatics that we are trying.  Anything would be good--even editing comments or README.md to explain it better.  It's definitely still a "sketch", but I think it has potential.  And it's turning out to be useful in testing.</p>
<p>One thing I'm wondering about is how standardized the assembly format and opcode names are...is there consensus?  If not, is there a direction you would like the consensus to bend?</p>
<p>In the meantime, I need to get started on native-optimizing UPARSE, as it is s-l-o-w right now!</p>
        </div>

        <meta itemprop='headline' content='Whitespace Interpreter Revisited'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/aarchi.html'><span itemprop='name'>aarchi</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1482.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-07-10T11:42:23Z'>
              <time itemprop='dateModified' datetime='2021-07-10T11:50:44Z' class='post-time'>
                July 10, 2021, 11:50am
              </time>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="hostilefork" data-post="13" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>I went ahead and attacked the issues myself. There were lots of problems!</p>
</blockquote>
</aside>
<p>Wow that's a lot of fixes. I/O fixes and --verbose especially allow more programs to run.</p>
<aside class="quote no-group" data-username="hostilefork" data-post="13" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>I've now got it up and running on GitHub Actions with <a href="https://github.com/hostilefork/rebol-whitespacers/blob/7c633e667ccb2c6e3b9cae9bc849cb24c0d2efe6/.github/workflows/test-whitespacers.yml#L105" rel="noopener nofollow ugc">several tests</a> that can feed input and validate output.</p>
</blockquote>
</aside>
<p>Great! I've submitted <a href="https://github.com/hostilefork/rebol-whitespacers/pull/1" rel="noopener nofollow ugc">a PR</a> that adds the remaining sample programs from wspace 0.3. In the process, I fixed an off-by-one error with <code>duplicate-indexed</code> (copy). (I'm not sure of your preferred development process—merged branches or rebased linear, open PR or commit directly to main—so I figured a PR would be the least controversial.)</p>
<p><code>read-character-to-location</code> (readc) is not yet implemented, which is currently causing the name.ws test to fail. The reference interpreter reads UTF-8-encoded text and sets the value at the given address to the 32-bit codepoint. Many implementations just read ASCII, so that would be fine, if that's easier.</p>
<p>Does Ren-C have a facility for arbitrary-precision integers? If so, then fact.ws (factorial) would work for 21! and greater instead of overflowing a 64-bit integer.</p>
<p>I think it would be useful to add a separate LICENSE file so it can be automatically detected by GitHub and other tools. I notice that %whitespace.reb is MIT-licensed.</p>
<aside class="quote no-group" data-username="hostilefork" data-post="13" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>A bit painful is that the author of the sample programs made the unfortunate choice to use CR LF in their output.</p>
</blockquote>
</aside>
<p>Yeah non-LF line endings aren't fun. I once had to deal with the edge cases of g++ and clang's LF, CRLF, and CR (Mac OS 9) line ending handling.</p>
<aside class="quote no-group" data-username="hostilefork" data-post="13" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>As the author of the original Rebol one all that time ago, I'd ask the old version to be removed from the wspace/corpus. It's very broken and I'm not going to fix it.</p>
</blockquote>
</aside>
<p>My philosophy with the Whitespace Corpus has been to collect all known Whitespace implementations and programs in a unified format. I avoid directly embedding project source code, instead using git submodules. This allows the author's repo to be source of truth, preferring to direct improvements upstream. To date, only your repos and <a href="https://github.com/buyoh/nospace" rel="noopener nofollow ugc">buyoh/nospace</a> have accepted any of my PRs though, so I maintain several forks in the wspace org. Most projects before 2010  were distributed as source archives and many are only available on the Internet Archive; I have converted those to git repos—any of which I would transfer ownership to the original authors, if they ask. I sort the projects in reverse date order, using the dates of first commit or release, whichever is earlier.</p>
<p>I'm not sure when you last looked at wspace/corpus, but there is only one entry for your project. Before we got in touch, I had two hard forks, wspace/hostilefork-ren-c and wspace/hostilefork-rebol, which were the respective %whitespace.reb and README.md files extracted from hostilefork/whitespacers using <code>git filter-repo</code>. Once you moved development to hostilefork/rebol-whitespacers, I merged the two entries, using the date of your first release (2009-10-08) for ordering and deleted the two now-redundant mirrors. Since it's a submodule to hostilefork/rebol-whitespacers, I can't remove historical/whitespace-reb. I don't think it needs to be removed anyways—“historical” and “old” make its unsupported status clear and it showcases Ren-C's R3 Alpha emulation capabilities.</p>
<p>Most Whitespace implementations are small weekend projects, for coding challenges or school assignments, so spec-compliance is not emphasized and there are frequent bugs. In general, the Whitespace community is untested write-once software and it's fine that way.</p>
<p>The interesting projects (to me) are those written in interesting languages (Rebol/Ren-C, <a href="https://github.com/andrewarchi/wsjq" rel="noopener nofollow ugc">jq</a>, <a href="https://github.com/edwinb/WS-idr" rel="noopener nofollow ugc">Idris</a>, Whitespace<a href="https://web.archive.org/web/20110911114338/http://www.burghard.info/Code/Whitespace/" rel="noopener nofollow ugc">[1]</a><a href="https://github.com/andrewarchi/nebula/blob/master/programs/interpret.wsa" rel="noopener nofollow ugc">[2]</a>, <a href="https://github.com/hostilefork/whitespacers/tree/master/lolcode" rel="noopener nofollow ugc">LOLCODE</a>), with higher-level languages compiling to Whitespace (<a href="https://github.com/buyoh/nospace" rel="noopener nofollow ugc">Nospace</a>, <a href="https://github.com/collidedscope/spitewaste" rel="noopener nofollow ugc">Spitewaste</a>, <a href="https://web.archive.org/web/20110212015726/http://hapyli.webs.com/" rel="noopener nofollow ugc">HaPyLi</a>, <a href="https://github.com/jgkaplan/whitespaceTranspiler" rel="noopener nofollow ugc">WSC</a>, <a href="https://github.com/pocke/akaza" rel="noopener nofollow ugc">Ruby subset</a>), with optimizations (<a href="https://github.com/andrewarchi/nebula" rel="noopener nofollow ugc">SSA form rewriting</a>, <a href="https://github.com/vii5ard/whitespace" rel="noopener nofollow ugc">AST rewriting</a>, <a href="https://github.com/CensoredUsername/whitespace-rs" rel="noopener nofollow ugc">speculative JIT optimization</a>), or with interesting compilation targets (LLVM<a href="https://github.com/andrewarchi/nebula" rel="noopener nofollow ugc">[1]</a><a href="https://github.com/sonicyang/ws-frontend" rel="noopener nofollow ugc">[2]</a><a href="https://github.com/Subv/Whitespace-LLVM" rel="noopener nofollow ugc">[3]</a><a href="https://github.com/worktycho/whitespace-llvm" rel="noopener nofollow ugc">[4]</a>, <a href="https://github.com/ryzheboka/Whitespace" rel="noopener nofollow ugc">NASM</a>, <a href="https://github.com/jarsp/wsint" rel="noopener nofollow ugc">MASM</a>, JVM, <a href="https://github.com/nicolasff/spacesharp" rel="noopener nofollow ugc">.NET MSIL</a>). There's many more.</p>
<p>There's a lot of diverse projects that I want to do a better job of highlighting. The core of the corpus is a 5.5k line JSON file detailing the various implementations, along with some tools to generate the documentation. I think of it as a DSL in JSON. I need to write and generate more easily-digestible comparisons.</p>
        </div>

        <meta itemprop='headline' content='Whitespace Interpreter Revisited'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1482.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-07-10T19:42:53Z'>
              <time itemprop='dateModified' datetime='2021-07-10T20:01:05Z' class='post-time'>
                July 10, 2021,  8:01pm
              </time>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="aarchi" data-post="14" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/f07891/40.png" class="avatar"> aarchi:</div>
<blockquote>
<p>Once you moved development to hostilefork/rebol-whitespacers, I merged the two entries, using the date of your first release (2009-10-08) for ordering and deleted the two now-redundant mirrors. Since it's a submodule to hostilefork/rebol-whitespacers, I can't remove historical/whitespace-reb.</p>
</blockquote>
</aside>
<p>Ah, hadn't seen you'd done that.  Great.  I'll do a little surgery on that file and add a README to contextualize it better.</p>
<aside class="quote no-group" data-username="aarchi" data-post="14" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/f07891/40.png" class="avatar"> aarchi:</div>
<blockquote>
<p><code>read-character-to-location</code> (readc) is not yet implemented, which is currently causing the name.ws test to fail. The reference interpreter reads UTF-8-encoded text and sets the value at the given address to the 32-bit codepoint.</p>
</blockquote>
</aside>
<p>The idea of "reading a single character" and getting control back without needing to hit Enter isn't something that could work in R3-Alpha or early Ren-C consoles--especially on Windows--as it was using a high-level API that read an entire line at a time (including cursoring/etc.)</p>
<p><em>(Now the code is more granular, and is being <a href="https://github.com/metaeducation/ren-c/blob/9995bdca2f41b29428a4d4e04711de9f3f2970db/extensions/stdio/p-stdio.c#L123-L132">slowly bubbled up to encode things as Rebol values</a>...but the events aren't quite at the level of being exposed yet... although <a href="https://github.com/metaeducation/ren-c/issues/1022">I have offered a hook if you press TAB to anyone who wants to implement what happens when you hit tab</a>!)</em></p>
<p>So presuming the intent is to read a character without needing a newline, this would have only have applied to piped input...which R3-Alpha was notoriously bad about.  I did some egregious hacks to try and make it so that READ-LINE could work in piped or non-piped (console) situations...but READ-CHAR is a taller order.</p>
<p>How do other whitespace implementations handle READ-CHAR across REPL vs. non-REPL cases?</p>
<aside class="quote no-group" data-username="aarchi" data-post="14" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/f07891/40.png" class="avatar"> aarchi:</div>
<blockquote>
<p>Does Ren-C have a facility for arbitrary-precision integers?</p>
</blockquote>
</aside>
<p>There is some experimental code using the <a href="https://tls.mbed.org/api/bignum_8h_source.html">bignums from mbedTLS</a>.  So in the "dependency minimization" philosophy the intent is to be able to share the same implementation used by the crypto.</p>
<p>But it's a fair ways off from being done; it's not particularly central to the more critical language design questions that need to be answered.</p>
<aside class="quote no-group" data-username="aarchi" data-post="14" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/f07891/40.png" class="avatar"> aarchi:</div>
<blockquote>
<p>The core of the corpus is a 5.5k line JSON file detailing the various implementations, along with some tools to generate the documentation. I think of it as a DSL in JSON.</p>
</blockquote>
</aside>
<p>That seems like a pretty good way to study any emerging consensus on the instruction names or assembly syntax.  I wonder if people could be lobbied to come to a standard?  I'd like there to be an assembler which is also driven by the same spec being used to interpret.</p>
<aside class="quote no-group" data-username="aarchi" data-post="14" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/f07891/40.png" class="avatar"> aarchi:</div>
<blockquote>
<p>The interesting projects (to me) are those written in interesting languages (Rebol/Ren-C, <a href="https://github.com/andrewarchi/wsjq">jq</a>, <a href="https://github.com/edwinb/WS-idr">Idris</a>, Whitespace<a href="https://web.archive.org/web/20110911114338/http://www.burghard.info/Code/Whitespace/">[1]</a><a href="https://github.com/andrewarchi/nebula/blob/master/programs/interpret.wsa">[2]</a>, <a href="https://github.com/hostilefork/whitespacers/tree/master/lolcode">LOLCODE</a>),</p>
</blockquote>
</aside>
<p>Right now it's still pretty clunky.  But ultimately where I want this implementation to go is drive down the size in a code golf kind of sense for each feature, and show the <em>"force multiplier"</em> that we have been seeking to achieve.</p>
<p>For instance, <a href="https://github.com/hostilefork/rebol-whitespacers/commit/8451acfc719ccd1b05b87e3aa3e7a5fe28488dfb">I just added a feature to run files from URL!s.</a></p>
<p>All told Ren-C is a hazy picture but it comes into focus a little at a time.</p>
        </div>

        <meta itemprop='headline' content='Whitespace Interpreter Revisited'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/aarchi.html'><span itemprop='name'>aarchi</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1482.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-07-10T23:58:11Z' class='post-time'>
                July 10, 2021, 11:58pm
              </time>
              <meta itemprop='dateModified' content='2021-07-10T23:58:11Z'>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group quote-modified" data-username="hostilefork" data-post="15" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>So presuming the intent is to read a character without needing a newline, ...</p>
<p>How do other whitespace implementations handle READ-CHAR across REPL vs. non-REPL cases?</p>
</blockquote>
</aside>
<p>Most implementations, including the reference implementation, are line-buffered, so the easier way is actually spec-compliant. Line breaks also count as characters for readc and, if possible, CRLF isn't collapsed to LF.</p>
        </div>

        <meta itemprop='headline' content='Whitespace Interpreter Revisited'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/aarchi.html'><span itemprop='name'>aarchi</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1482.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-08-12T01:13:51Z' class='post-time'>
                August 12, 2021,  1:13am
              </time>
              <meta itemprop='dateModified' content='2021-08-12T01:13:51Z'>
          <span itemprop='position'>#17</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>By the way, rebol-whitespacers has no top-level LICENSE file. That would help GitHub detect the license and would clear up whether the MIT license mentioned in %whitespace.reb applies to only that file or the entire project.</p>
        </div>

        <meta itemprop='headline' content='Whitespace Interpreter Revisited'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1482.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-08-15T06:40:47Z'>
              <time itemprop='dateModified' datetime='2021-08-15T08:21:58Z' class='post-time'>
                August 15, 2021,  8:21am
              </time>
          <span itemprop='position'>#18</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="aarchi" data-post="17" data-topic="1482">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/a/f07891/40.png" class="avatar"> aarchi:</div>
<blockquote>
<p>By the way, rebol-whitespacers has no top-level LICENSE file.</p>
</blockquote>
</aside>
<p>Thanks, <a href="https://github.com/hostilefork/rebol-whitespacers/commit/4036b8620eb5231bf4ad0f8d2e724347e1204fe4">I've added one...</a></p>
<p>...aaaand I also got around to doing a bit more hacking on it tonight.  It's really shaping up to be an interesting demonstration.</p>
<p>For a little insight into what's going on, we have OPERATION which might be something like:</p>
<pre><code>mark-location: operation [
    {Mark a location in the program}
    space space [label: Label]
    &lt;local&gt; address
][
    address: offset? program-start instruction-end
    labels.(label): address
]
</code></pre>
<p>One by-product of this is the function to do the work.  It would look like this:</p>
<pre><code>mark-location-impl: func [
    label [text!]
    &lt;local&gt; address
][
    address: offset? program-start instruction-end
    labels.(label): address
]
</code></pre>
<p>Another by-product is the <strong>rule for generating an instruction invocation</strong>.  That rule looks like:</p>
<pre><code>[keep @mark-location-impl space space keep Label]
</code></pre>
<p>Commas may help readability, but they're not required:</p>
<pre><code>[keep @mark-location-impl, space, space, keep Label]
</code></pre>
<p>Then each category aggregates these rules together, along with the IMP, and a COLLECT instruction:</p>
<pre><code>[
    [lf]  ; IMP
    collect any @[
        [keep @mark-location space space keep Label]
        [keep @call-subroutine space tab keep Label]
        [keep @jump-to-label space lf keep Label]
        [keep @jump-if-zero tab space keep Label]
        [keep @jump-if-negative tab tab keep Label]
        [keep @return-from-subroutine tab lf]
        [keep @end-program lf lf]
    ]
]
</code></pre>
<p>Then, at a higher level, these rules are kept as alternates.</p>
<p>If a rule runs successfully, we expect to see a product.  Label is a rule that matches whitespace label sequences and synthesizes it, so the instruction block that the MARK-LOCATION rule would make might look like:</p>
<pre><code>[mark-location-impl "  ^-  ^-"]
</code></pre>
<p>Where <code>"^-" =&gt; tab</code>.</p>
<h2>I Think The Code Is Close To <a href="https://en.wikipedia.org/wiki/No_Silver_Bullet#Summary">Essential Complexity</a> Level</h2>
<p><em>(...well, at least the part that's processing the specs.)</em></p>
<p><strong><a href="https://github.com/hostilefork/rebol-whitespacers/blob/ad151799e3b350876b2d28f0a8a4c07e4d388d7a/ws-dialect.reb#L132">Here's the fully commented code for walking the spec and emitting a rule</a></strong>...</p>
<p>...but without comments it's actually quite short:</p>
<pre><code>emit rule: collect [
     keep (compose [keep @(as word! name)])
     while any @[
        [&lt;end&gt;, stop]
        [ahead tag!, pos: &lt;here&gt;, (append args pos), to &lt;end&gt;, stop]
        [keep ^['space | 'tab | 'lf]]
        [
            into block! [
                param: set-word!, (param: to word! param)
                type: ['Label | 'Number]
            ]
            keep (compose [keep (type)])
            (append args compose [
                (param) (either (type = 'Label) '[text!] '[integer!])
            ])
        ]
        fail @["Malformed OPERATION spec"]
    ]
]
</code></pre>
<p>I cleaned it up a bit while writing this post.  Looking at what's left, I think I'm starting to side with <a class="mention" href="https://forum.rebol.info/u/rgchris">@rgchris</a> that maybe the <strong>^</strong> should be reserved for "expert use"... and the ONLY keyword may be better than QUOTE because it helps convey the idea that you're not augmenting the value for the reason of the augmentation being kept, you expect it to just be a signal of "append as is":</p>
<pre><code>[keep ^['space | 'tab | 'lf]]
=&gt;
[keep only ['space | 'tab | 'lf]]
</code></pre>
<p>It's less intimidating.</p>
<p>On that note: regarding the growing appearances of <strong><code>@</code></strong>...well, it's just a fact of life there has to be some way to call out that a BLOCK! in parse isn't meant to be processed by the baseline block combinator.  You can't use <strong>'[...]</strong> because generic quoting is taken for matching arbitrary content from the input series.  I think it would be disastrous to say "anything goes" and start having combinators quote their block arguments and treat them as non-rule data, so being explicit feels unavoidable.</p>
<p>Anyway, for the size of this code, it certainly packs a punch.  <em>(Sorry for the long delay in getting back to you <a class="mention" href="../../../u/razetime.html">@razetime</a>, but, this perhaps shows the code golf potential of the language...UPARSE is a killer.  Someday maybe this will be a winning golfed whitespace interpreter!  There's lots of stuff that could be skipped, like putting the [text!] or [integer!] type annotation on the parameter...I really would be interested to see how small this could go if that were the goal.)</em></p>
        </div>

        <meta itemprop='headline' content='Whitespace Interpreter Revisited'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
