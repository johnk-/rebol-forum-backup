<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>UPARSE Parameter Conventions: How Flexible? - Parsing - AltRebol</title>
    <meta name="description" content="UPARSE is shaping up to be mostly uniform, in that most arguments to parsers take parsers...which are functions (that in turn take other parsers) 
The job of the parse engine is to take sequences of words and symbols and&amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1586.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;UPARSE Parameter Conventions: How Flexible?&#39;" href="1586.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/uparse-parameter-conventions-how-flexible/1586" />
<meta name="twitter:url" content="https://forum.rebol.info/t/uparse-parameter-conventions-how-flexible/1586" />
<meta property="og:title" content="UPARSE Parameter Conventions: How Flexible?" />
<meta name="twitter:title" content="UPARSE Parameter Conventions: How Flexible?" />
<meta property="og:description" content="UPARSE is shaping up to be mostly uniform, in that most arguments to parsers take parsers...which are functions (that in turn take other parsers)  The job of the parse engine is to take sequences of words and symbols and turn them into these functions.  This is why you can write some keep integer! or some [keep integer!] or some [keep [integer!]].  It&#39;s not the job of SOME or KEEP or INTEGER! to worry about these blocks.  There are not a lot of cases of breaking this rule.  But the Redbol emulat..." />
<meta name="twitter:description" content="UPARSE is shaping up to be mostly uniform, in that most arguments to parsers take parsers...which are functions (that in turn take other parsers)  The job of the parse engine is to take sequences of words and symbols and turn them into these functions.  This is why you can write some keep integer! or some [keep integer!] or some [keep [integer!]].  It&#39;s not the job of SOME or KEEP or INTEGER! to worry about these blocks.  There are not a lot of cases of breaking this rule.  But the Redbol emulat..." />
<meta property="article:published_time" content="2021-04-14T07:24:25+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1586.html">UPARSE Parameter Conventions: How Flexible?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/15" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Domains</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/parsing/16" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Parsing</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1586.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-04-14T07:24:25Z'>
              <time itemprop='dateModified' datetime='2021-04-14T08:46:47Z' class='post-time'>
                April 14, 2021,  8:46am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>UPARSE is shaping up to be mostly uniform, in that most arguments to parsers take parsers...which are functions (that in turn take other parsers)</p>
<p>The job of the parse engine is to take sequences of words and symbols and turn them into these functions.  This is why you can write <strong>some keep integer!</strong> or <strong>some [keep integer!]</strong> or <strong>some [keep [integer!]]</strong>.  It's not the job of SOME or KEEP or INTEGER! to worry about these blocks.</p>
<p>There are not a lot of cases of breaking this rule.  But the Redbol emulator has to, in order to get things like:</p>
<pre><code>set x integer!
</code></pre>
<p>Here we see that X is basically being "quoted" by SET.  It is not a parser in its own right.  While the second parameter (integer!) is a parser, and could just as easily be <strong>[some integer!]</strong>.</p>
<p>Right now the way I'm dealing with this is to say that arguments which are not parser functions, like the variable here, are quoted arguments.  If in the combinator spec it sees a quoted argument, it just gets it literally.</p>
<p>So clearly that's important for legacy features.  But does it have a place in the harmonious parse world going forward?</p>
<p>Well, right now the SEEK rule is using it.</p>
<pre><code> x: here  ; here is a rule...which is value-bearing with the current position
 some "a"
 seek x  ; hm, here we are at another one of those quoting non-rule variables
</code></pre>
<p>Should this be shuffled around to where SEEK takes a rule?  If so, this would be:</p>
<pre><code> x: here
 some "a"
 seek (x) 
</code></pre>
<p>Because GROUP! is set up as a rule that always succeeds, and bears the value of its evaluation.</p>
<p>This kind of formulation would imply you could also do something like:</p>
<pre><code> seek [some "a", let pos: here, some "b", (pos)]
</code></pre>
<p>So GROUP! would not be the only thing you could put there.  Whereas if we went with the quoting-variable-option, you'd be locked into only putting words there.</p>
<h2>...But it's a Bigger Question Than Just SEEK</h2>
<p>I've talked about maybe having a parse exposure of enbin and debin.  Could they look like:</p>
<pre><code> uparse #{1020} [x: debin [BE + 2]]  ; BE + 2 block is obviously not a "rule"
</code></pre>
<p>Might the DEBIN take a BLOCK! to not mean a rule at all, but be literal dialect data to tell it to be "big-endian, unsigned, 2 bytes"?  Or would such values always need to be passed to rules via GROUP! ...so you know they're not rules?</p>
<pre><code> uparse #{1020} [x: debin ([BE + 2])]
</code></pre>
<p><strong>As I say, the ability to read arguments quoted literally will be there, else we could not implement Redbol SET and COPY emulation.</strong>  The feature of combinators taking arguments by quote is a given.</p>
<p><em>But is it a good idea to have anything in the box that does this, and encourage the practice?</em></p>
<h2>I Think Flexibility Should Be Taught (Possibly (?) Encouraged?)</h2>
<p>This reminds me a lot of the questions raised over <strong><a href="../speaking-with-tics-should-quoted-arguments-always-be-apostrophed/1359.html">speaking with Tics</a></strong>.</p>
<p>There I asked if there should be expressions <strong>type of x</strong> instead of <strong>'type of x</strong>, or if it was setting a bad example.</p>
<p>When something is so common and you get stuck making it ugly...when it would be very learnable and natural to make it nicer, I don't see why you would want the ugly version.</p>
<p>It's debatable how much of this applies to DEBIN.  You're more likely to want to make a rule for uint16:</p>
<pre><code> uint16: [debin ([BE + 2])]
 uparse #{1020} [x: uint16]
</code></pre>
<p>Which may even challenge my "does this need to be a combinator anyway":</p>
<pre><code> uint16: [let data: across 2 skip, (debin [BE + 2] data)]
 uparse #{1020} [x: uint16]
</code></pre>
<p>Though that's less efficient, as it has to create a new series vs. decoding the binary input directly.  But at least these things are becoming <em>possible</em>.  It's a step up.</p>
<p>The bigger point remains: I think if someone has an idiom that they like, telling them <em>"all BLOCK!s in PARSE must be rules, and you have to put them in GROUP!s to pass as arguments"</em> feels like a restriction on par with saying that you must pass QUOTED! values to any regular functions...that there are no implicitly quoted arguments.</p>
<p>Implicitly quoted arguments seem to me to be one of the things that makes the language able to shapeshift to let you build syntaxes on par with coming up with a new language.  It's not something we want to overuse, but not using it at all seems misguided.</p>
<p>So I think this same thing happens with PARSE.</p>
        </div>

        <meta itemprop='headline' content='UPARSE Parameter Conventions: How Flexible?'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
