<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Hedging on UNLESS for Beta/One - Naming - AltRebol</title>
    <meta name="description" content="Not everyone has historically been a fan of the idea that UNLESS is a synonym for IF-NOT.  Itâ€™s the same number of characters, and itâ€™s been a source of controversy.  When people go around changing if-not to unless, some&amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="881.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Hedging on UNLESS for Beta/One&#39;" href="881.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/hedging-on-unless-for-beta-one/881" />
<meta name="twitter:url" content="https://forum.rebol.info/t/hedging-on-unless-for-beta-one/881" />
<meta property="og:title" content="Hedging on UNLESS for Beta/One" />
<meta name="twitter:title" content="Hedging on UNLESS for Beta/One" />
<meta property="og:description" content="Not everyone has historically been a fan of the idea that UNLESS is a synonym for IF-NOT.  It&#39;s the same number of characters, and it&#39;s been a source of controversy.  When people go around changing if-not to unless, some people change it back because they think it made matters less clear.  I&#39;d come up with what I thought was a more interesting usage of UNLESS, as an infix operator.  It would evaluate both the left and the right.  If the right evaluated to nothing (NULL) then it would use the val..." />
<meta name="twitter:description" content="Not everyone has historically been a fan of the idea that UNLESS is a synonym for IF-NOT.  It&#39;s the same number of characters, and it&#39;s been a source of controversy.  When people go around changing if-not to unless, some people change it back because they think it made matters less clear.  I&#39;d come up with what I thought was a more interesting usage of UNLESS, as an infix operator.  It would evaluate both the left and the right.  If the right evaluated to nothing (NULL) then it would use the val..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="3 â¤" />
<meta property="article:published_time" content="2018-10-28T23:42:59+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="881.html">Hedging on UNLESS for Beta/One</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/8" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/naming/32" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Naming</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="881.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2018-10-28T23:42:59Z'>
              <time itemprop='dateModified' datetime='2018-10-29T07:00:50Z' class='post-time'>
                October 29, 2018,  7:00am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Not everyone has historically been a fan of the idea that UNLESS is a synonym for IF-NOT.  It's the same number of characters, and it's been a source of controversy.  When people go around changing if-not to unless, some people change it back because they think it made matters less clear.</p>
<p>I'd come up with what I thought was a more interesting usage of UNLESS, as an infix operator.  It would evaluate both the left and the right.  If the right evaluated to nothing (NULL) then it would use the value of the left, otherwise the value of the right would override.</p>
<pre><code>&gt;&gt; 1 + 2 unless null
== 3

&gt;&gt; 1 + 2 unless &lt;a thing&gt;
== &lt;a thing&gt;
</code></pre>
<p>I envisioned it being a way of reordering the order you'd read code, where you could put a default first...perhaps wanting it first to emphasize the most common case:</p>
<pre><code>error-id: 0 unless case [
    not block? foo [13]
    closed? connection [29]
    ...
] // don't need an ELSE here, the 0 is up-front
</code></pre>
<p>But using it as a defaulting mechanism has the problem that the left-hand side is not in a BLOCK!, so you are always running the default case's code.  Trying to fix this by requiring the left side to be a block would look ugly, and seem a bit of a nasty "surprise":</p>
<pre><code>thing: [ // looks like a block literal
   foo baz bar
   ...
   x + 100
] unless [ // oh, wait, that was *code*? :-/
   switch z [...]
]
</code></pre>
<p>So it seems whatever an infix UNLESS does, it probably always has to run the left-hand side.  That means it's a black sheep if you try to group it in with things like ELSE and DEFAULT.</p>
<h2>But what if it was a logical operator, more like OR/XOR?</h2>
<p>Imagine if UNLESS was like a version of OR that favored its right hand side, instead of its left.  To do this, it would stylize to always have a GROUP! on its right and disallow BLOCK!, because there's no way it can make a decision without evaluating both sides.  (In that way, it would be like XOR...which can't have a BLOCK! clause on the right)</p>
<pre><code>&gt;&gt; (print "a" &lt;left&gt;) or (print "b" null)
a
b
== &lt;left&gt;

&gt;&gt; (print "a" null) or (print "b" &lt;right&gt;)
a
b
== &lt;right&gt;

&gt;&gt; (print "a" &lt;left&gt;) or (print "b" &lt;right&gt;)
a
b
== &lt;left&gt;
</code></pre>
<p>So UNLESS would just be a tiny bit different:</p>
<pre><code> &gt;&gt; (print "a" &lt;left&gt;) unless (print "b" null)
 a
 b
 == &lt;left&gt; // same as OR

 &gt;&gt; (print "a" null) unless (print "b" &lt;right&gt;)
 a
 b
 == &lt;right&gt; // same as OR

 &gt;&gt; (print "a" &lt;left&gt;) unless (print "b" &lt;right&gt;)
 a
 b
 == &lt;right&gt; // DIFFERENT! right result wins out
</code></pre>
<p>Psychologically I think the "unless" suggests a test for truthiness of the right.  So this is better I think...it had felt forced, to say <code>foo bar unless if condition [blah blah]</code>.</p>
<p>So instead of comparing it with branching constructs like IF/ELSE (where it fell down by evaluating both sides), it's a logic operator similar to XOR and OR.  And still more novel than being a synonym for IF-NOT.</p>
<h2>Not picking a definition yet might be the best idea?</h2>
<p>Since I just came up with this alternate idea, I can't tell you how many uses I'd find for it.  I'll have to try looking around consciously looking for use cases.  Maybe it doesn't come up often enough, and people will miss the old UNLESS enough to be worth bringing it back.</p>
<p>I'll commit the new idea, and we can try it for a while.  But the work has already been done to excise UNLESS, and to safely detect old usages and give warnings.  There's a native IF-NOT synonym, and it's easy enough for people who want the old definition to say <code>unless: :if-not</code> if they like.</p>
<p>So instead of feeling pressure to decide one way or another, just leaving it undefined in Beta/One and revisiting it a later time might be best.</p>
<p>In any case, I think I can give a definite thumbs down to the idea of putting the left hand side in a BLOCK! to make it more friendly for "defaulting".  So that's out.</p>
        </div>

        <meta itemprop='headline' content='Hedging on UNLESS for Beta/One'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/gchiu'><span itemprop='name'>gchiu</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="881.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-10-29T05:20:05Z' class='post-time'>
                October 29, 2018,  5:20am
              </time>
              <meta itemprop='dateModified' content='2018-10-29T05:20:05Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>That looks much cleaner.  I'm in that camp that <em>unless</em> is not a good <em>if-not</em></p>
        </div>

        <meta itemprop='headline' content='Hedging on UNLESS for Beta/One'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="881.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2018-11-03T09:34:01Z'>
              <time itemprop='dateModified' datetime='2018-11-03T13:17:49Z' class='post-time'>
                November 3, 2018,  1:17pm
              </time>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>So far, I'm liking this new definition.  It still works for the original defaulting idea, too.</p>
<p>You can even use it for defaulting to a logic false, since your left value overrides any falsey right hand side, such as a NULL coming from a not-taken branching construct:</p>
<pre><code> &gt;&gt; thing: false unless (case [1 = 2 [&lt;nope&gt;] 3 = 4 [&lt;nope&gt;]])
 == #[false]
</code></pre>
<p>Here's a case from some debugger code.  /LIMIT is a refinement, and FRAMES is an argument to that refinement:</p>
<pre><code>max-rows: 20 unless (limit and [
    if blank? frames [
        99999 // as many frames as possible
    ] else [
        if frames &lt; 0 [
            fail ["Invalid limit of frames" frames]
        ]
        frames + 1 // add one for ellipsis
    ]
])
</code></pre>
<p>Cognitively it's a lot more clear to have the right hand side be an expression which is producing a truthy/falsey value.</p>
<p>You can contrast this with "classical Rebol style":</p>
<pre><code>max-rows: any [
     all [
         limit
         either blank? frames [
             99999 ; as many frames as possible
         ][
             if frames &lt; 0 [
                 fail ["Invalid limit of frames" frames]
             ]
             frames + 1 ; add one for ellipsis
         ]
    ]
    20
]
</code></pre>
<p>And you can still write it in such a way if you wanted to.  But I think using UNLESS with AND organizes it in a way that makes more sense here.</p>
<hr>
<p>In any case, with this adjustment, it's working out well enough that I think it's going to be a keeper...and the IF-NOT synonym is a waste of the word in comparison.</p>
        </div>

        <meta itemprop='headline' content='Hedging on UNLESS for Beta/One'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
