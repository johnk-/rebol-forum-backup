<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Should we kill off defaults-in-function-specs via GROUP! - Dialects/DSLs - AltRebol</title>
    <meta name="description" content="UPDATE: Hmmm, it seems that this feature is needed for &amp;lt;static&amp;gt; variables, because they need to be initialized once, hence can&amp;#39;t be done every function run.  So long as it exists for statics, we might keep it.  But I wi&amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="500.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Should we kill off defaults-in-function-specs via GROUP!&#39;" href="500.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/should-we-kill-off-defaults-in-function-specs-via-group/500" />
<meta name="twitter:url" content="https://forum.rebol.info/t/should-we-kill-off-defaults-in-function-specs-via-group/500" />
<meta property="og:title" content="Should we kill off defaults-in-function-specs via GROUP!" />
<meta name="twitter:title" content="Should we kill off defaults-in-function-specs via GROUP!" />
<meta property="og:description" content="UPDATE: Hmmm, it seems that this feature is needed for &lt;static&gt; variables, because they need to be initialized once, hence can&#39;t be done every function run.  So long as it exists for statics, we might keep it.  But I will say that the question of where to put them...and the fact no one is using these... raises questions about the feature that should probably be answered.    There was a speculative feature for putting defaults in function specs, by using a GROUP!:  foo: function [     x [integer..." />
<meta name="twitter:description" content="UPDATE: Hmmm, it seems that this feature is needed for &lt;static&gt; variables, because they need to be initialized once, hence can&#39;t be done every function run.  So long as it exists for statics, we might keep it.  But I will say that the question of where to put them...and the fact no one is using these... raises questions about the feature that should probably be answered.    There was a speculative feature for putting defaults in function specs, by using a GROUP!:  foo: function [     x [integer..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="3 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="3 â¤" />
<meta property="article:published_time" content="2018-01-28T10:22:46+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="500.html">Should we kill off defaults-in-function-specs via GROUP!</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/15" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Domains</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/dialects-dsls/18" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Dialects/DSLs</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="500.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2018-01-28T10:22:46Z'>
              <time itemprop='dateModified' datetime='2021-08-10T14:23:43Z' class='post-time'>
                August 10, 2021,  2:23pm
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p><strong>UPDATE:</strong> Hmmm, it seems that this feature is needed for <code>&lt;static&gt;</code> variables, because they need to be initialized once, hence can't be done every function run.  So long as it exists for statics, we might keep it.  But I will say that the question of where to put them...and the fact no one is using these... raises questions about the feature that should probably be answered.</p>
</blockquote>
<hr>
<p>There was a speculative feature for putting defaults in function specs, by using a GROUP!:</p>
<pre><code>foo: function [
    x [integer!]
    /amount
    y [integer!] (10)
][
    x + y
]
</code></pre>
<p>One key concept was that if it were in the spec, then some amount of automatic documentation could be provided from it.  But also it meant you could save yourself mentioning the name parameter twice, in the spec to name it and the body to default it.</p>
<p>But what turned out to happen is that it gets pretty much lost in the noise, when you have string-based parameter documentation.  It's easy to overlook, and raises questions of whether you want any relevant evaluations in the GROUP! to run once or every time.</p>
<pre><code>x: 100
foo: function [
    x [integer!]
    /amount
    y [integer!]
        {The integer to add, hey where do we put that default now?}
        {Does it go before or after these documentation lines?}
            (10 * x) ;-- is that relative to the parameter or to the global?
][...]
</code></pre>
<p>Not only that, if you want to COMPOSE function specs you run into the problem of dealing with any GROUP!s in it.  So not having GROUP!s have meaning keeps you from ending up with problems with escaping there.</p>
<blockquote>
<p><strong>UPDATE</strong>: <a href="https://forum.rebol.info/t/tag-compose-is-it-tag-specific-composition/979">Labeled compose</a> has pretty much solved this problem if it comes up.  So I don't think it's a concern anymore.</p>
</blockquote>
<p>In the meantime, we've had the pretty <a href="https://trello.com/c/cTCwc5vX">infix <strong>default</strong> operator</a> come along.  It gives a nice enough and unambiguous experience.  You can even do your defaulting inline if you like:</p>
<pre><code>foo: function [
    x [integer!]
    /amount
    y [integer!]
][
    x + y: default [10]
]
</code></pre>
<p>There was no particularly efficient trick for storing the values or putting them in the frame...all it was doing was putting code in the body of the function, just like having a bunch of DEFAULT lines up front.  The unimplemented automatic documentation feature raises a lot of questions...if it was calculated, do you want the calculated value or just what was in the GROUP! raw?  :-/</p>
<p>Add it all up, and the GROUP!-to-default-a-parameter looks like a turkey.  So should people just learn and love DEFAULT and <a href="https://trello.com/c/XnDsvsM0">its good friend MAYBE</a>, and we get rid of this?</p>
<hr>
<p><strong>Pursuant to my update, here's a real world example to ponder from <span class="mention">@codebybrett</span>'s READ-DEEP:</strong></p>
<pre><code>read-deep: function [
    {Return files and folders using recursive read strategy.}
    root [file! url! block!]
    /full
        {Include root path, retains full paths vs. returning relative paths.}
    /strategy
        {Allows Queue building to be overridden.}
    take [function!]
        {TAKE next item from queue, building the queue as necessary.}
][
    take: default [:read-deep-seq]
    ...
]
</code></pre>
<p>Let's imagine we want to move that default into the spec.  Where?</p>
<pre><code>read-deep: function [
    {Return files and folders using recursive read strategy.}
    root [file! url! block!]
    /full
        {Include root path, retains full paths vs. returning relative paths.}
    /strategy
        {Allows Queue building to be overridden.}
    take [function!] (:read-deep-seq)
        {TAKE next item from queue, building the queue as necessary.}
][
    ...
]
</code></pre>
<p>I sort of feel like it vanished into the noise.  The code is <em>shorter</em>, but I don't feel it's <em>clearer</em>.  Putting it on its own line is its own line seems a little weird:</p>
<pre><code>read-deep: function [
    {Return files and folders using recursive read strategy.}
    root [file! url! block!]
    /full
        {Include root path, retains full paths vs. returning relative paths.}
    /strategy
        {Allows Queue building to be overridden.}
    take [function!]
        (:read-deep-seq)
        {TAKE next item from queue, building the queue as necessary.}
][
    ...
]
</code></pre>
<p>If one is writing a quick-and-dirty function with less documentation, it might be clearer...people might find it expedient.  This is why it works okay for <code>&lt;local&gt;</code>s and <code>&lt;static&gt;</code>s</p>
<pre><code>read-deep: function [root /full /strategy take (:read-deep-seq)] [
    ...
]</code></pre>
        </div>

        <meta itemprop='headline' content='Should we kill off defaults-in-function-specs via GROUP!'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/IngoHohmann'><span itemprop='name'>IngoHohmann</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="500.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-29T17:40:54Z' class='post-time'>
                January 29, 2018,  5:40pm
              </time>
              <meta itemprop='dateModified' content='2018-01-29T17:40:54Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I actually am using it (though not in public code).<br>
I find the documentation feature is better this way, than with defaults in the function.</p>
        </div>

        <meta itemprop='headline' content='Should we kill off defaults-in-function-specs via GROUP!'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="500.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2018-01-30T00:08:09Z'>
              <time itemprop='dateModified' datetime='2019-05-06T08:48:54Z' class='post-time'>
                May 6, 2019,  8:48am
              </time>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="2" data-topic="500">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/ingohohmann/40/195_2.png" class="avatar"> IngoHohmann:</div>
<blockquote>
<p>I find the documentation feature is better this way, than with defaults in the function.</p>
</blockquote>
</aside>
<p>Do you have an opinion on where it should go?  Before documentation comments?  After?</p>
<p>Rebol2/R3-Alpha were agnostic about whether you put strings before or after the types:</p>
<pre><code>foo: func [
    x {This was legal} [integer!]
    y [integer!] {So was this}
][...]
</code></pre>
<p>So far Ren-C has carried over that policy...though I'm not sure I like it being that flexible.  I have a very strong preference for the types first.</p>
<blockquote>
<p><strong>UPDATE:</strong> I've changed my mind on this and now prefer descriptions first.  But the fact that I could see it either way suggests that either way perhaps should stay legal.</p>
</blockquote>
<p>The defaults I don't have a clear feeling about, because it looks noisy to me no matter what.</p>
        </div>

        <meta itemprop='headline' content='Should we kill off defaults-in-function-specs via GROUP!'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/IngoHohmann'><span itemprop='name'>IngoHohmann</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="500.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-01-30T14:39:38Z' class='post-time'>
                January 30, 2018,  2:39pm
              </time>
              <meta itemprop='dateModified' content='2018-01-30T14:39:38Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I, too have a preference for types first, but I am not sure whether there has to be a policy about it.</p>
<p>How about folding the default value into the type block?</p>
<pre><code>foo: func [
    /set
    x [integer!] (1) "The x"
    y [integer! (1)] "The y"
][...]</code></pre>
        </div>

        <meta itemprop='headline' content='Should we kill off defaults-in-function-specs via GROUP!'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="500.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2018-07-14T20:48:40Z'>
              <time itemprop='dateModified' datetime='2019-05-06T08:50:58Z' class='post-time'>
                May 6, 2019,  8:50am
              </time>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="2" data-topic="500" data-full="true">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/ingohohmann/40/195_2.png" class="avatar"> IngoHohmann:</div>
<blockquote>
<p>I actually am using it (though not in public code).</p>
<p>I find the documentation feature is better this way, than with defaults in the function.</p>
</blockquote>
</aside>
<p>So a thought I'm getting is that a SET-WORD! is a necessary part of the equation for defaulting.  Let's put aside the other arguments I've already made regarding things getting lost with the help strings.  Even this just doesn't look right:</p>
<pre><code>foo: function [
    /some-refinement
    :hard-quoted-thing (first [bar mumble])
][...]
</code></pre>
<p>And with statics, absence of a SET-WORD! looks bad too:</p>
<pre><code>foo: function [
    ...
  &lt;static&gt;
    data ([a b c])
]
</code></pre>
<p>Doesn't it come off much better when a SET-WORD! is used??</p>
<pre><code>foo: function [
    ...
  &lt;static&gt;
    data: ([a b c])
]
</code></pre>
<p>This is giving me a revised opinion of the role of SET-WORD! in function specs--as being reserved for relating to assignment.</p>
<p>That doesn't bode particularly well for <strong><code>return: [integer! text!]</code></strong>...and may suggest it should be <strong><code>&lt;return&gt; [integer! text!]</code></strong>.  One thing I will say is that it is a very common mistake for me to make to just say <strong>return [integer! text!]</strong> and have to figure out what I did wrong, while having the TAG! there is a pattern that is a less easy pattern to break.</p>
<p>So: I think the muddiness of defaulting refinement arguments within the specs (especially since they can't take on this SET-WORD! behavior) is at issue.  Also, the sequence of defaulting refinement arguments--since they come from the function instance--would likely want to be <em>after</em> the statics in runtime order, since they are specific to the instantiation.  Yet if they were part of the spec, they would appear <em>before</em> the statics.  That ordering is hard to relate to.</p>
<p>All told, I think defaulting for non-locals and non-statics needs to get the axe, here.  :-/</p>
<blockquote>
<p><strong>UPDATE:</strong> In light of new circumstances, and them not being taken out six months after me saying it, I no longer think this is so obvious.  But maybe it's still not going to make it as a Beta/One feature.</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='Should we kill off defaults-in-function-specs via GROUP!'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="500.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-08-03T23:16:33Z'>
              <time itemprop='dateModified' datetime='2021-08-03T23:17:40Z' class='post-time'>
                August 3, 2021, 11:17pm
              </time>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="500">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>There was no particularly efficient trick for storing the values or putting them in the frame...all it was doing was putting code in the body of the function, just like having a bunch of DEFAULT lines up front.</p>
</blockquote>
</aside>
<p>So it's been 3 whole years since this was discussed, but something actually has changed about the nature of the implementation of functions to where this can actually be an efficiency benefit.</p>
<p>Basically, there is no difference now between locals and specialized-out arguments.  This is because in the function specification block, I'm using the space where TYPESET! definitions for an unspecialized parameter would be to store specialized values.</p>
<p>In other words, the specializations and type definitions are folded into the same array...since the specialization value is type checked at specialization time the slot is available for the value itself.  It's a cool trick.</p>
<p><strong>And it means that we can actually set locals in the frame itself to initial values besides ~unset~.</strong></p>
<p>This only works if the value is fixed.  So for example:</p>
<pre><code>&gt;&gt; a: 1020

&gt;&gt; foo: func [x &lt;local&gt; y (a)] [print [x y]]

&gt;&gt; foo "before"
before 1020

&gt;&gt; a: 304

&gt;&gt; foo "after"
after 1020
</code></pre>
<p>It would have to capture the value as-is.  Anyway, it's not like this is a super huge priority I'm just pointing out that there is a new efficiency which comes from the unification of locals and specialization that wasn't there before, so this can actually offer a boost that DEFAULT in the body would not have.</p>
<p>But the value would have to be fixed in the frame, like a specialization.</p>
<p>And statics don't have any other option but to be initialized once, so it's consistent with that.</p>
        </div>

        <meta itemprop='headline' content='Should we kill off defaults-in-function-specs via GROUP!'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
