<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Another long-tail stand: No backslashes in FILE! - Datatypes - AltRebol</title>
    <meta name="description" content="There is behavior in Rebol2 and R3-Alpha where the scanner just automatically flips backslashes into forward slashes in FILE! 
rebol2&amp;gt;&amp;gt; %C\Projects
== %C/Projects

That&amp;#39;s the kind of random fiddling that I call &amp;quot;the wors&amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1336.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Another long-tail stand: No backslashes in FILE!&#39;" href="1336.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/another-long-tail-stand-no-backslashes-in-file/1336" />
<meta name="twitter:url" content="https://forum.rebol.info/t/another-long-tail-stand-no-backslashes-in-file/1336" />
<meta property="og:title" content="Another long-tail stand: No backslashes in FILE!" />
<meta name="twitter:title" content="Another long-tail stand: No backslashes in FILE!" />
<meta property="og:description" content="There is behavior in Rebol2 and R3-Alpha where the scanner just automatically flips backslashes into forward slashes in FILE!  rebol2&gt;&gt; %C\Projects == %C/Projects  That&#39;s the kind of random fiddling that I call &quot;the worst answer&quot;.  Red preserves the backslashes as-is, which is at least a slight improvement:  red&gt;&gt; %C\Projects == %C\Projects  But one theoretical benefit of being able to paste your file paths &quot;as-is&quot; is missing, because colons aren&#39;t legal:  red&gt;&gt; %C:\Projects *** Syntax Error: (l..." />
<meta name="twitter:description" content="There is behavior in Rebol2 and R3-Alpha where the scanner just automatically flips backslashes into forward slashes in FILE!  rebol2&gt;&gt; %C\Projects == %C/Projects  That&#39;s the kind of random fiddling that I call &quot;the worst answer&quot;.  Red preserves the backslashes as-is, which is at least a slight improvement:  red&gt;&gt; %C\Projects == %C\Projects  But one theoretical benefit of being able to paste your file paths &quot;as-is&quot; is missing, because colons aren&#39;t legal:  red&gt;&gt; %C:\Projects *** Syntax Error: (l..." />
<meta property="article:published_time" content="2020-09-22T00:33:04+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1336.html">Another long-tail stand: No backslashes in FILE!</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/8" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/development/datatypes.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Datatypes</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1336.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-09-22T00:33:04Z'>
              <time itemprop='dateModified' datetime='2020-09-22T09:56:51Z' class='post-time'>
                September 22, 2020,  9:56am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>There is behavior in Rebol2 and R3-Alpha where the scanner just automatically flips backslashes into forward slashes in FILE!</p>
<pre><code>rebol2&gt;&gt; %C\Projects
== %C/Projects
</code></pre>
<p>That's the kind of random fiddling that I call "the worst answer".  Red preserves the backslashes as-is, which is at least a slight improvement:</p>
<pre><code>red&gt;&gt; %C\Projects
== %C\Projects
</code></pre>
<p>But one theoretical benefit of being able to paste your file paths "as-is" is missing, because colons aren't legal:</p>
<pre><code>red&gt;&gt; %C:\Projects
*** Syntax Error: (line 1) invalid word at :\Projects
</code></pre>
<h2>Could Restricting FILE! Be A Selling Point?</h2>
<p>For whatever it's worth, UNIX does allow you to have backslashes in filenames.  (They typically have to be escaped (as <code>\\</code>) in shell commands.)</p>
<p>But mechanically speaking, FILE! does not need to be able to contain all characters...because TEXT! is the currency used for naming <em>local</em> files.  Red follows this convention:</p>
<pre><code>red&gt;&gt; to-local-file %a/b/c
== "a\b\c"  ; on Windows
</code></pre>
<p>But it does this regardless of if you give it a FILE! or a TEXT! as input:</p>
<pre><code>red&gt;&gt; to-local-file "a/b/c"
== "a\b\c"
</code></pre>
<p>Ren-C doesn't do this, and instead says that TO-LOCAL-FILE only works on FILE!...(unless you use the /PASS refinement, in which case TEXT! is allowed to pass through unmodified):</p>
<pre><code>ren-c&gt;&gt; to-local-file "a/b/c"
** Error: Filename already in local format (as a TEXT!), use /PASS to allow

ren-c&gt;&gt; to-local-file/pass "a/b/c"  ; pass-thru
== "a/b/c"
</code></pre>
<p>I think this suggests a means for sanity checking to prevail.  FILE! can be a tool for righteousness.</p>
<h2>What to do if you have a weird filename</h2>
<p>If you're making some kind of dialect with filenames in it, and you want to give people the ability to copy/paste literally things like <code>"C:\Projects\red\README.md"</code>, you use TEXT!.</p>
<pre><code>file-list: [
    %ren-c/README.md
    "C:\Projects\ren-c\LICENSE"
]
</code></pre>
<p>Maybe you have to decorate the TEXT! with something like <code>&lt;file&gt;</code>, if you have other baseline uses for strings in the dialect.</p>
<p>Then when you're writing your code and find you have a filename in a TEXT! you have these options:</p>
<ul>
<li>
<p><strong>With "sane" filenames, just use LOCAL-TO-FILE to get a FILE! out of it.</strong>  If you have something in your hand that's either a FILE! or a TEXT!, then use LOCAL-TO-FILE/PASS.  This should work for "sane" filenames and handle most cases.</p>
</li>
<li>
<p><strong>With "insane" filenames, your first instinct should be to just FIX them</strong> So let's say you have something like this on UNIX:</p>
<pre><code>file-list: [
    %/usr/local/bin/gcc
     "/home/crazy\file"
]
</code></pre>
<p>Just drop out to your OS shell and rename it with whatever tools you've got, <strong><code>mv crazy\\file sane-file</code></strong>.  Or automate it with CALL out to the shell, if you like.  We did you a solid by making LOCAL-TO-FILE refuse to call that a FILE!, and the world is a safer place.</p>
</li>
<li>
<p><strong>If you insist on keeping the file with its name and still operating in it, then manually use mechanisms that let you specify PORT! with TEXT!</strong>.  I don't know what the exact syntax of this is, but it would be in the spirit of:</p>
<pre><code>p: make port! compose [type: 'file name: (crazy-filename-as-text)]
data: read p
close p 
</code></pre>
<p>So that takes the place of the failing call to <strong>read file-to-local/pass crazy-filename-as-text</strong> which refused to make the FILE!.</p>
</li>
</ul>
<h2>I Think These Bold Moves are The Point</h2>
<p>Software has gotten so bad that we never know what's going on.  Some people just pile on layer after layer of filter...like the people who use ad blockers, and pass on URLs of crappy sites to others not knowing what version of it they're going to see.</p>
<p>Experienced programmers (or at least old ones who remember The Times Before) have a sense of when things have gone beyond control.  I think the long tail of development is that people shake down systems to try and get sanity out of them with guidelines that become common-sense ("don't put backslashes in filenames").</p>
<p>Here we have an opportunity with a data type that doesn't exist in nature, the FILE!.  We can make it discern from raw TEXT!.  And we can ask you to keep unprincipled things as TEXT!...letting those people with edge cases pay for it, and letting everyone else breathe easier.</p>
        </div>

        <meta itemprop='headline' content='Another long-tail stand: No backslashes in FILE!'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
