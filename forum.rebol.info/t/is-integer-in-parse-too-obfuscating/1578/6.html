<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Is INTEGER! in PARSE Too Obfuscating? - #6 by hostilefork - Parsing - AltRebol</title>
    <meta name="description" content="There&amp;#39;s a bit of a problem in the combinator-based UPARSE with the historical convention of an INTEGER! rule, where if you have two integers in a row it indicates a range of how many things to accept. 
rebol2&amp;gt; parse &amp;quot;**&amp;quot;&amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../1578.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Is INTEGER! in PARSE Too Obfuscating?&#39;" href="../1578.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/is-integer-in-parse-too-obfuscating/1578/6" />
<meta name="twitter:url" content="https://forum.rebol.info/t/is-integer-in-parse-too-obfuscating/1578/6" />
<meta property="og:title" content="Is INTEGER! in PARSE Too Obfuscating?" />
<meta name="twitter:title" content="Is INTEGER! in PARSE Too Obfuscating?" />
<meta property="og:description" content="I have implemented the REPEAT combinator.  It&#39;s now in traditional native PARSE as well as UPARSE.  It&#39;s a bit &quot;unfortunate&quot; that you have to put integer variables in a GROUP!:  &gt;&gt; var: 3 &gt;&gt; uparse? &quot;aaa&quot; [repeat (var) &quot;a&quot;] == #[true]  We could consider if non-literal integers act as rules that do not advance the input and synthesize an integer (in contrast with literal integers that indicate a repeat count).  That would make repeat var &quot;a&quot; different from repeat 3 &quot;a&quot; which creates irregularitie..." />
<meta name="twitter:description" content="I have implemented the REPEAT combinator.  It&#39;s now in traditional native PARSE as well as UPARSE.  It&#39;s a bit &quot;unfortunate&quot; that you have to put integer variables in a GROUP!:  &gt;&gt; var: 3 &gt;&gt; uparse? &quot;aaa&quot; [repeat (var) &quot;a&quot;] == #[true]  We could consider if non-literal integers act as rules that do not advance the input and synthesize an integer (in contrast with literal integers that indicate a repeat count).  That would make repeat var &quot;a&quot; different from repeat 3 &quot;a&quot; which creates irregularitie..." />
<meta property="article:published_time" content="2021-06-06T14:30:39+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../1578.html">Is INTEGER! in PARSE Too Obfuscating?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/15" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Domains</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/parsing/16" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Parsing</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1578.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-03-28T17:29:10Z'>
              <time itemprop='dateModified' datetime='2021-04-14T08:22:57Z' class='post-time'>
                April 14, 2021,  8:22am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>There's a bit of a problem in the combinator-based UPARSE with the historical convention of an INTEGER! rule, where if you have two integers in a row it indicates a range of how many things to accept.</p>
<pre><code>rebol2&gt; parse "**" [1 2 "*"]  ; between 1 and 2 stars
== true

rebol2&gt; parse "**" [3 4 "*"]  ; between 3 and 4 stars
== false
</code></pre>
<p>It doesn't fit into the "natural" pattern of combinators, e.g. where <strong>1 2 RULE</strong> is the same as <strong>1 [2 RULE]</strong>.</p>
<p>That doesn't mean it can't be done...it just means it would have to be part of the BLOCK! combinator specifically to notice integer sequences <em>(vs dispatching to some generic INTEGER! combinator)</em></p>
<p>But it brought me to a bigger question of how good an idea it is to have something that acts as a keyword be abstractable.  I've often been confused when I see something like:</p>
<pre><code> parse ... [... something rule ...]
</code></pre>
<p>And SOMETHING is actually an integer.  It isn't a rule in its own right, it's picking up the next rule...like a keyword.</p>
<p>As a reader, I feel like a keyword like REPEAT is missing here.  I don't know how much we want to stick to the rule that every word resolve to a parse rule...if we did, then you'd have to escape out of that with the likes of:</p>
<pre><code> parse ... [... repeat (2) rule ...]
 parse ... [... repeat (something + 1) rule ...]
</code></pre>
<p>But perhaps within PARSE, literal integers could be exempted...assumed to never match integers, but be passed as a parameter.</p>
<p>This doesn't answer what to do about ranges of integers (and BETWEEN is taken).  But just pointing out that I don't know that the current super-succinct integer syntax pays off all that well.  It might be better to be a little more verbose to make it clear that a repetition is happening.</p>
        </div>

        <meta itemprop='headline' content='Is INTEGER! in PARSE Too Obfuscating?'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="3" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../../each-versus-for-each-and-for-all/678/5.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://forum.rebol.info/t/each-versus-for-each-and-for-all/678/5'>
                      <span itemprop='name'>Each versus for-each and for-all</span>
                    </a>
                    <meta itemprop='position' content='1'>
                  </div>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../../name-for-rule-to-count-how-many-times-a-parse-rule-matches/1581.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://forum.rebol.info/t/name-for-rule-to-count-how-many-times-a-parse-rule-matches/1581'>
                      <span itemprop='name'>Name for rule to count how many times a PARSE rule matches?</span>
                    </a>
                    <meta itemprop='position' content='2'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1578.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-04-14T08:26:54Z' class='post-time'>
                April 14, 2021,  8:26am
              </time>
              <meta itemprop='dateModified' content='2021-04-14T08:26:54Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="1578">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>As a reader, I feel like a keyword like REPEAT is missing here.</p>
</blockquote>
</aside>
<p>I had a bit of a thought about the naming gap between COUNT-UP and REPEAT, which made me think about what REPEAT might mean that was different.</p>
<p>If REPEAT appeared in PARSE to mean "try and do this N times, otherwise fail" then it could mean that in ordinary code too.</p>
<pre><code> data: [a b]
 repeat 3 [not null? take data] then [
     print "Successfully took 3 elements"
 ] else [
     print "Failed to take 3 elements"
 ]
</code></pre>
<p>It's a thought on how the word might be used consistently.  Not necessarily a great thought, just a thought.</p>
        </div>

        <meta itemprop='headline' content='Is INTEGER! in PARSE Too Obfuscating?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1578.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-04-14T19:33:22Z'>
              <time itemprop='dateModified' datetime='2021-04-14T19:40:02Z' class='post-time'>
                April 14, 2021,  7:40pm
              </time>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p>If REPEAT appeared in PARSE to mean "try and do this N times, otherwise fail" then it could mean that in ordinary code too.</p>
</blockquote>
<p>Or... if LOOP is the arity-2 form of looping which takes a number, what if it was just the generic arity-2 form...and if you gave it a block it assumed that was the condition?</p>
<pre><code>x: 10
loop [x &gt; 0] [
    print "Counting down"
    x: x - 1
]

loop 10 [
   print "Counting down"
]
</code></pre>
<p>This would make WHILE like the truthy-based UNTIL...and it would be the same in PARSE and DO.</p>
<pre><code>data: [a b]
while [take data]
</code></pre>
<p>Though we've discussed LOOP being a more powerful dialect, due to the short word.  Maybe REPEAT should be the arity-1 while-like thing?</p>
<pre><code>repeat [take data]
</code></pre>
<p>And then it would make more sense in PARSE if it were arity-1 there too.  Anyway, I feel like the inconsistency of WHILE is a bit jarring at the moment.</p>
<p>Consistency on WHILE and UNTIL was an old-ish question which would be resolved if they were both arity-1.  I don't know that making LOOP polymorphic w.r.t. BLOCK! vs. INTEGER! was suggested before, though maybe it was.</p>
        </div>

        <meta itemprop='headline' content='Is INTEGER! in PARSE Too Obfuscating?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/IngoHohmann'><span itemprop='name'>IngoHohmann</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1578.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-04-20T14:10:24Z' class='post-time'>
                April 20, 2021,  2:10pm
              </time>
              <meta itemprop='dateModified' content='2021-04-20T14:10:24Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Replying to the original question:<br>
I've never had a problem with plain number for repeat <em>in my own code</em> but when trying to understand someone else's code I find it a lot harder to understand, especially if words are used.</p>
        </div>

        <meta itemprop='headline' content='Is INTEGER! in PARSE Too Obfuscating?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1578.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-04-22T10:43:40Z'>
              <time itemprop='dateModified' datetime='2021-04-22T11:56:51Z' class='post-time'>
                April 22, 2021, 11:56am
              </time>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="IngoHohmann" data-post="4" data-topic="1578">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/ingohohmann/40/195_2.png" class="avatar"> IngoHohmann:</div>
<blockquote>
<p>when trying to understand someone else's code I find it a lot harder to understand, especially if words are used.</p>
</blockquote>
</aside>
<p>There's a basic question of whether abstractions-via-WORD! should be legal or not.  Rebol2 allows you to abstract keywords themselves:</p>
<pre><code>rebol2&gt; keyword: 'some
== some

rebol2&gt; parse "aaa" [keyword "a"]
== true
</code></pre>
<p>R3-Alpha did not support this:</p>
<pre><code>r3-alpha&gt; keyword: 'some
== some

r3-alpha&gt; parse "aaa" [keyword "a"]
** Script error: PARSE - invalid rule or usage of rule: keyword
</code></pre>
<p>Nor does Red:</p>
<pre><code>red&gt; keyword: 'some
== some

red&gt; parse "aaa" [keyword "a"]
*** Script Error: PARSE - invalid rule or usage of rule: some
</code></pre>
<p><strong>I don't think it's a good idea to permit WORD!-abstraction of PARSE keywords.</strong>  There does need to be a mechanism by which you can adjust the set of combinators...which I think is better hooked other ways.  That's the angle being pursued with the Redbol compatibility initiative (UPARSE2).</p>
<p>There is currently a workaround for this:</p>
<pre><code>&gt;&gt; keyword: 'some

&gt;&gt; uparse "aaa" [:(keyword) "a"]
== "aaa"
</code></pre>
<p>GET-GROUP! lets you do a sort of "live-COMPOSE" to use evaluated material as a rule.  While it's mostly used to splice in calculated BLOCK!s or LOGIC!s to continue the parse or not, it currently lets you put in lone keywords too.</p>
<p><strong>I think limiting the WORD!-abstraction of keywords probably carries a lesson for INTEGER!s being abstracted as well.</strong>  Perhaps you can use them literally in rules, but you use something like REPEAT when they are abstracted.</p>
<h2>Still Pondering Arity-2 LOOP and Arity-1 WHILE</h2>
<p>I've long wondered if WHILE and UNTIL should be paired.  The idea of making them both arity-1 came up but was often dismissed due to how much people like having an arity-2 WHILE.</p>
<p>But if you could write <strong>loop 2 [...]</strong> or <strong>loop [x &gt; 0] [...]</strong>, that seems to make up for it.  And it could help arity-1 WHILE make more sense in PARSE.</p>
<p>Then LOOP could step in to address this integer case.  It wouldn't help with the idea of matching a range of times, which doesn't have any parallels in DO.  (Range implies you are heeding the count <em>and</em> testing the truthiness of the loop... no such construct exists in DO.)</p>
<p><em>I've only used the range-of-times check fairly rarely, myself.</em>  I wonder how much worse it would be to use TALLY.  So think of:</p>
<pre><code> min max rule
</code></pre>
<p>...represented as:</p>
<pre><code> let n: tally rule, :(did all [n &gt;= min, n &lt;= max])
</code></pre>
<p>This gives you more freedom in expressing the bounds, while not being optimized for the specific case.  It also means that if N is much greater than max, you'll waste time running rule you wouldn't have to.</p>
        </div>

        <meta itemprop='headline' content='Is INTEGER! in PARSE Too Obfuscating?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1578.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-06-06T14:30:39Z'>
              <time itemprop='dateModified' datetime='2021-06-06T16:18:16Z' class='post-time'>
                June 6, 2021,  4:18pm
              </time>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p><a href="https://github.com/metaeducation/ren-c/commit/3ad5499fda1d75fb28a1489669b7506d33a1f595"><strong>I have implemented the REPEAT combinator.</strong></a>  It's now in traditional native PARSE as well as UPARSE.</p>
<p>It's a bit "unfortunate" that you have to put integer variables in a GROUP!:</p>
<pre><code>&gt;&gt; var: 3
&gt;&gt; uparse? "aaa" [repeat (var) "a"]
== #[true]
</code></pre>
<p>We could consider if non-literal integers act as rules that do not advance the input and synthesize an integer <em>(in contrast with literal integers that indicate a repeat count)</em>.  That would make <strong>repeat var "a"</strong> different from <strong>repeat 3 "a"</strong> which creates irregularities.</p>
<p><strong>But on the plus side of the current behavior, you can write rules that get the repeat count from the input and apply it immediately.</strong>  The following example is contrived, but maybe not so much so that you couldn't see something like it ever happening:</p>
<pre><code>&gt;&gt; uparse? ["b" 3 "b" "b" "b"] [rule: &lt;any&gt;, repeat integer! rule]
== #[true]
</code></pre>
<aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="1578">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>This doesn't answer what to do about ranges of integers</p>
</blockquote>
</aside>
<p>I think ranges of integers is a sufficiently rare pattern to warrant a combinator specific to the purpose, rather than breaking the coherence of the model to where <strong>2 [3 rule]</strong> and <strong>2 3 rule</strong> have distinct behavior.</p>
<p>But I do notice that the pattern <strong>0 n rule</strong> is really just <strong>repeat (n) opt rule</strong>.</p>
<p>More generally <strong>repeat m n rule</strong> can be written as <strong>repeat (m) rule, repeat (n - m) opt rule</strong></p>
<p>So I'm going to be killing off ranged repetition in native PARSE.  We can discuss what the real answer should be, but that pattern can be used in the meantime.</p>
        </div>

        <meta itemprop='headline' content='Is INTEGER! in PARSE Too Obfuscating?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../../getting-hooks-into-events-during-parse/1640/5.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://forum.rebol.info/t/getting-hooks-into-events-during-parse/1640/5'>
                      <span itemprop='name'>Getting Hooks Into &quot;Events&quot; during PARSE</span>
                    </a>
                    <meta itemprop='position' content='2'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1578.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-08-14T00:17:47Z' class='post-time'>
                August 14, 2021, 12:17am
              </time>
              <meta itemprop='dateModified' content='2021-08-14T00:17:47Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="hostilefork" data-post="6" data-topic="1578">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>I think ranges of integers is a sufficiently rare pattern to warrant a combinator specific to the purpose, rather than breaking the coherence of the model to where <strong>2 [3 rule]</strong> and <strong>2 3 rule</strong> have distinct behavior.</p>
</blockquote>
</aside>
<p>Er...duh...why can't REPEAT just take a BLOCK! or somesuch?</p>
<pre><code>uparse "aaa" [repeat ([2 3]) "a"]
</code></pre>
<p>Got variables?  GET-BLOCK! is your friend for a lighter notation than REDUCE:</p>
<pre><code>uparse "..." [repeat (:[min max]) "a"]
</code></pre>
<p>Not entirely sure why this didn't occur to me sooner, but.  Now it did occur to me, so...we get it.  <img src="../../../images/emoji/twitter/slight_smile.png%3Fv=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>But we've learned some things in the meantime.  The OPT rules I had put in as substitutes were what exposed things like the weaknesses above.</p>
        </div>

        <meta itemprop='headline' content='Is INTEGER! in PARSE Too Obfuscating?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1578.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-10-15T19:07:29Z' class='post-time'>
                October 15, 2021,  7:07pm
              </time>
              <meta itemprop='dateModified' content='2021-10-15T19:07:29Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="1578">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>As a reader, I feel like a keyword like REPEAT is missing here. I don't know how much we want to stick to the rule that every word resolve to a parse rule...if we did, then you'd have to escape out of that with the likes of:</p>
<pre><code>parse ... [... repeat (2) rule ...]
parse ... [... repeat (something + 1) rule ...]
</code></pre>
<p>But perhaps within PARSE, literal integers could be exempted...assumed to never match integers, but be passed as a parameter.</p>
</blockquote>
</aside>
<p>It's easy to get bitten by using literal integers with REPEAT.  You mean to write <strong>repeat (2) rule</strong> but you write <strong>repeat 2 rule</strong>, which in the generic architecture assumes that you want to use the result of <code>[2 rule]</code> as the repeat count for whatever comes afterward.</p>
<p>Most of the time you'll get an error, but the error isn't easy to sort out.</p>
<p>If we had skippable arguments for combinators, it might have a hard literal INTEGER! argument...and if it found there was one there, it could give an error.  That might be better than nothing, though any error in the other arguments might pre-empt being able to react to it (since you could only raise an error on the argument once the combinator was running).</p>
<p>This leads me to believe that REPEAT might be a case where it needs to use a different parameter convention which would give a coherent error if you put a literal integer in that slot.</p>
        </div>

        <meta itemprop='headline' content='Is INTEGER! in PARSE Too Obfuscating?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
