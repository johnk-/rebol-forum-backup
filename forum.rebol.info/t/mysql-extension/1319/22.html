<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>MySQL extension - #22 by hostilefork - Databases - AltRebol</title>
    <meta name="description" content="For the MySQL extension, I now have a basic set of functions implemented. Here is a list of all functions and the status. I would like to know if the functions I still plan to implement are worth the trouble or can be sk&amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../1319%3Fpage=2.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;MySQL extension&#39;" href="../1319.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/mysql-extension/1319/22" />
<meta name="twitter:url" content="https://forum.rebol.info/t/mysql-extension/1319/22" />
<meta property="og:title" content="MySQL extension" />
<meta name="twitter:title" content="MySQL extension" />
<meta property="og:description" content="The prepared statements offer a  &quot;placeholder&quot; form, similar to ODBC...which may be better than using the escaping form:  &quot;As an alternative to explicitly escaping special characters, many MySQL APIs provide a placeholder capability that enables you to insert special markers into a statement string, and then bind data values to them when you issue the statement. In this case, the API takes care of escaping special characters in the values for you.&quot;  An advantage of using that form would be that..." />
<meta name="twitter:description" content="The prepared statements offer a  &quot;placeholder&quot; form, similar to ODBC...which may be better than using the escaping form:  &quot;As an alternative to explicitly escaping special characters, many MySQL APIs provide a placeholder capability that enables you to insert special markers into a statement string, and then bind data values to them when you issue the statement. In this case, the API takes care of escaping special characters in the values for you.&quot;  An advantage of using that form would be that..." />
<meta property="article:published_time" content="2020-10-13T15:29:20+00:00" />
<meta property="og:ignore_canonical" content="true" />

        <link rel="prev" href="../1319.html">


    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../1319.html">MySQL extension</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/15" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Domains</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/other-database/27" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Databases</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-09-22T14:49:15Z'>
              <time itemprop='dateModified' datetime='2020-09-22T14:49:49Z' class='post-time'>
                September 22, 2020,  2:49pm
              </time>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="4" data-topic="1319">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/iarnold/40/226_2.png" class="avatar"> iArnold:</div>
<blockquote>
<p>Unfortunately mysql_get_option and mysql_reset_connection were not present in the mysql.h header file for the CentOS 7 operating system, as it is pre 2013.</p>
</blockquote>
</aside>
<p>Is your web host running a pre-2013 distribution of an OS?  :-/</p>
<p>Well, we do like to have things tested on a wide set of platforms...and within reason, old solid ones help with dependency control.</p>
<p>People apparently have used <a href="https://derekweitzel.com/2016/05/03/building-centos-packages-on-travisci/" rel="nofollow noopener">Docker to run CentOS 7 on Travis</a>.  So that would be neat to see used for both the build and the tests.</p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/iArnold'><span itemprop='name'>iArnold</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-09-23T08:35:25Z'>
              <time itemprop='dateModified' datetime='2020-09-29T14:39:20Z' class='post-time'>
                September 29, 2020,  2:39pm
              </time>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="5" data-topic="1319">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>Is your web host running a pre-2013 distribution of an OS? :-/</p>
</blockquote>
</aside>
<p>I have changed the post, I think that is just a part that is not provided for by the CentOS maintainers for any (good?) reason. I believe the hosting is taking care of keeping up to date on security updates, ah and yes they are using MariaDB which may not have that problem. I wanted to stick to MySQL but I'll see if there is a different option, creating another VM soon. (NOTE_1)</p>
<p>Perhaps I could make an compiler directive MYSQL_PRE_2013 or alike that will not include some functions.</p>
<p>I had a look at docker and CentOS 7 when I had some trouble with the VM, but it was a lot of information coming towards me and I did not see how to make it work for me. Free time is even today a scarce commodity.</p>
<p>If I understand the article correct, Travis-CI is using Ubuntu to test stuff on, therefor they use Docker to get an instance of CentOS (an EL type OS, RHEL stands for Red Hat Enterprise Linux(?)) running and execute their testscripts on that.<br>
Docker is not so hard, but getting Travis for our repo is perhaps harder.</p>
<p>(NOTE_1) Created a new VM and installed MariaDB and the -devel package. The mysql.h file still was the old "Copyright (c) 2000, 2012, Oracle and/or its affiliates" version.  And "mysql -V<br>
mysql  Ver 15.1 Distrib 5.5.65-MariaDB, for Linux (x86_64) using readline 5.1", I could not find a mariadb.h, they use mysql.h also(?).<br>
As turns out this version is coming with the OS, but it will not automatically upgrade to a newer version like Distrib 10.2.33-MariaDB without the admin to do this explicitly by uninstalling the old version and ordering yum to go for the 10.2 version.<br>
So I did that. And guess what? The comments still mention the copyright until 2012 like before, terrible! But... the functions missing before are now present! So it is a newer version</p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/iArnold'><span itemprop='name'>iArnold</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-10-01T13:18:05Z'>
              <time itemprop='dateModified' datetime='2020-10-01T18:03:51Z' class='post-time'>
                October 1, 2020,  6:03pm
              </time>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Another soap episode. Off course the program from the new VM crashes on my hostproviders server.<br>
Because it cannot find the libmariadb.so.3 library file on its system.<br>
I checked and these are the mysql_config data on the old</p>
<blockquote>
<p>Usage: /bin/mysql_config [OPTIONS]<br>
Options:<br>
--cflags         [-I/usr/include/mysql]<br>
--include        [-I/usr/include/mysql]<br>
--libs           [-L/usr/lib64/mysql -lmysqlclient -lpthread -lz -lm -ldl -lssl -lcrypto]<br>
--libs_r         [-L/usr/lib64/mysql -lmysqlclient -lpthread -lz -lm -ldl -lssl -lcrypto]<br>
--plugindir      [/usr/lib64/mysql/plugin]<br>
--socket         [/var/lib/mysql/mysql.sock]<br>
--port           [0]<br>
--version        [5.5.65]<br>
--libmysqld-libs [-L/usr/lib64/mysql -lmysqld]<br>
--variable=VAR   VAR is one of:<br>
pkgincludedir [/usr/include/mysql]<br>
pkglibdir     [/usr/lib64/mysql]<br>
plugindir     [/usr/lib64/mysql/plugin]</p>
</blockquote>
<p>and on the new VM</p>
<blockquote>
<p>Usage: /bin/mysql_config [OPTIONS]<br>
Options:<br>
--cflags         [-I/usr/include/mysql -I/usr/include/mysql/mysql]<br>
--include        [-I/usr/include/mysql -I/usr/include/mysql/mysql]<br>
--libs           [-L/usr/lib64/ -lmariadb]<br>
--libs_r         [-L/usr/lib64/ -lmariadb]<br>
--plugindir      [/usr/lib64/mysql/plugin]<br>
--socket         [/var/lib/mysql/mysql.sock]<br>
--port           [3306]<br>
--version        [10.2.33]<br>
--libmysqld-libs [-L/usr/lib64  -lmysqld -lpthread -lz -lm -ldl -lssl -lcrypto -lcrypt -llzma -laio -lsystemd]<br>
--variable=VAR   VAR is one of:<br>
pkgincludedir [/usr/include/mysql]<br>
pkglibdir     [/usr/lib64]<br>
plugindir     [/usr/lib64/mysql/plugin]</p>
</blockquote>
<p>The error I get is</p>
<blockquote>
<p>error while<br>
loading shared libraries: libmariadb.so.3: cannot open shared object<br>
file: No such file or directory</p>
</blockquote>
<p>As the providers says this library is present but not at /usr/lib64/ but at /usr/lib64/pleskspecificdirectory/ and indeed (I have SSH connection now) I can affirm it is at that location. It is also in /lib64/.../ .</p>
<p>So I changed the link step to not use `mysql_config --libs` but to use this specific location <code>-L/usr/lib64/pleskspecificdirectory/ -lmariadb</code> and I copied the libfile also to that very same location on my new VM.</p>
<p>Linking without such an additive results in errors, using the above or using the `mysql_config --libs` result libraries from the old VM is OK and gets an executable.</p>
<p>Yet both of those still err on the same problem.</p>
<p>Just one thing I noticed.. the r3's that are produced by linking one way or the other are exactly the same size, where I expect a location of different length could make a difference.</p>
<p>Also libmysqlclient.so.18 is present in the /usr/lib64/ directory.<br>
That is thus why the old VM can create the working version.</p>
<p>I did an ldd of the sources I have created and found that the libmariadb.so.3 is sought inside the common /usr/lib64 directory, where it is not at.<br>
I hoped the -L would make it search for the directory provided BUT APPARENTLY not.<br>
Any suggestions are welcome.</p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-10-01T19:51:53Z'>
              <time itemprop='dateModified' datetime='2020-10-01T20:04:25Z' class='post-time'>
                October 1, 2020,  8:04pm
              </time>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="7" data-topic="1319">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/iarnold/40/226_2.png" class="avatar"> iArnold:</div>
<blockquote>
<p>I hoped the -L would make it search for the directory provided BUT APPARENTLY not.</p>
</blockquote>
</aside>
<p>-L tells the linker where to search for libraries at compile time...for putting code directly into the executable.  These are <code>.a</code> files.</p>
<p>But the <code>.so</code> files are like DLLs.  They aren't linked into your program, but expected to be somewhere around on your system.  As with DLLs, sometimes the easiest thing to do is just copy it to the same directory with your executable (or better yet, make a file linkage with <code>ln</code>).</p>
<p>You can use <a href="https://unix.stackexchange.com/questions/120015/how-to-find-out-the-dynamic-libraries-executables-loads-when-run" rel="nofollow noopener">ldd to dump out the .so files that an executable looks for</a></p>
<p>You can <a href="https://unix.stackexchange.com/questions/22926/where-do-executables-look-for-shared-objects-at-runtime" rel="nofollow noopener">read up on rules about where the dynamic loader looks</a>.</p>
<p>So to put the pieces of the puzzle together, you need to make sure that the executable you build is looking for an .so file available on the target.  If all else fails, find the .so on your local machine and put it in the same directory as the executable.</p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/iArnold'><span itemprop='name'>iArnold</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-10-02T13:23:37Z'>
              <time itemprop='dateModified' datetime='2020-10-02T13:26:12Z' class='post-time'>
                October 2, 2020,  1:26pm
              </time>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Somehow I tricked the entire thing and convinced it to use the libmysqlclient.so.18, last two lines of my linking step</p>
<pre><code>vector-init.o objs/view/mod-view.o objs/tmp-mod-view-init.o -lm -ldl 
-L/usr/lib64/ -lmysqlclient -lpthread -lz -lm -ldl -lssl -lcrypto objs/main.o
</code></pre>
<p>but though things work..</p>
<p>First I got</p>
<pre><code>ldd r3
linux-vdso.so.1 =&gt;  (0x00007ffed2df4000)
libm.so.6 =&gt; /lib64/libm.so.6 (0x00007ff098f10000)
libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007ff098d0c000)
libmariadb.so.3 =&gt; not found
libc.so.6 =&gt; /lib64/libc.so.6 (0x00007ff09893e000)
/lib64/ld-linux-x86-64.so.2 (0x00007ff099212000)
</code></pre>
<p>Which already was shorter than the 'complete' list I got before, but look at it now:</p>
<pre><code>linux-vdso.so.1 =&gt;  (0x00007ffe2d692000)
libm.so.6 =&gt; /lib64/libm.so.6 (0x00007f4149ba2000)
libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f414999e000)
libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007f4149782000)
libz.so.1 =&gt; /lib64/libz.so.1 (0x00007f414956c000)
libssl.so.10 =&gt; /lib64/libssl.so.10 (0x00007f41492fa000)
libcrypto.so.10 =&gt; /lib64/libcrypto.so.10 (0x00007f4148e97000)
libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f4148ac9000)
/lib64/ld-linux-x86-64.so.2 (0x00007f4149ea4000)
libgssapi_krb5.so.2 =&gt; /lib64/libgssapi_krb5.so.2 (0x00007f414887c000)
libkrb5.so.3 =&gt; /lib64/libkrb5.so.3 (0x00007f4148593000)
libcom_err.so.2 =&gt; /lib64/libcom_err.so.2 (0x00007f414838f000)
libk5crypto.so.3 =&gt; /lib64/libk5crypto.so.3 (0x00007f414815c000)
libkrb5support.so.0 =&gt; /lib64/libkrb5support.so.0 (0x00007f4147f4c000)
libkeyutils.so.1 =&gt; /lib64/libkeyutils.so.1 (0x00007f4147d48000)
libresolv.so.2 =&gt; /lib64/libresolv.so.2 (0x00007f4147b2e000)
libselinux.so.1 =&gt; /lib64/libselinux.so.1 (0x00007f4147907000)
libpcre.so.1 =&gt; /lib64/libpcre.so.1 (0x00007f41476a5000)
</code></pre>
<p>No libmariablahblahblah but also no libmysqlclientetc !<br>
So got it working but totally dissatisfied because I do not understand <img src="../../../images/emoji/twitter/frowning.png%3Fv=9" title=":frowning:" class="emoji" alt=":frowning:"></p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/iArnold'><span itemprop='name'>iArnold</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-10-02T13:53:06Z'>
              <time itemprop='dateModified' datetime='2020-10-02T14:35:21Z' class='post-time'>
                October 2, 2020,  2:35pm
              </time>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Yes I think I nailed it!</p>
<p>When searching for "how does gcc know which libs to load at runtime"  this sent me <a href="https://unix.stackexchange.com/questions/22926/where-do-executables-look-for-shared-objects-at-runtime" rel="nofollow noopener">To the link on Stackexchange that Brian already posted before</a> And from here I found my definitive clue at <a href="https://www.cs.swarthmore.edu/~newhall/unixhelp/howto_C_libraries.html" rel="nofollow noopener">howto C Libraries</a> But you need to read carefully.</p>
<p>The hint that sent me of in the right direction was</p>
<blockquote>
<p>If you create your own shared object files and do not install them in /usr/lib, then you need to set your LD_LIBRARY_PATH environment variable so that the runtime linker can find them and load them at run time. For example, if I put my .so files in a directory named lib in my home directory, I'd set my LD_LIBRARY_PATH enviroment to the following:</p>
<p>if running bash:<br>
export LD_LIBRARY_PATH=/terrible/new/pathname/lib:$LD_LIBRARY_PATH</p>
<p>if running tcsh:<br>
setenv LD_LIBRARY_PATH /terrible/new/pathname/lib:$LD_LIBRARY_PATH</p>
</blockquote>
<p>So I went ahead and appended the cruel directoryname used by the Plesk creators. (My best guess is they did this on purpose because they are running MySQL and MariaDB instances on their platforms and do not want them to interfere with each other)</p>
<p>Now the linking returns an executable with the proper library found</p>
<pre><code>ldd r3
linux-vdso.so.1 =&gt;  (0x00007ffc1e72b000)
libm.so.6 =&gt; /lib64/libm.so.6 (0x00007fc9ae615000)
libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007fc9ae411000)
libmariadb.so.3 =&gt; /usr/lib64/libmariadbclient-plesk-3.0/libmariadb.so.3 (0x00007fc9ae1bb000)
libc.so.6 =&gt; /lib64/libc.so.6 (0x00007fc9added000)
/lib64/ld-linux-x86-64.so.2 (0x00007fc9ae917000)
libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007fc9adbd1000)
libz.so.1 =&gt; /lib64/libz.so.1 (0x00007fc9ad9bb000)
libssl.so.10 =&gt; /lib64/libssl.so.10 (0x00007fc9ad749000)
libcrypto.so.10 =&gt; /lib64/libcrypto.so.10 (0x00007fc9ad2e6000)
libgssapi_krb5.so.2 =&gt; /lib64/libgssapi_krb5.so.2 (0x00007fc9ad099000)
libkrb5.so.3 =&gt; /lib64/libkrb5.so.3 (0x00007fc9acdb0000)
libcom_err.so.2 =&gt; /lib64/libcom_err.so.2 (0x00007fc9acbac000)
libk5crypto.so.3 =&gt; /lib64/libk5crypto.so.3 (0x00007fc9ac979000)
libkrb5support.so.0 =&gt; /lib64/libkrb5support.so.0 (0x00007fc9ac769000)
libkeyutils.so.1 =&gt; /lib64/libkeyutils.so.1 (0x00007fc9ac565000)
libresolv.so.2 =&gt; /lib64/libresolv.so.2 (0x00007fc9ac34b000)
libselinux.so.1 =&gt; /lib64/libselinux.so.1 (0x00007fc9ac124000)
libpcre.so.1 =&gt; /lib64/libpcre.so.1 (0x00007fc9abec2000)
</code></pre>
<p>That looks a whole lot better.</p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-02T15:23:15Z' class='post-time'>
                October 2, 2020,  3:23pm
              </time>
              <meta itemprop='dateModified' content='2020-10-02T15:23:15Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="9" data-topic="1319">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/iarnold/40/226_2.png" class="avatar"> iArnold:</div>
<blockquote>
<p>First I got</p>
<pre><code>ldd r3
linux-vdso.so.1 =&gt;  (0x00007ffed2df4000)
libm.so.6 =&gt; /lib64/libm.so.6 (0x00007ff098f10000)
libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007ff098d0c000)
libmariadb.so.3 =&gt; not found
libc.so.6 =&gt; /lib64/libc.so.6 (0x00007ff09893e000)
/lib64/ld-linux-x86-64.so.2 (0x00007ff099212000)
</code></pre>
</blockquote>
</aside>
<p>It's all pretty messy stuff.  But in this particular day and age, computers aren't psychic.  So if you change anything that anything else depends on, everything has to be explicit.</p>
<p>My biggest complaint about these library dependencies isn't that <em>they exist</em>, but that they are shuffled so far into darkness that you cannot reason about them.  Once you learn about tools like <code>ldd</code> you can start to do that... and you are.  So you're actually learning some things.  Good work.   <img src="../../../images/emoji/twitter/slight_smile.png%3Fv=9" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/iArnold'><span itemprop='name'>iArnold</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-02T17:24:00Z' class='post-time'>
                October 2, 2020,  5:24pm
              </time>
              <meta itemprop='dateModified' content='2020-10-02T17:24:00Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thank you Brian!<br>
Strange thing is how it now looks to me. Because I added that directory to a path, it is like any executable starting up is going "hey listen everybody I need to do some work and I have to use a list of functions. First function is function A anybody familiar with a function A? Ah, according to some magic info I just found, there should be a library by the name of libA that should know function A. Are you there libA?"<br>
<img src="../../../images/emoji/twitter/smiley.png%3Fv=9" title=":smiley:" class="emoji" alt=":smiley:"></p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/iArnold'><span itemprop='name'>iArnold</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-03T12:14:01Z' class='post-time'>
                October 3, 2020, 12:14pm
              </time>
              <meta itemprop='dateModified' content='2020-10-03T12:14:01Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>My VM froze on me just after I had tested the program on the host and before I could save the correct link step used.<br>
I had to reset.<br>
Now I have a working program again, but the ldd dependencies do not mention the libmariadbclient (nor some libmysql)</p>
<pre><code>linux-vdso.so.1 =&gt;  (0x00007ffcb4f1d000)
libm.so.6 =&gt; /lib64/libm.so.6 (0x00007f04c07c3000)
libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f04c05bf000)
libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007f04c03a3000)
libz.so.1 =&gt; /lib64/libz.so.1 (0x00007f04c018d000)
libssl.so.10 =&gt; /lib64/libssl.so.10 (0x00007f04bff1b000)
libcrypto.so.10 =&gt; /lib64/libcrypto.so.10 (0x00007f04bfab8000)
libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f04bf6ea000)
/lib64/ld-linux-x86-64.so.2 (0x00007f04c0ac5000)
libgssapi_krb5.so.2 =&gt; /lib64/libgssapi_krb5.so.2 (0x00007f04bf49d000)
libkrb5.so.3 =&gt; /lib64/libkrb5.so.3 (0x00007f04bf1b4000)
libcom_err.so.2 =&gt; /lib64/libcom_err.so.2 (0x00007f04befb0000)
libk5crypto.so.3 =&gt; /lib64/libk5crypto.so.3 (0x00007f04bed7d000)
libkrb5support.so.0 =&gt; /lib64/libkrb5support.so.0 (0x00007f04beb6d000)
libkeyutils.so.1 =&gt; /lib64/libkeyutils.so.1 (0x00007f04be969000)
libresolv.so.2 =&gt; /lib64/libresolv.so.2 (0x00007f04be74f000)
libselinux.so.1 =&gt; /lib64/libselinux.so.1 (0x00007f04be528000)
libpcre.so.1 =&gt; /lib64/libpcre.so.1 (0x00007f04be2c6000)
</code></pre>
<p>So how is this possible? Did I static link the library, the program is about 0.3 MB larger..</p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-03T19:32:57Z' class='post-time'>
                October 3, 2020,  7:32pm
              </time>
              <meta itemprop='dateModified' content='2020-10-03T19:32:57Z'>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="13" data-topic="1319">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/iarnold/40/226_2.png" class="avatar"> iArnold:</div>
<blockquote>
<p>Did I static link the library, the program is about 0.3 MB larger..</p>
</blockquote>
</aside>
<p>If it works, that's almost a certainty.</p>
<p>If you want to go even deeper into understanding what's in an executable, there is <strong><code>nm</code></strong>.</p>
<p><a href="https://www.mkssoftware.com/docs/man1/nm.1.asp" class="onebox" target="_blank" rel="nofollow noopener">https://www.mkssoftware.com/docs/man1/nm.1.asp</a></p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/iArnold'><span itemprop='name'>iArnold</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-04T15:09:03Z' class='post-time'>
                October 4, 2020,  3:09pm
              </time>
              <meta itemprop='dateModified' content='2020-10-04T15:09:03Z'>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I got a libmariadbclient.a file in my /usr/lib64 on my local VM, that explains.</p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/iArnold'><span itemprop='name'>iArnold</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-05T19:59:08Z' class='post-time'>
                October 5, 2020,  7:59pm
              </time>
              <meta itemprop='dateModified' content='2020-10-05T19:59:08Z'>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>So I experimented more with this and the conclusion is a little disappointing.<br>
Because the loader searches on runtime in the default directories for the shared library, it will not find the one in the special directory. Using the environment variable $LD_LIBRARY_PATH can help on compile time to find the dependency, and when run. But the environment variable is not persistent between SSH sessions so setting this is of no use in my case.<br>
The best option I have for now is continuing with linking the .a library (so remove or rename the .so one) and making it static.<br>
I suspect the PHP on this system uses the very same method and is also not using the .so lib.</p>
<p>And just when writing this up, another idea pops up. Passing the environment variable through the .htaccess file using SetEnv directive.</p>
<p>Well that would not work because the libname is not .so but .so.3 and a symlink is also not an option.<br>
Putting the .so.3 and a symlink .so in the directory (cgi-bin) is also no option, because that also does not work. (Strange but true)</p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-05T22:35:33Z' class='post-time'>
                October 5, 2020, 10:35pm
              </time>
              <meta itemprop='dateModified' content='2020-10-05T22:35:33Z'>
          <span itemprop='position'>#17</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="16" data-topic="1319">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/iarnold/40/226_2.png" class="avatar"> iArnold:</div>
<blockquote>
<p>But the environment variable is not persistent between SSH sessions so setting this is of no use in my case.</p>
</blockquote>
</aside>
<p>There's almost always some way to configure environment variables persistently.</p>
<p>There's <a href="https://serverfault.com/questions/261802/what-are-the-functional-differences-between-profile-bash-profile-and-bashrc" rel="nofollow noopener"><strong><code>.profile</code></strong> <strong><code>.bash-profile</code></strong>, and <strong><code>.bashrc</code></strong></a>, for example.</p>
<p><em>(Remember to be sure to do <code>export VAR=xxx</code> and not <code>set VAR=xxx</code>, because SET doesn't pass the variable up to the calling environment of a shell script.)</em></p>
<p>If you're trying to configure an environment variable to be present when the web server is running (e.g. you're not logged in) that's different.  But it's certainly something a host that let you run your own processes should let you specify one way or another.</p>
<blockquote>
<p>I suspect the PHP on this system uses the very same method and is also not using the .so lib.</p>
</blockquote>
<p>Seems you now know enough to dig around in the executables, the libraries they depend on, and that those depend on etc. to find the answers to such questions vs. guess...</p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/iArnold'><span itemprop='name'>iArnold</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-08T08:19:23Z' class='post-time'>
                October 8, 2020,  8:19am
              </time>
              <meta itemprop='dateModified' content='2020-10-08T08:19:23Z'>
          <span itemprop='position'>#18</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Great. So having no symlink and no host provider to put one up, I dug deeper again.</p>
<p>Conclusion:</p>
<ol>
<li>
<p>It will be easiest to link with the static library ( .a) and use the resulting executable.</p>
</li>
<li>
<p>It is possible to have a workaround!</p>
</li>
</ol>
<p>Let me shortly explain the workaround now.</p>
<p>Instead of using the direct method using the Rebol CGI program on the shebang line like this</p>
<pre><code>#!/path/to/cgi-bin/r3 -c
</code></pre>
<p>We will use the bash shell as an intermediate.</p>
<pre><code>#!/bin/bash
export LD_LIBRARY_PATH=/path/to/cgi-bin/
sed -n -e '5,$p' &lt; "$0" | /path/to/cgi-bin/r3 -c "$0" "$@"
exit $?
REBOL []
print "Content-type: text/html^/Foo"
</code></pre>
<p>(Source <a href="http://rosettacode.org/wiki/Multiline_shebang" rel="nofollow noopener">Multiline Shebang</a> )<br>
What happens here?<br>
First line calls the bash shell<br>
Second line exports the LD_LIBRARY_PATH environment variable to add the directory where the runtime loader will look for the dynamic libraries used. In this case I made a symbolic link here that points to the appropriate libmariadb.so.3 library.<br>
Third line catches the content of the Rebol script by streaming it from line 5 where it starts until the end ( $p ) into the variable $0 and pipes this through to the Rebol r3 CGI program, using -c to signal it is to be executed as a CGI script (I managed to catch the welcome message of the Rebol console in my error log! <img src="../../../images/emoji/twitter/smiley.png%3Fv=9" title=":smiley:" class="emoji" alt=":smiley:"> )<br>
On line 4 the bash shell is exited and the script itself is following after that.</p>
<p>I will document this option, but as you will understand I will be using the static linked version from now on.</p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-10-08T14:48:48Z'>
              <time itemprop='dateModified' datetime='2020-10-08T16:59:42Z' class='post-time'>
                October 8, 2020,  4:59pm
              </time>
          <span itemprop='position'>#19</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="18" data-topic="1319">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/iarnold/40/226_2.png" class="avatar"> iArnold:</div>
<blockquote>
<p>Third line catches the content of the Rebol script by streaming it from line 5 where it starts until the end</p>
</blockquote>
</aside>
<p>sed is one of those unreadable things we're attempting to replace. What keeps you from making the output of the script exactly what you want?  And if you need to manipulate it, it would be a better exercise to do it with the r3 executable...</p>
<aside class="quote no-group" data-post="18" data-topic="1319">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/iarnold/40/226_2.png" class="avatar"> iArnold:</div>
<blockquote>
<p>I will document this option, but as you will understand I will be using the static linked version from now on.</p>
</blockquote>
</aside>
<p>It's often easiest to use statically linked versions of things.  But then two programs running on the same machine that both static link a library wind up loading two copies of the library into memory if they both run.  So it multiplies the disk space you use, as well as potentially the memory when you are running multiple copies at once.</p>
<p>An additional thing is that when you statically link a library version into your executable, then that means if it's something that gets security updates or patches (like OpenSSL) your executable won't get those patches even if the installed shared library does.</p>
<p>For these reasons (excuses?) you will find static linking is not always made all that easy...and sometimes, even made impossible.</p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/iArnold'><span itemprop='name'>iArnold</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-12T08:10:27Z' class='post-time'>
                October 12, 2020,  8:10am
              </time>
              <meta itemprop='dateModified' content='2020-10-12T08:10:27Z'>
          <span itemprop='position'>#20</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="19" data-topic="1319">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>And if you need to manipulate it, it would be a better exercise to do it with the r3 executable...</p>
</blockquote>
</aside>
<p>The fact that I cannot use the r3 executable is because it will not load for the missing of the dynamic library for mariadb, and putting one extra version of it there to use just for this sole purpose feels like overkill to me.</p>
<p>However if the r3 executable could load the mysql module on the fly by reading a setup file from the current folder (perhaps also using a symlink to the host provided library from the current folder) ... that would be nice.</p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/iArnold'><span itemprop='name'>iArnold</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-13T09:57:28Z' class='post-time'>
                October 13, 2020,  9:57am
              </time>
              <meta itemprop='dateModified' content='2020-10-13T09:57:28Z'>
          <span itemprop='position'>#21</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="hostilefork" data-post="2" data-topic="1319">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>The natives you are writing need to be parameterized somehow in a way that separates the code and the data. Something like:</p>
<pre><code class="lang-auto">table: "widgets"
quantity: 10
mysql-query "select data from ? where x = ?" [table quantity]  ; "good"

mysql-query spaced ["select data from" table "where x =" quantity]  ; "bad"
</code></pre>
<p>You're not using the <code>mysql_escape_xxx</code> or <code>mysql_real_escape_xxx</code> functions.</p>
</blockquote>
</aside>
<p>I see and understand the principle.<br>
How would this work out?<br>
Will the native mysql-query always have to expect a string and a block of items to be replaced, even if the query is used when there is NO user input at all intended? I have several scripts that are just internal use on the website, like retrieving the number of visitors (and upping it by 1 and saving it). An extra empty block to add seems useless to me.</p>
<p>Perhaps introducing a mysql-execute function for this is a good option.</p>
<p><a href="https://www.php.net/manual/en/function.mysql-real-escape-string.php">PHP real escape example</a> So this can be done from within the script handling the input itself when a function mysql-real-escape-string is available.</p>
<p>There is an alternative in prepared statements too.</p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-13T15:29:20Z' class='post-time'>
                October 13, 2020,  3:29pm
              </time>
              <meta itemprop='dateModified' content='2020-10-13T15:29:20Z'>
          <span itemprop='position'>#22</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="iArnold" data-post="21" data-topic="1319">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/iarnold/40/226_2.png" class="avatar"> iArnold:</div>
<blockquote>
<p><a href="https://www.php.net/manual/en/function.mysql-real-escape-string.php">PHP real escape example</a> So this can be done from within the script handling the input itself when a function mysql-real-escape-string is available.</p>
</blockquote>
</aside>
<p>The prepared statements offer a  "placeholder" form, similar to ODBC...which may be better than using the escaping form:</p>
<p><em>"As an alternative to explicitly escaping special characters, many MySQL APIs provide a placeholder capability that enables you to insert special markers into a statement string, and then bind data values to them when you issue the statement. In this case, the API takes care of escaping special characters in the values for you."</em></p>
<p>An advantage of using that form would be that it would be more similar to the way the ODBC is implemented.</p>
<aside class="quote no-group" data-username="iArnold" data-post="21" data-topic="1319">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/iarnold/40/226_2.png" class="avatar"> iArnold:</div>
<blockquote>
<p>Will the native mysql-query always have to expect a string and a block of items to be replaced, even if the query is used when there is NO user input at all intended?</p>
</blockquote>
</aside>
<p>If the implementation is done in layers, then you can have a higher level form which takes a single parameter...either a string, or a block with the values escaped inline.</p>
<p>See the <a href="../../rethinking-the-odbc-dialect-inline-parameters/1234.html">ODBC-EXECUTE</a> example.</p>
<p>What I suggest is making the C natives about as simple and close to the C API they wrap as possible, and doing the transformative work in usermode code above that.</p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/iArnold'><span itemprop='name'>iArnold</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2020-10-19T12:05:39Z'>
              <time itemprop='dateModified' datetime='2020-10-19T12:08:11Z' class='post-time'>
                October 19, 2020, 12:08pm
              </time>
          <span itemprop='position'>#23</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I managed to achieve what I wanted, using the dynamic library that was installed outside one of the regular folders.</p>
<p>I had to link with</p>
<pre><code>-Wl,-rpath,/usr/lib64/irregularfolder
</code></pre>
<p>and</p>
<pre><code>-L/usr/lib64/irregularfolder -lmariadb
</code></pre>
<p>I checked on the server and ldd gave me the usage as I wanted to see it.<br>
Only hurdle I had to face was an illegal Foo in my header info, I had typed</p>
<pre><code>print "Content-type: text/html^/Foo"
</code></pre>
<p>Where I should have typed</p>
<pre><code>print "Content-type: text/html^/^/Foo"
</code></pre>
<p>(The second ^/ is implicit if you omit the "Foo" part)<br>
So that scared me for a moment as if it were <img src="../../../images/emoji/twitter/jack_o_lantern.png%3Fv=9" title=":jack_o_lantern:" class="emoji" alt=":jack_o_lantern:"> Halloween <img src="../../../images/emoji/twitter/jack_o_lantern.png%3Fv=9" title=":jack_o_lantern:" class="emoji" alt=":jack_o_lantern:">  already <img src="../../../images/emoji/twitter/ghost.png%3Fv=9" title=":ghost:" class="emoji" alt=":ghost:"></p>
<p>Now up to integrating this solution into the build process.</p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/iArnold'><span itemprop='name'>iArnold</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1319.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-22T12:06:21Z' class='post-time'>
                October 22, 2020, 12:06pm
              </time>
              <meta itemprop='dateModified' content='2020-10-22T12:06:21Z'>
          <span itemprop='position'>#24</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>I finally convinced my hosting provider to fix the setup. Pointing at <a href="https://www.cprogramming.com/tutorial/shared-libraries-linux-gcc.html">this page about shared libraries</a> I noticed the ldconfig had not been updated. So now I can use the programs I compile by the regular method and do not need to use the -Wl,rpath and other arguments any more. These tricks will be included in some form of documentation though in case somebody will run into similar issues on future occasions.</p>
        </div>

        <meta itemprop='headline' content='MySQL extension'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>

    <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
        <span itemprop='name'><a rel="prev" itemprop="url" href="../1319.html">← previous page</a></span>
    </div>





    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
