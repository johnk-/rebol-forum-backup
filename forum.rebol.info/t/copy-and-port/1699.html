<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>COPY and PORT! - Ports - AltRebol</title>
    <meta name="description" content="As it so happens, the network and file ports seem to want to make COPY &amp;quot;get data out of the port&amp;#39;s buffer&amp;quot;. 
The idea is that you ask for a READ, asynchronously.  Then you wait for a wake up event.  This event arrives wi&amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1699.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;COPY and PORT!&#39;" href="1699.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/copy-and-port/1699" />
<meta name="twitter:url" content="https://forum.rebol.info/t/copy-and-port/1699" />
<meta property="og:title" content="COPY and PORT!" />
<meta name="twitter:title" content="COPY and PORT!" />
<meta property="og:description" content="As it so happens, the network and file ports seem to want to make COPY &quot;get data out of the port&#39;s buffer&quot;.  The idea is that you ask for a READ, asynchronously.  Then you wait for a wake up event.  This event arrives with no information other than it was a &quot;receive&quot; event that happened on that port...so the data does not live in the event (it can&#39;t, EVENT! is too small to hold both the port it is notifying and the pointer to data).  So in the code you write for processing the read event, it&#39;s t..." />
<meta name="twitter:description" content="As it so happens, the network and file ports seem to want to make COPY &quot;get data out of the port&#39;s buffer&quot;.  The idea is that you ask for a READ, asynchronously.  Then you wait for a wake up event.  This event arrives with no information other than it was a &quot;receive&quot; event that happened on that port...so the data does not live in the event (it can&#39;t, EVENT! is too small to hold both the port it is notifying and the pointer to data).  So in the code you write for processing the read event, it&#39;s t..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 â¤" />
<meta property="article:published_time" content="2021-09-02T11:11:04+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1699.html">COPY and PORT!</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/8" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/ports/37" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Ports</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1699.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-09-02T11:11:04Z' class='post-time'>
                September 2, 2021, 11:11am
              </time>
              <meta itemprop='dateModified' content='2021-09-02T11:11:04Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>As it so happens, the network and file ports seem to want to make COPY "get data out of the port's buffer".</p>
<p>The idea is that you ask for a READ, asynchronously.  Then you wait for a wake up event.  This event arrives with no information other than it was a "receive" event that happened on that port...so the data does not live in the event (it can't, EVENT! is too small to hold both the port it is notifying and the pointer to data).</p>
<p>So in the code you write for processing the read event, it's time to get the data out of the port.  This was done with COPY.</p>
<p>I think this is a bad way to think about the internal mechanics of asynchronous requests (and I have an unfinished post where I critique the whole thing).</p>
<p>Either way: from the perspective of a synchronous file user, this distinction doesn't exist.  So <strong>copy %foo</strong> and <strong>read %foo</strong> are the same thing...get the data out of the file as a BINARY!.</p>
<h2>Should PORT! Be Able To Overload COPY?</h2>
<p>There are some things I feel like PORT! probably should not be overriding.  TYPE OF, for instance.</p>
<pre><code>&gt;&gt; type of %foo.jpg
== #[datatype file!]
</code></pre>
<p>I'm pretty sure this is an example of where we'd like to know that's a stringish proxy for a FILE! port, vs making a port and having it come back with something else:</p>
<pre><code>&gt;&gt; type of %foo.jpg
== 'JPEG
</code></pre>
<p>Is COPY another one of these "reserved things" that you don't really get to redefine in any sense other than "make another instance of yourself"?</p>
<pre><code>&gt;&gt; copy %hello.txt
== %hello.txt  ; as opposed to reading the contents of %hello.txt
</code></pre>
<p>One could certainly imagine the argument that not only does FILE! override COPY, but it adds an argument...the filename of the file to copy to:</p>
<pre><code>&gt;&gt; copy %source.dat %destination.dat
</code></pre>
<p>In any case, COPY's days are numbered as the method for extracting things from internal buffers in ports.  But that doesn't answer the question: Can ports override COPY, and if they do, are there rules about it?</p>
        </div>

        <meta itemprop='headline' content='COPY and PORT!'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
