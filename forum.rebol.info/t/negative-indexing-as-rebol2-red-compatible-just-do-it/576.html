<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Negative indexing as Rebol2/Red compatible... just do it? - Internals - AltRebol</title>
    <meta name="description" content="Rebol2/Red: 

&amp;gt;&amp;gt; pick next [a b] 1
== b

&amp;gt;&amp;gt; pick next [a b] 0
== none ;-- Red proposes error, which was also the revised R3-Alpha proposal

&amp;gt;&amp;gt; pick next [a b] -1
== a

R3-Alpha: 

&amp;gt;&amp;gt; pick next [a b] 1
== b

&amp;gt;&amp;gt; pick next &amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="576.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Negative indexing as Rebol2/Red compatible... just do it?&#39;" href="576.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/negative-indexing-as-rebol2-red-compatible-just-do-it/576" />
<meta name="twitter:url" content="https://forum.rebol.info/t/negative-indexing-as-rebol2-red-compatible-just-do-it/576" />
<meta property="og:title" content="Negative indexing as Rebol2/Red compatible... just do it?" />
<meta name="twitter:title" content="Negative indexing as Rebol2/Red compatible... just do it?" />
<meta property="og:description" content="Rebol2/Red:  &gt;&gt; pick next [a b] 1 == b  &gt;&gt; pick next [a b] 0 == none ;-- Red proposes error, which was also the revised R3-Alpha proposal  &gt;&gt; pick next [a b] -1 == a  R3-Alpha:  &gt;&gt; pick next [a b] 1 == b  &gt;&gt; pick next [a b] 0   == a  &gt;&gt; pick next [a b] -1 == none  The decision to make this change in R3-Alpha was before my time.  But what I know of it, is that it was motivated by some people feeling the &quot;hole at 0&quot; made it hard for mathematics-like algorithms to index into arrays.  It also seemed..." />
<meta name="twitter:description" content="Rebol2/Red:  &gt;&gt; pick next [a b] 1 == b  &gt;&gt; pick next [a b] 0 == none ;-- Red proposes error, which was also the revised R3-Alpha proposal  &gt;&gt; pick next [a b] -1 == a  R3-Alpha:  &gt;&gt; pick next [a b] 1 == b  &gt;&gt; pick next [a b] 0   == a  &gt;&gt; pick next [a b] -1 == none  The decision to make this change in R3-Alpha was before my time.  But what I know of it, is that it was motivated by some people feeling the &quot;hole at 0&quot; made it hard for mathematics-like algorithms to index into arrays.  It also seemed..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ❤" />
<meta property="article:published_time" content="2018-03-21T10:56:54+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="576.html">Negative indexing as Rebol2/Red compatible... just do it?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/8" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/development/internals.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Internals</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="576.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2018-03-21T10:56:54Z'>
              <time itemprop='dateModified' datetime='2018-03-25T22:36:44Z' class='post-time'>
                March 25, 2018, 10:36pm
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Rebol2/Red:</p>
<pre><code>&gt;&gt; pick next [a b] 1
== b

&gt;&gt; pick next [a b] 0
== none ;-- Red proposes error, which was also the revised R3-Alpha proposal

&gt;&gt; pick next [a b] -1
== a
</code></pre>
<p>R3-Alpha:</p>
<pre><code>&gt;&gt; pick next [a b] 1
== b

&gt;&gt; pick next [a b] 0  
== a

&gt;&gt; pick next [a b] -1
== none
</code></pre>
<p>The decision to make this change in R3-Alpha was before my time.  But what I know of it, is that it was motivated by some people feeling the "hole at 0" made it hard for mathematics-like algorithms to index into arrays.</p>
<p>It also seemed to be that changing it didn't really please anyone that much.</p>
<p>The general concept behind PICK is to try and be a kind of "natural, do what I mean" selector.  Ren-C has taken this further by making it come back with an answer that's the same as what pathing does (hence it's "path picking" and not "path selection").  So <strong>pick a/b 'c</strong> acts like <strong>a/b/c</strong>...they run the same code.</p>
<p>People who want more numerical access can use SKIP, which navigates series predictably by a number of elements...including 0.</p>
<p>There was a lot of talk about how to change the indexing back safely, but I have to wonder, <strong>can we just change it, call it done, and move on</strong>?  There's not that much negative indexing going on in general with PICK.  And we have the wherewithal to generate some kind of log to help debug anyone who merges a negative indexing change and it breaks things.</p>
<p><em>(I was provoked to look into this because there's an old list of stray tests that were only run under Rebol2, and I feel like it's time to get rid of that file by going ahead and doing triage on everything in it...so here are the tests that involve indexing, so they can be deleted from there.  No it's, not much!)</em></p>
<pre><code>[1 = pick at [1 2 3 4 5] 3 -2]
[2 = pick at [1 2 3 4 5] 3 -1]
[none? pick at [1 2 3 4 5] 3 0]
[#"1" = pick at "12345" 3 -2]
[#"2" = pick at "12345" 3 -1]
[none? pick at "12345" 3 0]</code></pre>
        </div>

        <meta itemprop='headline' content='Negative indexing as Rebol2/Red compatible... just do it?'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/iArnold'><span itemprop='name'>iArnold</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="576.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-03-23T21:28:38Z' class='post-time'>
                March 23, 2018,  9:28pm
              </time>
              <meta itemprop='dateModified' content='2018-03-23T21:28:38Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>For some things changed in R3, it is ok to change those back to R2 way of handling. I think this one fits that view especially because you point out the alternative with SKIP does what you want in this case.</p>
        </div>

        <meta itemprop='headline' content='Negative indexing as Rebol2/Red compatible... just do it?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/Brett.html'><span itemprop='name'>Brett</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="576.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2018-03-25T22:53:10Z'>
              <time itemprop='dateModified' datetime='2018-03-25T23:06:37Z' class='post-time'>
                March 25, 2018, 11:06pm
              </time>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Trying to decide on a binary choice between the intent of PICK being more "natural selector" or "mathematical" array access was probably a mistake.  A bit too much "let's minimise what's in the box".</p>
<p>There's a performance angle too. In Rebol 2, it was known that the fastest way to modify a series was not using CHANGE but to use POKE. When using POKE one naturally thinks to PICK rather than SKIP.</p>
<p>I'm also unsure if the semantics of SKIP are enough to satisfy a mathematical style access.</p>
<p>So I'm in favor of going back to Rebol2's PICK but wonder if a PEEK could satisfy the fast mathematical access intent scenario.</p>
        </div>

        <meta itemprop='headline' content='Negative indexing as Rebol2/Red compatible... just do it?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="576.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2018-03-30T16:58:16Z'>
              <time itemprop='dateModified' datetime='2018-03-30T16:59:59Z' class='post-time'>
                March 30, 2018,  4:59pm
              </time>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="3" data-topic="576">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/brett/40/177_2.png" class="avatar"> Brett:</div>
<blockquote>
<p>There's a performance angle too. In Rebol 2, it was known that the fastest way to modify a series was not using CHANGE but to use POKE. When using POKE one naturally thinks to PICK rather than SKIP.</p>
</blockquote>
</aside>
<p>In the change which unified PICK and pathing, it also unified POKE and set-pathing.  So <strong>poke 'a/b 'c 10</strong> would do the same thing as <strong>a/b/c: 10</strong>...because it ran literally the same code.  It also unified with GET and SET, so that <strong>get 'a/b/c</strong> would give you the same thing as <strong>:a/b/c</strong> and <strong>set 'a/b/c x</strong> would give you the same thing as <strong>a/b/c: x</strong> (modulo some details).  Previously, there were all kinds of behavior deviations of each choice.  :-/</p>
<p>PEEK and POKE are "obscure" words, and tend to go together in other languages.  One would think of them as a pair.  Maybe having them be zero-based would make sense, and not doing any of the bizarre things that pathing do (like no getting you a FILE! back from <strong>f: %foo | f/bar</strong>).</p>
<p>Red added PUT, which is a writing variant of SELECT.  <strong>x: [a 10 b 20]</strong> then <strong>put  'a 30</strong> gives you x of [a 30 b 20].  But PICK and PUT might go together better than PICK and POKE?</p>
<p>Wilder options--which I bring up now and again--is to make <strong>/</strong> a specific type (SLASH!, perhaps) and have the evaluator know about it, and do pathing with it.  <strong>x / y: z</strong> could be like <strong>poke x y z</strong> is today.  Getting that to work generically would require SET-GROUP! and GET-GROUP!, e.g.:</p>
<pre><code>:(x x x) / y: z
x / (y y y): z
</code></pre>
<p>But I've wanted those anyway.  And then maybe the named forms could be zero-based?</p>
        </div>

        <meta itemprop='headline' content='Negative indexing as Rebol2/Red compatible... just do it?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
