<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>ALL and ANY chaining - Feature Discover - AltRebol</title>
    <meta name="description" content="2021 UPDATE: This post uses some very outdated language from thinking circa 2017, where &amp;quot;void&amp;quot; was what we would call NULL today.  But the modern behavior of ~void~ isotopes and invisibility are much more relevant, and &amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="331.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;ALL and ANY chaining&#39;" href="331.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/all-and-any-chaining/331" />
<meta name="twitter:url" content="https://forum.rebol.info/t/all-and-any-chaining/331" />
<meta property="og:title" content="ALL and ANY chaining" />
<meta name="twitter:title" content="ALL and ANY chaining" />
<meta property="og:description" content="2021 UPDATE: This post uses some very outdated language from thinking circa 2017, where &quot;void&quot; was what we would call NULL today.  But the modern behavior of ~void~ isotopes and invisibility are much more relevant, and bring the sought-after power into practice.  See the explanation in this other thread...   There were several edge cases in ALL and ANY, in historical Rebol.  I was reminded of the importance of these edge cases today when I noticed how Red treats commented-out code:  red&gt; if any..." />
<meta name="twitter:description" content="2021 UPDATE: This post uses some very outdated language from thinking circa 2017, where &quot;void&quot; was what we would call NULL today.  But the modern behavior of ~void~ isotopes and invisibility are much more relevant, and bring the sought-after power into practice.  See the explanation in this other thread...   There were several edge cases in ALL and ANY, in historical Rebol.  I was reminded of the importance of these edge cases today when I noticed how Red treats commented-out code:  red&gt; if any..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ❤" />
<meta property="article:published_time" content="2017-10-10T02:27:38+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="331.html">ALL and ANY chaining</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/usage/7" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Usage</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/usage/feature-discover.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Feature Discover</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="331.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2017-10-10T02:27:38Z'>
              <time itemprop='dateModified' datetime='2021-06-20T03:19:46Z' class='post-time'>
                June 20, 2021,  3:19am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <blockquote>
<p><strong>2021 UPDATE: This post uses some very outdated language from thinking circa 2017, where "void" was what we would call NULL today.  But the modern behavior of ~void~ isotopes and invisibility are much more relevant, and bring the sought-after power into practice.  <a href="../what-should-do-of-empty-block-do-do/1426/17.html">See the explanation in this other thread...</a></strong></p>
</blockquote>
<p>There were several edge cases in ALL and ANY, in historical Rebol.  I was reminded of the importance of these edge cases today when I noticed how Red treats commented-out code:</p>
<pre><code>red&gt; if any [false comment [foo] false] [print "Sigh."]
Sigh.
</code></pre>
<p>The comment evaluated to an "unset!", which in Red's world is considered to be "truthy":</p>
<pre><code>red&gt; if () [print "Red treats unsets as true?  :-/"]
Red treats unsets as true?  :-/
</code></pre>
<p>So you can't throw a comment in and expect ANY to pretend it's not there.  But if you changed "unset!" to be "falsey" you'd end up with the converse problem... an ALL would fail when it shouldn't.</p>
<pre><code>red&gt; if all [true comment [foo] true] [print "Sigh if unset were falsey"]
;-- no output, in today's world
</code></pre>
<p>R3-Alpha correctly--I believe--considered "unset!" to be neither true nor false.  It was illegal to appear in the conditional slot of an IF (or EITHER, or CASE, etc):</p>
<pre><code>r3-alpha&gt; if () [print "Won't get here."]
** Script error: if does not allow unset! for its condition argument
</code></pre>
<p>But this did inspire debate on what its behavior inside an ANY or ALL should be, as this <strong>status.important</strong> <a href="https://github.com/rebol/rebol-issues/issues/564">issue from 2009 says</a>.  Should it be an error, or ignored?</p>
<p>The answer was that it was ignored, <em>mostly</em>, unless it was the very last thing.</p>
<p>Gregg thought it was bad for them to be able to return an UNSET!, presumably due to the difficulty of using them in conditionals.  BrianH said he had "always been surprised that it doesn’t throw an error, as that is the main difference between the unset! and none! types."  At first, I agreed with both of these statements...but in time I reversed my opinion.</p>
<p><strong>I now believe that it is best when voids opt-out of a "vote" in an ANY and an ALL, and that the only way to get a void result from ANY or ALL is if there were no votes.</strong></p>
<p>There is a slight increased cost on ALL for this...because making <code>all [1 + 1 ()]</code> return <code>2</code> requires holding on to the just-evaluated result, in case a subsequent evaluation fails.</p>
<p><em>(As a thought-experiment I've actually been slightly obsessed with figuring out a way to avoid this cost by initializing the result cell to a bit pattern and then making voids never overwrite that bit pattern.  But it's fairly negligible in the scheme of things.)</em></p>
<p>The result of this decision gives you some surprisingly clever compositional power, especially now that void results are the lingua-franca of conditionals saying "no branches ran".  And being able to return a void when there are no votes is a feature, not a bug.  Consider:</p>
<pre><code>condition1: condition2: condition3: false
number3: 3

if all [
    if condition1 ["A"]
    case [condition2 ["B"] condition3 ["C"]]
    switch number3 [1 ["D"] 2 ["E"]]
][
   print "Should you run this code or not?"
]
</code></pre>
<p>It seems bad to run the code, since no conditions were true and no votes occurred.  So returning void leverages the stopping power of it in a conditional context.  Triggering an error for IF is the right thing to do, and easy enough to fix if you <em>meant</em> to do that by throwing true on the end of the list.  You got a potentially useful warning.</p>
<p>There's also <em>the chaining power of it</em>.</p>
<pre><code>any [a b all [c d any [e f] g h] i j]
</code></pre>
<p>The curious property you get by not forcing the result to something truthy or falsey is that the opt-out property can propagate.  This is why in Ren-C, <code>any []</code> and <code>all []</code> are void.  The base case is "I don't know enough to tell you anything".</p>
<p>How useful this all is depends on whether you use it.  But there's reasoning behind it, which took a long time to decide on--for better or worse!</p>
        </div>

        <meta itemprop='headline' content='ALL and ANY chaining'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
