<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>PATH! usage for Function Dispatch Only Unless in Redbol Mode - Redbol - AltRebol</title>
    <meta name="description" content="For a while now I&amp;#39;ve been a pretty big convert on the look of dots for member selection.  It&amp;#39;s not just that it&amp;#39;s more standard--I think it&amp;#39;s visually better.  It also lets you be reassured that when you see a slash in a&amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1723.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;PATH! usage for Function Dispatch Only Unless in Redbol Mode&#39;" href="1723.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/path-usage-for-function-dispatch-only-unless-in-redbol-mode/1723" />
<meta name="twitter:url" content="https://forum.rebol.info/t/path-usage-for-function-dispatch-only-unless-in-redbol-mode/1723" />
<meta property="og:title" content="PATH! usage for Function Dispatch Only Unless in Redbol Mode" />
<meta name="twitter:title" content="PATH! usage for Function Dispatch Only Unless in Redbol Mode" />
<meta property="og:description" content="For a while now I&#39;ve been a pretty big convert on the look of dots for member selection.  It&#39;s not just that it&#39;s more standard--I think it&#39;s visually better.  It also lets you be reassured that when you see a slash in a path, that the thing to the left of that slash was a function:  foo.bar.baz    ;    ; ^-- I may not know what foo.bar.baz is, but at least I know that    ; foo and foo.bar are *not* functions  foo.bar.baz/mumble    ;    ; ^-- Under the convention that slashes are for refinements..." />
<meta name="twitter:description" content="For a while now I&#39;ve been a pretty big convert on the look of dots for member selection.  It&#39;s not just that it&#39;s more standard--I think it&#39;s visually better.  It also lets you be reassured that when you see a slash in a path, that the thing to the left of that slash was a function:  foo.bar.baz    ;    ; ^-- I may not know what foo.bar.baz is, but at least I know that    ; foo and foo.bar are *not* functions  foo.bar.baz/mumble    ;    ; ^-- Under the convention that slashes are for refinements..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="2 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="3 ❤" />
<meta property="article:published_time" content="2021-09-22T18:11:42+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1723.html">PATH! usage for Function Dispatch Only Unless in Redbol Mode</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/15" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Domains</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/redbol/47" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Redbol</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1723.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-09-22T18:11:42Z' class='post-time'>
                September 22, 2021,  6:11pm
              </time>
              <meta itemprop='dateModified' content='2021-09-22T18:11:42Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>For a while now I've been a pretty big convert on the look of dots for member selection.  It's not just that it's more standard--I think it's visually better.  It also lets you be reassured that when you see a slash in a path, that the thing to the left of that slash was a function:</p>
<pre><code>foo.bar.baz
   ;
   ; ^-- I may not know what foo.bar.baz is, but at least I know that
   ; foo and foo.bar are *not* functions

foo.bar.baz/mumble
   ;
   ; ^-- Under the convention that slashes are for refinements only, I
   ; can tell the author intends that (foo.bar.baz) must be a function

foo.baz.bar/
   ;
   ; ^-- With Ren-C's path generality, you can even decorate a case
   ; without refinements to show it's a function.
</code></pre>
<h2>It Hasn't Been A <em>Rule</em>, but...</h2>
<p>So far Ren-C has been allowing you to use slashes wherever you historically could.  So the new rules were only applying to dots--restricting them on not being usable on functions.</p>
<pre><code>append.dup [a b c] [d] 2  ; this would cause an error, for instance
</code></pre>
<p>However, you could still pick members out of objects with slashes:</p>
<pre><code>&gt;&gt; obj: make object! [field: 10]

&gt;&gt; obj/field   ; not obj.field
== 10
</code></pre>
<p>I had a feeling this might be prohibited eventually...though it would need to be possible to make Redbol emulation work.  So there'd have to be some kind of flag for allowing it.</p>
<h2>...But Now, I Might Have A Good Reason To Enforce It</h2>
<p>The reason is that in trying to do a good job of building an extensibility mechanism for member selection, it is difficult to make that mechanism able to communicate information about specialized functions in a "light" way.</p>
<p>When pathing is done hardcoded in the evaluator, it can do little sneaky tricks to push the words of refinements onto a stack.  It doesn't have to create an entirely new specialized function.</p>
<p>But once you're using a generic interface to usermode functions which can extend <strong><code>PICK*</code></strong> and <strong><code>POKE*</code></strong>, that interface has to speak in "reified" forms.  We have partial specialization so these refied forms exist... I just feel like what's happening in that case isn't "picking" or "poking".  And it's tying my hands to make anything efficient if we say that path dispatch runs through code which might be usermode.</p>
<h2>The Flag Will Be Introduced Gradually</h2>
<p>I've been experimenting with the flag turning itself on automatically, and giving you a warning.  So you only hear about it the first time.</p>
<pre><code>&gt;&gt; obj: make object! [x: 10]

&gt;&gt; obj/x
The PATH! obj/x doesn't evaluate to an ACTION! in the first slot.
SYSTEM.OPTIONS.REDBOL-PATHS is FALSE so this is not allowed by default.
For now, we'll enable it automatically...but it will slow down the system!
Please use TUPLE! instead, like obj.x
== 10

&gt;&gt; obj/x
== 10
</code></pre>
<p>What happens when you enable the flag is that it actually turns any PATH! with no ACTION! in the first slot into a TUPLE!, and then permits you to use refinements in TUPLE!s like <code>append.dup</code>.  This is because I'm avoiding creating a separate extensibility mechanism for paths...it just does the not-easy-to-optimize extensibility.</p>
<p>I haven't committed this, and I'd be phasing it in slowly.  But as it's phased in, the performance of paths for member selections vs. tuples will degrade.  So it's worth knowing about.</p>
        </div>

        <meta itemprop='headline' content='PATH! usage for Function Dispatch Only Unless in Redbol Mode'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1723.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-09-25T09:30:46Z' class='post-time'>
                September 25, 2021,  9:30am
              </time>
              <meta itemprop='dateModified' content='2021-09-25T09:30:46Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="1723">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>For a while now I've been a pretty big convert on the look of dots for member selection. It's not just that it's more standard--I think it's visually better. It also lets you be reassured that when you see a slash in a path, that the thing to the left of that slash was a function</p>
</blockquote>
</aside>
<p><em>Let me paint the statement of what PATH!s are "for" in a broader way...</em></p>
<h2>PATH!s are not for lookup, but are for "OPTIONS"</h2>
<p>There is a feature of FAIL which is that you can pass it a location to "blame".  It's a skippable argument, which you currently pass as an @-word:</p>
<pre><code>greet-negative-number: func [message [text!] n [integer!]] [
    if n &gt;= 0 [
        fail @n "It's called GREET-NEGATIVE-NUMBER, bozo!"
    ]
    print ["Hello" n ":" message]
]
</code></pre>
<p>It's nice because instead of seeing the error location as being reported from inside of GREET-NEGATIVE-NUMBER, it points at the callsite... and tell you the name of the offending argument... and its offending value.</p>
<p>Plus, both the error "reason" and the thing to "blame" are optional.  This means if you're lazy you can just blame the parameter without a message:</p>
<pre><code>if n &gt;= 0 [fail @n]
</code></pre>
<p>You still have the name of the variable, its value, and the better implication of the source of the error at the callsite.  Though if you want to just be lazy you can just leave it all off and have a generic failure... which is especially nice in things like SWITCH:</p>
<pre><code>switch x [
    1 [print "one"]
    2 [print "two"]
    fail
]
</code></pre>
<h2>Back To The Point: About PATH!s vs. TUPLE!s</h2>
<p>So certainly if you're going to blame a variable, it should be possible to blame not just WORD!s but things that are looked up in objects.</p>
<pre><code>obj: make object! [n: 1020]
if obj.n &gt;= 0 [
    fail @obj.n "Let's say I want this to be negative, too"
]

** Error: Let's say I want this to be negative, too
** Blame: obj.n is 1020
</code></pre>
<p>But then I started thinking about the idea that you might have something else to say.  Like whether to show the name of the variable in the error.</p>
<pre><code>fail @obj.n/anonymous "Let's say I want this to be negative, too"

** Error: Let's say I want this to be negative, too
** Blame: 1020
</code></pre>
<h2>If "PATH!s Are For Options", could values have them?</h2>
<p>Fancifully:</p>
<pre><code>&gt;&gt; n: 304

&gt;&gt; n/lastdigit
== 4
</code></pre>
<p>This blurs the line between "member access" and "option".  Perhaps if you can only <em>read</em> a property but not write it, then it's more like calling a function and getting a result?</p>
<p>I'm not exactly sure where this line of argumentation goes.  I just thought the application of pathing to add options to the blame argument of FAIL was interesting enough to write up and add to this thread.</p>
        </div>

        <meta itemprop='headline' content='PATH! usage for Function Dispatch Only Unless in Redbol Mode'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
