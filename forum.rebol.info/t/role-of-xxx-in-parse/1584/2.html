<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Role of @(xxx) in PARSE - #2 by hostilefork - Parsing - AltRebol</title>
    <meta name="description" content="I&amp;#39;m trying something different now, with @[...] =&amp;gt; ACROSS [...] 
This helps keep BLOCK!-like things meaning &amp;quot;rule&amp;quot; in PARSE&amp;#39;s dialect. 
UPDATE: I have changed my mind back on the following, but putting it here for histo&amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../1584.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Role of @(xxx) in PARSE&#39;" href="../1584.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/role-of-xxx-in-parse/1584/2" />
<meta name="twitter:url" content="https://forum.rebol.info/t/role-of-xxx-in-parse/1584/2" />
<meta property="og:title" content="Role of @(xxx) in PARSE" />
<meta name="twitter:title" content="Role of @(xxx) in PARSE" />
<meta property="og:description" content="I wanted to preserve the bit of what I describe above about the usefulness of having a parse rule that is for explicit matching &quot;evaluate to&quot; (&quot;bear a value&quot;) that is the matched thing.  Because that is certainly an eye-opener for being able to apply it.  But I think I&#39;ve convinced myself that @rgchris had the right instincts on making it possible for undecorated value-bearing GROUP!s to be arguments to things like KEEP.  It&#39;s just that prior to UPARSE we didn&#39;t really have an explanation for w..." />
<meta name="twitter:description" content="I wanted to preserve the bit of what I describe above about the usefulness of having a parse rule that is for explicit matching &quot;evaluate to&quot; (&quot;bear a value&quot;) that is the matched thing.  Because that is certainly an eye-opener for being able to apply it.  But I think I&#39;ve convinced myself that @rgchris had the right instincts on making it possible for undecorated value-bearing GROUP!s to be arguments to things like KEEP.  It&#39;s just that prior to UPARSE we didn&#39;t really have an explanation for w..." />
<meta property="article:published_time" content="2021-04-13T03:22:31+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../1584.html">Role of @(xxx) in PARSE</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/15" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Domains</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/parsing/16" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Parsing</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1584.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-04-12T04:34:33Z'>
              <time itemprop='dateModified' datetime='2021-04-13T05:40:26Z' class='post-time'>
                April 13, 2021,  5:40am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="1374">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"><a href="../../behavior-of-plain-group-in-parse/1374/1.html">Behavior of Plain GROUP! in PARSE</a>
</div>
<blockquote>
<p>Note: I'm thinking that @ groups will continue to have their "as-is" meaning, which is to say that if you <strong>keep @[some integer!]</strong> then you are asking to keep the actual two words <strong><code>some integer!</code></strong>, while <strong>keep [some integer!]</strong> would act as a rule that would match the input for some number of integers. Similarly, <strong>keep @(reverse [integer! some])</strong> would keep the two words <strong>some integer!</strong> as well, while <strong>keep (reverse [integer! some])</strong> would be a request to match input.</p>
</blockquote>
</aside>
<p>I'm trying something different now, with @[...] =&gt; ACROSS [...]</p>
<p>This helps keep BLOCK!-like things meaning "rule" in PARSE's dialect.</p>
<p><strong>UPDATE: I have changed my mind back on the following, but putting it here for historical reference. See post below.</strong></p>
<blockquote>
<p>Consequently, if you wanted to keep a BLOCK! of material you'd have to use a SET-GROUP! with a BLOCK! in it:</p>
<pre><code> keep @([some integer])
</code></pre>
<p>I think this makes more sense when you look at it from all the angles.</p>
<aside class="quote no-group quote-modified" data-username="hostilefork" data-post="9" data-topic="1374">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"><a href="../../behavior-of-plain-group-in-parse/1374/9.html">Behavior of Plain GROUP! in PARSE</a>
</div>
<blockquote>
<p>My current plan is that <strong><code>@value</code></strong> means to match a value literally (e.g. if VALUE is a block then it &gt; doesn't use it as a rule the way plain <strong>value</strong> does). But then <code>@value</code> is a rule, so <code>keep @value</code> &gt; should honor the idea of saying you're keeping if it matches that exact value. Hence that eliminates &gt; the idea of saying that <code>keep @([&lt;some&gt; &lt;stuff&gt;])</code> would literally keep that data without matching.</p>
</blockquote>
</aside>
<p>I've changed my mind on this with what "@" means, just generally.  This seems like a job for QUOTE.</p>
<p>data: [some rule]<br>
parse [[some rule]] [quote <span class="mention">@data</span>]</p>
<p>QUOTE would say you're looking to turn the argument into a rule to use literally, as if you had written:</p>
<p>parse [[some rule]] ['[some rule]]</p>
<p>We might call this LIT/LITERAL/LITERALLY because that's what it means.  But I think that it will also evaluate to the quoted rule, so QUOTE might not be a bad name for it.  We're currently allowing matched tokens to evaluate to themselves:</p>
<pre><code>&gt;&gt; parse "ab" ["a" x: "b"]
== "ab"  ; e.g. matched.

&gt;&gt; x
== "b"
</code></pre>
<p><em>It's not as useless as it seems.</em>  You might want to match something -and- know what matched.  The identity of the thing you matched can be a convenient macro for that.</p>
<pre><code>&gt;&gt; parse "ab" ["a" x: ["b" | "c"]]
== "ab"

&gt;&gt; x
== "b"
</code></pre>
<p>See what I mean?  So, in the case of this QUOTE operation, evaluating to the quoted rule has the advantage of communicating the match just as you would with other material.</p>
<pre><code>&gt;&gt; r1: first [b]
&gt;&gt; r2: first [c]

 &gt;&gt; parse [a b] ['a x: [quote @r1 | quote @r2]] 
 == [a b]

 &gt;&gt; x
 == 'b
</code></pre>
<p>Nothing had to be synthesized, because you're using the rule itself as the identity of the result.  So it's cheap.</p>
<p>Anyway, this is just me trying to justify why giving the operation the somewhat mechanical name of "QUOTE" could be savvier than trying to dissociate from the idea of quoting when doing a literal match.</p>
</blockquote>
        </div>

        <meta itemprop='headline' content='Role of @(xxx) in PARSE'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="2" />
           <span class='post-likes'>2 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../../behavior-of-plain-group-in-parse/1374/10.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://forum.rebol.info/t/behavior-of-plain-group-in-parse/1374/10'>
                      <span itemprop='name'>Behavior of Plain GROUP! in PARSE</span>
                    </a>
                    <meta itemprop='position' content='3'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1584.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-04-13T03:22:31Z'>
              <time itemprop='dateModified' datetime='2021-04-13T03:37:56Z' class='post-time'>
                April 13, 2021,  3:37am
              </time>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="1584">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p><em>It's not as useless as it seems.</em> You might want to match something -and- know what matched. The identity of the thing you matched can be a convenient macro for that.</p>
</blockquote>
</aside>
<p>I wanted to preserve the bit of what I describe above about the usefulness of having a parse rule that is for explicit matching "evaluate to" ("bear a value") that is the matched thing.  Because that is certainly an eye-opener for being able to apply it.</p>
<p>But I think I've convinced myself that <a class="mention" href="https://forum.rebol.info/u/rgchris">@rgchris</a> had the right instincts on making it possible for undecorated value-bearing GROUP!s to be arguments to things like KEEP.  It's just that prior to UPARSE we didn't really have an explanation for what about the character of KEEP's argument made it a sensible candidate to take either a rule or a value.</p>
<p>The best explanation I've written so far of what PARSE was missing is when I talk about <a href="../../lessons-from-encapping-improving-binary-parse/1577.html">lessons learned from binary parsing in ENCAP</a>.  When we more closely parallel the design of parser combinators... to think more simply in terms of advancement on input (or "remainder") as a separate data channel from the synthesized value... it becomes clear.  KEEP wants rules that synthesize values, and not all rules do this.  <strong>But GROUP!s synthesize by running DO code, and they leave the input exactly where it was.</strong></p>
<p>I feel a bit dumb for not having the words to say this previously, but the code for parse just wasn't set up to very conveniently say it.  Because everything was being done strictly in terms of the advancement of input.</p>
<p>Anyhow, I think Chris can be pleased with the outcome.  But this means that SYM-GROUP!, SYM-WORD!, and SYM-PATH! can act as the "match this literally" that I was looking for at the outset.  It's even better.</p>
<p>Thinking of the last value-bearing result "falling out" of a BLOCK! parse rule is looking to be something of a watershed change.</p>
<p><img src="../../../images/emoji/twitter/partying_face.png%3Fv=9" title=":partying_face:" class="emoji only-emoji" alt=":partying_face:"></p>
        </div>

        <meta itemprop='headline' content='Role of @(xxx) in PARSE'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
