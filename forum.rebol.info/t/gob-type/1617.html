<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>GOB! type - Datatypes - AltRebol</title>
    <meta name="description" content="When creating a GOB! you can specify some values for it, or leave this empty and go for the default values like so: 
&amp;gt;&amp;gt; gb: make gob! []
== make custom! [offset: 100.0x100.0 size: 0.0x0.0 alpha: 255]

And this results in &amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1617.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_e71c7b3a0694e7f6434c54a663bfb42821f8bd81.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" />
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;GOB! type&#39;" href="1617.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/gob-type/1617" />
<meta name="twitter:url" content="https://forum.rebol.info/t/gob-type/1617" />
<meta property="og:title" content="GOB! type" />
<meta name="twitter:title" content="GOB! type" />
<meta property="og:description" content="When creating a GOB! you can specify some values for it, or leave this empty and go for the default values like so:  &gt;&gt; gb: make gob! [] == make custom! [offset: 100.0x100.0 size: 0.0x0.0 alpha: 255]  And this results in  &gt;&gt; gb == make custom! [offset: 100.0x100.0 size: 0.0x0.0 alpha: 255]  Where  &gt;&gt; gb/offset == 100.0x100.0  &gt;&gt; gb/size == 0.0x0.0  &gt;&gt; gb/alpha == 255  Now when taking a closer look at the GOB! code in t-gob.c you can remark that there should be more to this standard GOB! than mee..." />
<meta name="twitter:description" content="When creating a GOB! you can specify some values for it, or leave this empty and go for the default values like so:  &gt;&gt; gb: make gob! [] == make custom! [offset: 100.0x100.0 size: 0.0x0.0 alpha: 255]  And this results in  &gt;&gt; gb == make custom! [offset: 100.0x100.0 size: 0.0x0.0 alpha: 255]  Where  &gt;&gt; gb/offset == 100.0x100.0  &gt;&gt; gb/size == 0.0x0.0  &gt;&gt; gb/alpha == 255  Now when taking a closer look at the GOB! code in t-gob.c you can remark that there should be more to this standard GOB! than mee..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="3 ❤" />
<meta property="article:published_time" content="2021-05-31T08:02:36+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1617.html">GOB! type</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/8" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/development/datatypes.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Datatypes</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/iArnold'><span itemprop='name'>iArnold</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1617.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-05-31T08:02:36Z'>
              <time itemprop='dateModified' datetime='2021-05-31T08:05:26Z' class='post-time'>
                May 31, 2021,  8:05am
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>When creating a GOB! you can specify some values for it, or leave this empty and go for the default values like so:</p>
<pre><code>&gt;&gt; gb: make gob! []
== make custom! [offset: 100.0x100.0 size: 0.0x0.0 alpha: 255]
</code></pre>
<p>And this results in</p>
<pre><code>&gt;&gt; gb
== make custom! [offset: 100.0x100.0 size: 0.0x0.0 alpha: 255]
</code></pre>
<p>Where</p>
<pre><code>&gt;&gt; gb/offset
== 100.0x100.0

&gt;&gt; gb/size
== 0.0x0.0

&gt;&gt; gb/alpha
== 255
</code></pre>
<p>Now when taking a closer look at the GOB! code in <code>t-gob.c</code> you can remark that there should be more to this standard GOB! than meets the eye. There could be a <code>pane</code>, <code>content</code>, <code>data</code> as well as a <code>type</code> and an <code>OLD-OFFSET</code> too.</p>
<p>Let us test this out:</p>
<pre><code>&gt;&gt; gb: make gob! [data: [my data here]]
== make custom! [offset: 100.0x100.0 size: 0.0x0.0 alpha: 255]
</code></pre>
<p>Now remarkable enough gb on its own looks still the same</p>
<pre><code>&gt;&gt; gb
== make custom! [offset: 100.0x100.0 size: 0.0x0.0 alpha: 255]
</code></pre>
<p>Yet, now this is the case:</p>
<pre><code>&gt;&gt; gb/data
== [my data here]
</code></pre>
<p>So what about some of the other attributes?</p>
<pre><code>&gt;&gt; gb/pane  
== []


&gt;&gt; gb/flags
== []
</code></pre>
<p>But not</p>
<pre><code>&gt;&gt; gb/content
** Script Error: cannot pick content in path
** Where: console
** Near: [gb/content **]
** Line: 1

&gt;&gt; gb/parent
(i) Info: use WHY for error information
** Script Error: cannot pick parent in path
** Where: console
** Near: [gb/parent **]
** Line: 1

&gt;&gt; gb/type
** Script Error: cannot pick type in path
** Where: console
** Near: [gb/type **]
** Line: 1
</code></pre>
<p>But on line 93 of <code>t-gob.c</code> there is an initialization of TYPE going on:</p>
<pre><code>GOB_TYPE(a) = GOBT_NONE;
</code></pre>
<p>Be it initialized as 0 (enum from <code>reb-gob.h</code> line 125), imo that should mean it could have been picked up.</p>
<ul>
<li>
<p>What is the difference between the init of TYPE here and the other more successful inits?</p>
</li>
<li>
<p>Why is the content of the extra <code>data</code> information not shown when the GOB! gb is queried?</p>
</li>
<li>
<p>It would be very neat to have some kind of dictionary of functions and terminology that in the first place will point to the place where the function is defined. (This for many <code>MACRO</code>'s, the <code>REB***</code> structures, the <code>reb********</code> functions).</p>
</li>
</ul>
        </div>

        <meta itemprop='headline' content='GOB! type'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="1617.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2021-06-02T00:17:07Z'>
              <time itemprop='dateModified' datetime='2021-06-02T00:28:12Z' class='post-time'>
                June 2, 2021, 12:28am
              </time>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Looks like you might be gathering that that when it comes to GOB!, there's not too much to get excited about.</p>
<p>It was an attempt to make a less expensive form of OBJECT!, by fixing the fields it could carry.  Very few tests were written for it, and anything that isn't tested likely does not work.</p>
<p>GOB! isn't central to the questions I find interesting about the language.  But it seems reasonable to want to have the ability to develop such optimized data types as extensions.</p>
<p>So it has not been deleted because it is an example of that.  The pressure of wanting to keep it working but not "build it in" has influenced the way the extensibility of cells and series nodes work, e.g. <a href="https://github.com/metaeducation/ren-c/blob/92171dcfd52954e543793afe027fb7de7ea11d64/src/include/structs/sys-rebnod.h#L447">NODE_FLAG_GC_ONE and NODE_FLAG_GC_TWO</a>.</p>
<p><em>(Note that EVENT! is similar; but it tried to make the objects <em>really</em> small, e.g. the size of a cell.  That's a bit more interesting of an optimization, and there is code that tests their use.  So they are in better working condition, we assume.)</em></p>
<h3>The GOB_TYPE() Is Internal And Part Of The Optimization</h3>
<blockquote>
<p>But on line 93 of <code>t-gob.c</code> there is an initialization of TYPE going on:</p>
<pre><code class="lang-auto">GOB_TYPE(a) = GOBT_NONE;
</code></pre>
<p>Be it initialized as 0 (enum from <code>reb-gob.h</code> line 125), imo that should mean it could have been picked up.</p>
</blockquote>
<p>When you put different values into a GOB!, the type is set as part of that process.</p>
<pre><code>&gt;&gt; g: make gob! []

&gt;&gt; g.text: "hello"
== "hello"

&gt;&gt; g
== make custom! [offset: 100.0x100.0 size: 0.0x0.0 alpha: 255 text: "Hello"]
</code></pre>
<p>Now, behind the scenes, the GOB_TYPE() is GOBT_STRING.</p>
<p>The idea is that because GOB!s were trying to be economical, they only wanted to use one platform pointer to store the data.  The GOB_TYPE() is just a few bits chewed out of the header that were picked to help know how to interpret that pointer.</p>
<p>You can think of it like a <a href="https://en.wikipedia.org/wiki/Tagged_union">tagged union</a>.</p>
<h3>Parent/Child Relationships Are Automatic</h3>
<p>The idea behind the parent/child relationship is that GOB!s maintain that automatically, when you append/remove things:</p>
<pre><code>&gt;&gt; gp: make gob! []

&gt;&gt; gc: make gob! []

&gt;&gt; append gp gc

&gt;&gt; gc.parent = gp
== true

&gt;&gt; gp.parent
; null
</code></pre>
<p>This wasn't working in Ren-C (parent access was erroring instead of returning NULL when there was no parent).  But I've added that as a a test and fixed a couple of issues:</p>
<ul>
<li><a href="https://github.com/metaeducation/ren-c/commit/f70f64f30591958b183f6f29eabfc13f22646e08">GOB! comparisons fixed</a></li>
<li><a href="https://github.com/metaeducation/ren-c/commit/a0fdccb44d8c4d166cc42e96022a50eae2c559ab">Path access of known fields returns NULL on path access vs. error</a></li>
</ul>
<h2>However, GOB! is Not A Priority...</h2>
<p>I'll take a neutral stance on your research of GOB!.  You can continue to delve into it to satisfy yourself with whether they represent magic or a distraction from more central work.</p>
<p>I'm settled in for a bit after a couple weeks of travel and hoping to get back to the issues I was previously in the middle of...</p>
        </div>

        <meta itemprop='headline' content='GOB! type'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="3" />
           <span class='post-likes'>3 Likes</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
